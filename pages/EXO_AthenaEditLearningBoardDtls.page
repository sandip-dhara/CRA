<apex:page standardcontroller="Learning_Board__c" extensions="EXO_AthenaEditLearningBoardDtls" showheader="false" standardstylesheets="true" doctype="html-5.0" applybodytag="false" applyhtmltag="false">
    <!--[if IE 8]> <html lang="en" class="ie8"> <![endif]-->
  <!--[if IE 9]> <html lang="en" class="ie9"> <![endif]-->
  <!--[if !IE]><!-->
  <html lang="en">
  <!--<![endif]-->
  <!-- BEGIN HEAD -->
  <head>
  <meta charset="utf-8" />
  <title>Edit</title>
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />
  <meta content="" name="description" />
  <meta content="" name="hp" />
  <apex:stylesheet value="{!URLFOR($Resource.assets_athena, 'assets_athena/bootstrap/css/bootstrap.min.css')}" />
  <apex:stylesheet value="{!URLFOR($Resource.assets_athena, 'assets_athena/bootstrap/css/bootstrap-responsive.min.css')}" />
  <apex:stylesheet value="{!URLFOR($Resource.assets_athena, 'assets_athena/bootstrap/css/bootstrap-fileupload.css')}" />
  <apex:stylesheet value="{!URLFOR($Resource.assets_athena, 'assets_athena/font-awesome/css/font-awesome.css')}" />
  <apex:stylesheet value="{!URLFOR($Resource.css_athena, 'css_athena/style.css')}" />
  <apex:stylesheet value="{!URLFOR($Resource.css_athena, 'css_athena/style-responsive.css')}" />
  <apex:stylesheet value="{!URLFOR($Resource.css_athena, 'css_athena/style-default.css')}" />
  <apex:stylesheet value="{!URLFOR($Resource.css_athena, 'css_athena/tagit.ui-zendesk.css')}" />
  <apex:stylesheet value="{!URLFOR($Resource.css_athena, 'css_athena/jquery.tagit.css')}" />
  <apex:includeScript value="{!URLFOR($Resource.js_athena, 'js_athena/jquery-1.8.3.min.js')}"/>
  <apex:includeScript value="{!URLFOR($Resource.js_athena, 'js_athena/jquery.form.js')}"/>
  <apex:includeScript value="{!URLFOR($Resource.BlockUI)}"/> 
  
  <script type="text/javascript">
 
$(document).ajaxStart(function(){
//alert('!!!!Am Here ');
$.blockUI({baseZ:9999});
return;
});

$(document).ajaxSend(function(){
$.blockUI({baseZ:9999});
});
 

</script>
  
<script type="text/javascript">

      function SubmitSearchForm(event) {
          if (event.keyCode == 13) {
              var txtSearch = document.getElementById('{!$Component.UPForm.searchText}');
              if (txtSearch.value.length == 0) {
                  document.getElementById('err_msg').innerHTML = "Enter Value For Search";
                  document.getElementById('err_msg').style.display = 'block';
                  event.preventDefault();
                  event.stopPropagation();
                  return false;
              }
              else {
                  document.getElementById('err_msg').style.display = 'none';
                  var button = document.getElementById("{!$Component.UPForm.searchButton}");
                  button.click();
              }
              return true;
          }
      }
      function getUrlVars()
      {
          var vars = [], hash;
          var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
          for(var i = 0; i < hashes.length; i++)
          {
              hash = hashes[i].split('=');
              vars.push(hash[0]);
              vars[hash[0]] = hash[1];
          }
          return vars;
      }
</script>
  </head>
  <!-- END HEAD -->
  <!-- BEGIN BODY -->
  <body>

  <!-- BEGIN HEADER -->
  <header>
    <div class="navbar">
      <div class="navbar-inner">
        <div class="container-fluid"> <a class="HpLogo">
                 <apex:image url="{!URLFOR($Resource.img_athena, 'img_athena/insight_web_logo.png')}" style="width:220px" alt="HP Logo"/></a> 
         <!-- <apex:image url="{!URLFOR($Resource.img_athena, 'img_athena/HP_Blue_Logo.png')}" alt="HP Logo"/>
          </a>
          <div class="nav mtop10">
            <h1 class="h1fontS">Social Learning Platform</h1>
            <h3 class="h3fontS">Learning on your terms</h3>
          </div> -->
          <ul class="nav pull-right top-menu">
            <!-- BEGIN USER LOGIN DROPDOWN -->
            <li class="dropdown"> <a href="#" class="dropdown-toggle" data-toggle="dropdown"> Welcome <span class="username colorBlue">{!LoggedinUserDtls.Name}</span> <span>
              <apex:image url="{!LoggedinUserDtls.FullPhotoUrl}" styleClass="userImage" alt="no_username"/>
              </span> 
              <!--<b class="caret"></b>--> 
              </a>
              <ul class="dropdown-menu extended logout">
                <li><a href="https://{!getSfInstance}/apex/AthenaUserProfile?id={!LoggedinUserDtls.id}">My Profile</a></li>
                <li><a href="https://{!getSfInstance}/apex/SLP_EditUserProfile?id={!LoggedinUserDtls.id}">Edit Profile</a></li>
                <li><a href="https://{!getSfInstance}/secur/logout.jsp">Log Out</a></li>
              </ul>
            </li>
            <!-- END USER LOGIN DROPDOWN -->
          </ul>
          <c:SLP_SearchCustomComponent />
          <div class="alert alert-error topSearchEr" style="display:none;" id="err_msg">
       </div>
        </div>

      </div>
    </div>
    <div id="dvLoadSessionTK" style="display:none;"/>
    <a href="https://it-services-gw-itg.external.hp.com/sec-gw/demo" id="lnkToken" style="display:none;"/>
    <div class="navbar-inner">
      <div class="container-fluid menunavBar"> 
      <a class="icon-home topNavIcon" href="https://{!getSfInstance}/apex/slp_activity" title="Home"></a>
    <a class="icon-book topNavIcon"  href="https://{!getSfInstance}/apex/AthenaSocialLearning" title="Library"></a>

        <apex:OutputPanel rendered="{!IsLearningBoardCreator}"> <a class="icon-file-text-alt topNavIconC" href="https://{!getSfInstance}/apex/AthenacreatelearningBoard" title="Create Board"><span class="icon-plus NaviconPlus"></span></a> <a class="icon-group topNavIconCom" href="https://{!getSfInstance}/apex/SLP_createcommunity" title="Create Community"><span class="icon-plus NaviconPlus"></span></a> </apex:OutputPanel>
        <apex:outputPanel rendered="{!IsUserRoleMappingVisible}"> <a class="topNavRoll topNavIconCom" href="https://{!getSfInstance}/apex/SLP_UserRoleAndExpertiseMapping" title="User Role & Expert Mapping"><span class="NaviconPlus"></span></a> </apex:outputPanel>
        <!--  <a class="icon-question-sign topNavIcon pull-right" href="https://ea2013.sharepoint.hp.com/teams/esplm/SitePages/Social Learning.aspx" target="_blank" title="Help"></a> --> 
      </div>
    </div>    
   
      <!-- START Loading Image -->
    
<div id="loading_Modal"  style="width:150px;margin:0 auto;margin-top:10%;display:none;position:absolute;z-index:9999">
                                                            <img src="/img/loading32.gif" width="16" height="16"/><span> In Progress...</span>                       

</div>
            
    <!-- END Loading Image --> 
        
        <!-- START By Komala - EXO File Upload -->   

<div id="UploadFileComponent" style="display:none;">
                            <c:SLP_FileUpload />
    </div>
    <!--- Start Fileupload -->
                <div id="dvUploadFile" class="modal hide fade PositionR" tabindex="-1" style="width:800px; left:43%;display:none;position:relative;" role="dialog" aria-labelledby="myModalLabel1" aria-hidden="true" data-backdrop="static">
                  <div class="modal-header">
                    <h3>Upload Document</h3>
                  </div>
                  <div class="modal-body">
                    <div id="uploadLearning" class="span12 ml0 mtop10" > <span>Upload a new document or replace an existing one. </span> <span>

                      </span> </div>
                      
                  </div>
                  <div class="modal-footer">
                  <apex:form >
                  <apex:commandButton id="btnCancelUploadFile" Styleclass="btnAthena btn-primary" action="{!CancelUploadClick}" value="Cancel" />
                  <apex:inputHidden value="{!hdnPendingFileUploadTopicId}" id="hdnPendingFileUploadTopicId" />
                  <apex:inputhidden id="hdnBoardId" value="{!BoardId}"/>
                  <apex:inputhidden id="hdnExoCMSUrl" value="{!ExoCMSUrl}"/> 
 
                  </apex:form>
                  </div>
                </div>
                <!--- End Fileupload -->    
    
    <!-- END By Komala -->
  </header>
  <!-- END HEADER --> 
  <!-- BEGIN CONTAINER -->
  <div id="container" class="row-fluid"> 
    <!-- BEGIN PAGE -->
    
    <div id="main-content">
      <apex:form >
        <apex:commandButton action="{!DoRefreshUpload}" style="display:none;" id="btnRefreshUpload"/>
      </apex:form>
      <apex:form id="EditBoard">
        <apex:inputHidden value="{!DTopicId}" id="hdnLId" />
        <div class="BDbg">
          <div class="BDheadingE">
            <apex:inputText id="txtLName" styleclass="span7 inp5" value="{!BoardName}"  required="true" title="Board Name"  maxlength="100" / >
          </div>
          <div class="container-fluid">
          
            <div class="row-fluid mtop10">
              <div class="span8">
                <div class="PositionR"> <a class="a_underNone" data-toggle="modal"  onclick="funcEditBoardUpload()"  id="aEditBoardTitleImage">
                  <div class="EditBoardTitImg icon-pencil"> </div>
                  </a>
                  <div id="EditImage" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel1" aria-hidden="true" data-backdrop="static" style="left:79%; top:10%;">
                    <div class="modal-header">
                      <h3>Board header image</h3>
                    </div>
                    <div class="modal-body">
                      <div class="control-group Editratio">
                        <label class="control-label">Choose image</label>
                        <div class="controls"> <span class="mr10"> 
                          <!-- <input type="radio" id="ShowuploadImage" name="optionsRadios1" value="option2"  />
                  Upload from Computer </span> <span>
                  <input id="ShowDefaultImage" type="radio" name="optionsRadios1" value="option1"  />
                  Default Image -->
                          
                          <apex:selectRadio Styleclass="test2" id="imgEditBoard" value="{!ImageSelectionOption}"  onclick="ShowHideDefaultImage(this)">
                            <apex:selectOptions value="{!ImageOptions}"/>
                          </apex:selectRadio>
                          </span> </div>
                      </div>
                      <div class="check ShowuploadImage clearB" style="display: none"  id="ShowHideDefault">
                        <p>This image appears at the top of each learning board Recommended size is 920px * 320px</p>
                        <div class="controls">
                          <div data-provides="fileupload" class="fileupload fileupload-new">
                            <div style="width: 200px; height: 150px;" class="fileupload-new thumbnail">
                              <apex:image url="{!URLFOR($Resource.img_athena, 'img_athena/no_image.gif')}" alt="no_image" styleclass="viewDefNoImage"   style="width: auto; border: 0 none;"/>
                            </div>
                            <div style="max-width: 200px; max-height: 150px; line-height: 20px;" class="fileupload-preview fileupload-exists thumbnail"></div>
                            <div> <span class="btnAthena btn-file"><span class="fileupload-new">Select image</span> <span class="fileupload-exists">Change</span>
                              <apex:inputFile styleclass="default" value="{!BoardAttach.body}" filename="{!BoardAttach.name}" contentType="{!BoardAttach.contentType}"/>
                              </span> </div>
                          </div>
                          <span class="label label-important">NOTE!</span> <span>Attached image thumbnail is
                          supported in Latest Firefox, Chrome, Opera,
                          Safari and Internet Explorer 10 only </span> </div>
                      </div>
                      <div class="check ShowDefaultImage" style="display:none" id="DefaultDrop">
                        <div class="control-group">
                          <label class="control-label">Select Default Image </label>
                          <div class="controls">
                            <apex:selectList multiselect="false" size="1" value="{!dropDefaultSelected}" id="dropDefault" onchange="defaultImgChanged(this, '{!getStaticImagePath}')" >
                              <apex:selectOptions value="{!DefaultBoardImage}" ></apex:selectOptions>
                            </apex:selectList>
                            <div class="viewDefaultImage thumbnail">
                              <apex:image id="imgDefault" url="{!URLFOR($Resource.img_athena, 'img_athena/no_image.gif')}" alt="no_image" styleclass="viewDefNoImage"/>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="modal-footer">
                      <button class="btnAthena EbtnLess" data-dismiss="modal" aria-hidden="true">Cancel</button>
                      <apex:commandButton styleclass="btnAthena btn-primary btnAthenaPopP"  action="{!BoardImageupload}" value="Save" id="theButton"/>
                    </div>
                  </div>
                  <apex:outputPanel rendered="{!!BoardStaticImage}">
                    <apex:image url="{!URLFOR($Action.Attachment.Download, AttachmentId)}" styleClass="BoardDetailImage" />
                  </apex:outputPanel>
                  <apex:outputPanel rendered="{!BoardStaticImage}"> <img src='{!BoardDefaultImageName}' class="BoardDetailImage" /> </apex:outputPanel>
                  <div class="BoardTit">
                    <div class="span8 p5">
                      <apex:inputText id="txtSubTitle"  maxlength="75"  styleclass="span11 inp5"   value="{!BoardSubTitle}" title="Enter Sub Title" required="true"/>
                    </div>
                    <div class="span4"> 
                      <!--<button class="icon-edit btnAthena btn-primary mtop10 pull-right mr10" href="#ChangeOwner" data-toggle="modal" id="btnChangeOwner"></button>--> 
                      
                      <!--   <div id="ChangeOwner" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel1" aria-hidden="true" data-backdrop="static" style="left:70%; top:-250%;">
                
                                                    <div class="modal-header">
 
                                                        <h3>Change Owner</h3>
                                                    </div>
                                                    <div class="modal-body">
                                                        
                                                        <div class="span5">
                                                            <label>Current Owner</label>
                                                            </div>
                                                        <div class="span5">
                                                            <span> {!LearningBoardOwnerDtls.Name}</span>
                                                        </div>
                                                        <div class="span5 ml0 clearB">
                                                            <label>New Owner </label>
                                                        </div>
                                                        <div class="span5">
                                                            <span>
                                                                
                                                              <apex:inputField value="{!Learning_Board__c.ownerid}" id="chgOnwerInputUser" label="CurrentOwner" />   
                                                             
                                                              
                                                            </span>
                                                        </div>
                                                    </div>
                                                    <div class="modal-footer">
                                                        <button class="btnAthena EbtnLess" data-dismiss="modal" aria-hidden="true">Cancel</button>
                                                        <apex:inputHidden value="{!hdnChangeOwnerId}" id="hiddenChangeOwner" />
                                                        <apex:commandButton Styleclass="btnAthena btn-primary btnAthenaPopP" action="{!BoardChangeOwner}" value="Save"  onclick="funcChangeOwner('{!$Component.formLB.inputUser_lkid}');" />
                                                    </div>
                                                </div>-->
                      
                      <button class="icon-edit btnAthena btn-primary mtop10 pull-right mr10" data-toggle="modal" id="changeOwnerBtn" onclick="OpenChangeNamePopup();"></button>
                      <div id="dvChangeOwnerModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel1" aria-hidden="true" data-backdrop="static" style="left:70%; top:-250%;">
                        <div class="modal-header">
                          <h3>Change Owner</h3>
                        </div>
                        <div class="modal-body">
                          <div style="display:none">
                            <input type="text" id="txtOwnerSearchResult" />
                            <apex:inputText id="txtChangeOwnerId" value="{!ChangeOwnerID}" />
                          </div>
                          Search Users:
                          <input type="text" id="txtSearchOwner" class="SearchBox input-text" onkeydown="functionTextSearchUser(event);"/>
                          <span id="spnChangeOwnerErrorMsg" class="alert alert-error span4 pull-right mr30"></span>
                          <div id="divChangeOwnerResult" class='readmoreHpop'></div>
                        </div>
                        <div class="modal-footer">
                          <button class="btnAthena EbtnLess" data-dismiss="modal" aria-hidden="true">Cancel</button>
                          <input type="button" value="Add" class="btnAthena btn-primary btnAthenaPopP" onclick="SaveOrAddOwner()" />
                          <apex:commandButton style="display:none;"  action="{!SaveOrUpdateOwner}" value="Save" id="btnSaveOrUpdateOwner"/>
                        </div>
                      </div>
                      <div class="hpit_athena_ca-item-personName colorWhite mtop10 pull-right"> <a id="aLearningBoardName" class="hpit_athena_ca_itemLink" href="/apex/AthenaUserProfile?id={!LearningBoardOwnerDtls.id}"> {!LearningBoardOwnerDtls.Name} </a> </div>
                      <div class="hpit_athena_ca-item-personPhoto mtop5 pull-right">
                        <apex:image url="{!LearningBoardOwnerDtls.FullPhotoUrl}" width="35" height="35" alt="no_username_small."  />
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="span4">
                <div>
                  <div>
                    <apex:inputTextarea id="txtBoardDesc"  rows="3"  styleclass="span12" style="height: 214px; width: 97%;" required="true"  value="{!BoardDescription}" title="Enter Board Description"  />
                  </div>
                  <div class="control-group">
                    <label class="control-label">Add Tags</label>
                    <div class="controls">
                      <input name="tags" id="learningTags" value="{!LBAssociatedTags}" class="hide" />
                      <!-- Tag Hidden Value -->
                      <ul id="learningTagsTop">
                      </ul>
                    </div>
                    <div id="dvInputAsscotiateTags" style="display:none">
                      <apex:inputText value="{!UserTags}" id="txtUserTag"/>
                    </div>
                  </div>
                  <div class="control-group">
                    <label class="control-label">Template: {!BoardTemplateName}</label>
                    <div class="controls controls-row">
                      <apex:selectList multiselect="false" size="1" value="{!BoardTemplateId}" id="dropTemplate" rendered="false">
                        <apex:selectOptions value="{!BoardTemplates}" ></apex:selectOptions>
                      </apex:selectList>
                    </div>
                  </div>
                  <div class="controls mtop10 mbot10 clearfix"> <span class="mr10 publishCheckBG"> 
                    <!--<input type="checkbox" />-->
                    <apex:inputCheckbox value="{!BoardPublish}" id="chkPublish"> </apex:inputCheckbox>
                    Publish </span> <span class="mr10"> 
                    <!--<input type="checkbox" />-->
                    <apex:inputCheckbox disabled="{!!IsModerator}" value="{!BoardFeatured}" id="chkFeatured"> </apex:inputCheckbox>
                    Featured </span> <span class="mr10"> 
                    <!--<input type="checkbox" />-->
                    <apex:inputCheckbox value="{!BoardPublic}" id="chkPublic"> </apex:inputCheckbox>
                    Public </span> <span class="pull-right mtop10"> 
                    <!--<a href="https://{!getSfInstance}/apex/AthenaUserProfile?id={!LoggedinUserDtls.id}">My Profile</a></li>
            <input type="button" class="btnAthena" value="Cancel" id="btnHeaderBoardCancel"/>-->
                    <apex:commandButton styleclass="btnAthena btn-primary"  action="{!DoCancel}" id="btnHeaderBoardCancel"  value="Cancel"/>
                    <apex:commandButton styleclass="btnAthena btn-primary"  action="{!UpdateBoard}" id="btnHeaderBoardSave"  value="Save"  onclick="functionSaveChanges();"/>
                    </span> </div>
                  <apex:inputHidden value="{!hdnAddTag}" id="InputHiddenTag" />
                  <div id="dvRating" ></div>
                  <span>{!BoardRatersCount} People Rated and Avg Rating {!UserBoardRating}</span> </div>
              </div>
            </div>
          </div>
        </div>
      </apex:form>
      <div id="BoardChatter" style="display:none" class="row-fluid mtop10">
        <div class="span12">
          <div class="panel-group" id="Div5">
            <div class="" id="Div6">
              <div class='panel panel-default'>
                <div class='panel-heading'>
                  <h4 class='panel-title'> <a onclick="ShowHideChatter(this)"  class='accordion-toggle a_underNone' data-toggle='collapse' data-parent='#accordion'> <span class='icon-plus-sign-alt'></span> <span>What's on your mind? <span>
                    <apex:image url="{!URLFOR($Resource.img_athena, 'img_athena/hpChatIcon.png')}" alt="hpChatIcon"/>
                    </span></span></a></h4>
                </div>
              </div>
              <div id="chatterBoard"  style="display:none">
                <chatter:feed entityid="{!Learning_Board__c.id}" />
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!--Suman Friday Code Start -->
      
      <div id='dvAddCategory' class="clearfix" style="display:none"> <a class='btnAthena btn-inverse pull-right' data-toggle='modal' style="margin-right:3px"  onclick='AddCreateCategory()'><span class='icon-plus'></span> Add Category</a> </div>
      
      <!--Suman Friday Code End -->
      
      <apex:form id="EditTopic">
        <div class="container-fluid" >
          <div class="row-fluid mtop20">
            <div class="span8">
              <div class="panel-group" id="accordion">
                <div class="" id="DivLearnings"> </div>
              </div>
            </div>
            <div id="divPrivateMem" style="display:none">
              <apex:inputText id="txtPriMemAcc" value="{!PrivateMembersAccess}" />
              <apex:inputText id="txtCommApprv" value="{!CommApproved}" />
              <apex:inputText id="txtCommRjct" value="{!CommReject}" />
            </div>
            <div id="LBPMemAccess" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel1" aria-hidden="true">
              <div class="modal-header">
                <h3>Provide Member Access</h3>
              </div>
              <div class="modal-body">
                <div id="divPrivateMembers" class="AddLearningSearchDivB"></div>
              </div>
              <div class="modal-footer">
                <button class="btnAthena EbtnLess" data-dismiss="modal" aria-hidden="true">Cancel</button>
                <apex:commandButton styleclass="btnAthena btn-primary btnAthenaPopP" onclick=" return validatePrivateMembers(this)"   action="{!LBSavePrivateMemberAccess}" value="Save" id="PrivateMember"/>
              </div>
            </div>
            <div class="span4">
              <div class="row-fluid ">
                <div class="hpit_athena_rightDiv span12"> Contributors
                  <apex:OutputPanel rendered="{!IsBoardModeratorOrOwner}"> <a class="ml10" data-toggle="modal" id="aAddContributor" onclick="OpenContributorNamePopup();"><span class="icon-plus"></span> Add</a> 
                    <!--<a class="ml10" href="#AddContributors" data-toggle="modal" id="aAddContributor" onclick="OpenContributorNamePopup();><span class="icon-plus"></span> Add</a>--> 
                  </apex:OutputPanel>
                  <div id="AddContributors" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel1" aria-hidden="true">
                    <div class="modal-header">
                      <h3>Add Contributor</h3>
                    </div>
                    <div class="modal-body">
                      <div class="span5 ml0">
                        <label>New Contributor :</label>
                      </div>
                      <div class="span5"> <span>
                        <apex:inputField value="{!Learning_Board__c.ownerid}" id="inputUser" label="CurrentOwner" />
                        </span> 
                        <!-- search owner --> 
                      </div>
                    </div>
                    <div class="modal-footer">
                      <button class="btnAthena EbtnLess" data-dismiss="modal" aria-hidden="true">Cancel</button>
                      <apex:inputHidden value="{!hdnNewContributorId}" id="hdnNewContributor" />
                      <apex:commandButton Styleclass="btnAthena btn-primary btnAthenaPopP" action="{!AddContributor}" value="save"  onclick="AddContributor('{!$Component.formLB.inputUser_lkid}');" />
                    </div>
                  </div>
                  <hr />
                  
                  <!--Suman Contributors Code Start-->
                  
                  <apex:repeat value="{!Contributors}" var="cont" >
                    <div class="removeFdiv">
                      <li class="dropdown" id="header_inbox_bar"> <a href="https://{!getSfInstance}/apex/AthenaUserProfile?id={!cont.id}" title="{!cont.Name}" class="hpit_athena_ca-item-personPhoto" data-toggle="dropdown">
                        <apex:image width="35" height="35" url="{!cont.FullPhotoUrl}"  />
                        </a> </li>
                      <apex:OutputPanel rendered="{!IsBoardModeratorOrOwner}"> 
                        <!--<apex:commandLink styleClass="icon-remove-sign removeFbtn" action="{!RemoveContributor}" id="btnContributorsRemove">
                                 <apex:param name="q" value="{!cont.id}" assignTo="{!contrId}"/>
                            </apex:commandLink>--> 
                        <a class="icon-remove-sign removeFbtn" id="btnContributorsRemove" data-contrbtrID="{!cont.id}" onclick="functionContributorsRemove(this)"></a> </apex:OutputPanel>
                    </div>
                  </apex:repeat>
                  <div id="dvModalContributor" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel1" aria-hidden="true" data-backdrop="static">
                    <div id="Div1" style="Display:none">
                      <apex:inputText id="txtContributorId" value="{!ContributorId}" />
                    </div>
                    <div class="modal-header">
                      <h3>Are you sure you want to delete Contributor?</h3>
                    </div>
                    <div class="modal-body">
                      <p> </p>
                    </div>
                    <div class="modal-footer">
                      <input type="button" class="btnAthena" data-dismiss="modal" aria-hidden="true" value="No" />
                      <apex:commandButton styleclass="btnAthena btn-primary"  action="{!RemoveContributor}" value="Yes" id="CommandButton1"/>
                    </div>
                  </div>
                  <!--Suman Contributors Code End-->
                  
                  <div class="controls">
                    <apex:inputhidden id="hdnUserId" value="{!UserId}"/>
                    <apex:inputHidden value="{!ContributorUserID}" id="hdncontributorlist" />
                    <input type="hidden" id="hdnSearchResult" />
                    <div id="UserNamePopUp" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel1" aria-hidden="true" data-backdrop="static">
                      <div class="modal-header">
                        <h3>Add Contributor</h3>
                      </div>
                      <div class="modal-body"> Search Users:
                        <input type="text" id="txtSearchUsers" class="SearchBox input-text" onkeydown="functionTextSearchUser(event);"/>
                        <span id="dvctrbtrErrorMsg" class="alert alert-error span4 pull-right mr30"></span>
                        <div id="dvContributorsList" class='readmoreHpop'></div>
                      </div>
                      <div class="modal-footer">
                        <button class="btnAthena EbtnLess" data-dismiss="modal" aria-hidden="true">Cancel</button>
                        <input type="button" value="Add" class="btnAthena btn-primary btnAthenaPopP" onclick="SaveOrAddContributor(this)" />
                        <apex:commandButton style="display:none;"  action="{!SaveContributors}" value="Save" id="btnSaveContributor"/>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row-fluid ">
                <div class="hpit_athena_rightDiv span12"> Members <a class="ml10" href="#LBPMemAccess" data-toggle="modal" id="LBPMemberAccess"><span class="icon-plus"></span> Provide Access</a>
                  <hr />
                  
                  <!--Suman Followers Code Start-->
                  
                  <apex:repeat value="{!Followers}" var="cont" > <a href="https://{!getSfInstance}/apex/AthenaUserProfile?id={!cont.id}" title="{!cont.Name}" class="hpit_athena_ca-item-personPhoto" data-toggle="dropdown">
                    <apex:image width="35" height="35" url="{!cont.FullPhotoUrl}"  />
                    </a> </apex:repeat>
                  
                  <!--Suman Followers Code End--> 
                  
                </div>
              </div>
              <div class="row-fluid "> 
                
                <!--Suman Followers Code Start For Related Boards-->
                
                <div class="hpit_athena_rightDiv span12"> Related boards <a class="icon-sort-by-order btnAthena btn-primary" id="RelatedBoardsOrderId" data-toggle="modal" onclick="AddRelatedBoardChangeOrder()"></a> <a class="ml10" data-toggle="modal" onclick="AddRelatedBoard()"><span class="icon-plus"></span> Add</a>
                  <div id="AddBoards" class="modal hide fade PositionF" tabindex="-1" role="dialog" aria-labelledby="myModalLabel1" aria-hidden="true" data-backdrop="static" style="width: 55%;">
                    <div class="modal-header">
                      <h3>Add Related Boards</h3>
                    </div>
                    <div class="modal-body">
                      <div class="row-fluid">
                        <div class="span12">
                          <div class="span8"> <span>
                            <input type="text" placeholder="Enter title of learning board" id="txtAddRelative" class="span11"  />
                            </span> </div>
                          <div class="span4">
                            <input type="button" value="Search" class="btnAthena btn-primary" onclick="SearchAddRelatedBoard()" />
                          </div>
                          <div class="alert alert-error clearB pull-left mr30" style="display:none" id="dvReleatedBoardErrorMsg"> </div>
                          <div class="clearB">
                            <label>Available boards :</label>
                            <div id="AddRelative" class="AddLearningSearchDiv clearB"> </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="modal-footer">
                      <apex:inputHidden value="{!hdnRelatedLB}" id="hiddenRelatedSearch" />
                      <button class="btnAthena EbtnLess" data-dismiss="modal" aria-hidden="true">Cancel</button>
                      <input type="button" value="Add" class="btnAthena btn-primary btnAthenaPopP" onclick="SaveRelatedBoard(this)" />
                      <apex:commandButton action="{!SaveRelatedLB}" value="Search" id="btnRelatedBoard" title="" style="display:none;"/>
                    </div>
                  </div>
                  <div id="ChangeRelatedOrder" class="modal hide fade PositionF" tabindex="-1" role="dialog" aria-labelledby="myModalLabel1" data-backdrop="static" aria-hidden="true" style="width: 55%;">
                    <div class="modal-header">
                      <h3>Change Related boards Order</h3>
                    </div>
                    <div class="modal-body">
                      <div style="display:none">
                        <apex:inputText id="txtRelatedChangeOrderID"  value="{!RelatedChangedOrderId}"></apex:inputText>
                      </div>
                      <div class="span10 mtop20 changeOrder">
                        <div class="clearB mtop10 clearfix">
                          <div class="pull-left span10">
                            <select id="slctRelatedBoard" multiple="multiple" size="5" class="span12" style="height:250px">
                            </select>
                          </div>
                          <div class="pull-left p5 mtop10P">
                            <button id="btnRelatedMoveUp" type="button" class="btnAthena btn-primary" title="Move Up" value="Move Up"> &#9650; </button>
                            <br />
                            <button id="btnRelatedMoveDown" type="button" class="btnAthena btn-primary" title="Move Down"  value="Move Down"> &#9660; </button>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="modal-footer">
                      <button class="btnAthena" data-dismiss="modal" aria-hidden="true">Cancel</button>
                      <apex:commandButton styleclass="btnAthena btn-primary"  action="{!SaveRelatedChangeOrder}" value="Save" id="CommandButton5" onclick="SaveRelatedChangeOrder(this)" />
                    </div>
                  </div>
                  <hr />
                  <!--<apex:inputhidden value="{!hdnRelBrdId}" id="hdrlbrdId"></apex:inputhidden>-->
                  <apex:repeat value="{!RelatedLearningBoards}" var="rlb" > <a class="hpit_athena_ca_itemLink" href="/apex/athenaLearningBoardDtls?id={!rlb.Lbid}">
                    <p class="hpit_athena_rightHeading" style="margin:0"> <span style="font-size:15px" >{!rlb.LBName}</span> </p>
                    </a>
                    <p style="margin:0"><span style="color:#7A7878"> {!rlb.LBOwnerName}</span></p>
                    <a class="hpit_athena_ca_itemLink" href="/apex/athenaLearningBoardDtls?id={!rlb.Lbid}">
                    <div>
                      <li class="dropdown ErelatedB_remove" id="Li1"> <a class="icon-remove-sign removeFbtn fs16" id="A1" onclick="RemoveRelLearningBoard('{!rlb.Lbid}')"></a> </li>
                      <apex:outputPanel rendered="{!!rlb.StaticImage}">
                        <apex:image url="{!URLFOR($Action.Attachment.Download, rlb.AttachmentId)}"  width="220" height="162" />
                      </apex:outputPanel>
                      <apex:outputPanel rendered="{!rlb.StaticImage}"> 
                        <!--<apex:image url="{!URLFOR($Resource.athena_images, 'images/antena_defaultImgLearning.png')}" width="220" height="162"/>--> 
                        <img src='{!rlb.DefaultImageName}' width="220" height="162"/> </apex:outputPanel>
                    </div>
                    </a>
                    <hr />
                  </apex:repeat>
                  
                  <!--              <div>
                 <apex:repeat value="{!RelatedLearningBoards}" var="brdRslt">
                       <div class="hpit_athena_ca-item hpit_athena_ca-item-2">
                           <li class="dropdown ErelatedB_remove" id="Li2"> 
                                    <a class="icon-remove-sign removeCBbtn fs16" id="A3" onclick="RemoveRelLearningBoard('{!brdRslt.Lbid}')"></a>
                                  </li>
                          <div class="hpit_athena_ca-item-main">
                            <div class="hpit_athena_ca-item-firstHalf">
                              <div class="hpit_athena_ca-item-topBar">
                                <div class="hpit_athena_ca-item-topBarDate">
                                     <apex:OutputText value="{0,date,MMM dd}">
                                        <apex:param value="{!brdRslt.LBCrtDate}"/>
                                     </apex:outputtext>
                                </div>
                                <div class="hpit_athena_ca-item-topBarChat">
                                  <div class="hpit_athena_ca-item-topBarChatImg">
                                      <apex:image url="{!URLFOR($Resource.img_athena, 'img_athena/hpit_athena_chatIcon.png')}" width="14" height="14" alt="hpit_athena_chatIcon"/>
                                  </div>
                                  <div class="hpit_athena_ca-item-topBarChatValue">
                                      {!brdRslt.LBNoOfComments}
                                  </div>
                                </div>
                              </div>
                              <div class="ca-icon"> 
                                  <a class="hpit_athena_ca_itemLink ratingMouseOver" href="/apex/AthenaLearningBoardDtls?id={!brdRslt.LBid}" id= "anchorBoard_{!brdRslt.LBid}" data-boardLBid = 'ratingBoard_{!brdRslt.LBid}'>

                                    <apex:outputPanel rendered="{!!brdRslt.StaticImage}"> 
                                    
                                        <apex:image url="{!URLFOR($Action.Attachment.Download, brdRslt.AttachmentId)}" width="220" height="162"/>
                                    </apex:outputPanel>
                                    <apex:outputPanel rendered="{!brdRslt.StaticImage}">
                                       <img src='{!brdRslt.DefaultImageName}' width="220" height="162"/>                            
                                    </apex:outputPanel>
                                 
                                </a>
                              </div>
                            </div>
                            <a class="a_underNone">
                                <div class="hpit_athena_ca-item-BottomBar">
                                     <a class="hpit_athena_ca_itemA" href="/apex/AthenaLearningBoardDtls?id={!brdRslt.LBid}">
                                        <h3>{!brdRslt.LBName}</h3>
                                     </a>
                                </div>
                            </a>
                            <div class="hpit_athena_ca-item-SecondHalf">
                              <div class="hpit_athena_ca-item-person cf">
                                <div class="hpit_athena_ca-item-personPhoto">
                                    <apex:image value="{!brdRslt.OwnerPhotoUrl}" width="35" height="35" alt="no_username_small"/>
                                </div>
                                <a class="a_underNone">
                                    <div class="hpit_athena_ca-item-personName">
                                         <a class="hpit_athena_ca_itemLink" href="/apex/AthenaUserProfile?id={!brdRslt.LBOwnerID}">
                                            {!brdRslt.LBOwnerName}
                                         </a>
                                    </div>
                                </a>
                               <div class='hpit_athena_ca-item-personName hpit_athena_ca-item-personD hpit_athena_ca-item-personNameS'>{!IF((brdRslt.LBOwnerTitle==null),'',brdRslt.LBOwnerTitle)}</div>
                              </div>
                              <div class="hpit_athena_ca-item-PersonPost">
                                <p>{!brdRslt.LBDescription}</p>
                              </div>
                            </div>
                          </div>
                        </div>
                 </apex:repeat>     
             </div> -->
                  
                  <div id="dvRelatedBoardRemove" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel1" aria-hidden="true" data-backdrop="static">
                    <div id="Div3" style="Display:none">
                      <apex:inputText id="hdrlbrdId" value="{!hdnRelBrdId}" />
                    </div>
                    <div class="modal-header">
                      <h3>Are you sure you want to delete Related Board?</h3>
                    </div>
                    <div class="modal-body">
                      <p> </p>
                    </div>
                    <div class="modal-footer">
                      <input type="button" class="btnAthena" data-dismiss="modal" aria-hidden="true" value="No" />
                      <apex:commandButton styleclass="btnAthena btn-primary"  action="{!RemoveRelLearningBoard}" value="Yes" id="CommandButton6"/>
                    </div>
                  </div>
                </div>
                
                <!--Suman Followers Code End For Related Boards--> 
                
              </div>
            </div>
          </div>
        </div>
        
        <!--Suman Friday Code Start -->
        <div id="DeleteCategory" class="modal hide fade" tabindex="-1" role="dialog" style="width:800px; left:43%;" aria-labelledby="myModalLabel1" aria-hidden="true" data-backdrop="static">
          <div class="modal-body">
            <div class="row-fluid">
              <div class="span12">
                <div class="control-group">
                  <label class="control-label">Are you sure you want to Delete Category ? <br />
                    <span class="colorRed">Note: All Contents will be deleted</span></label>
                  <div style="display:none">
                    <apex:inputText id="txtDeleteCId" value="{!DeleteCategoryId}" ></apex:inputText>
                  </div>
                  <input type="button" class="btnAthena" data-dismiss="modal" aria-hidden="true" value="No" />
                  <apex:commandButton styleclass="btnAthena btn-primary btnAthenaPopP"    action="{!DeleteCategory}" value="Yes" id="btnDeleteCategory"/>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div id="EditCategory" class="modal hide fade" tabindex="-1" role="dialog" style="width:800px; left:43%;" aria-labelledby="myModalLabel1" aria-hidden="true" data-backdrop="static">
          <div class="modal-header">
            <h3>Edit Category</h3>
          </div>
          <div class="modal-body">
            <div class="row-fluid">
              <div class="span12">
                <div class="control-group">
                  <div class="controls controls-row">
                    <apex:inputText id="txtEditCategory"  maxlength="100" styleclass="input-block-level" value="{!EditCategoryNm}"    title="Enter Category Name" />
                  </div>
                  <div class="alert alert-error span4 pull-right mr30" style="display:none" id="Div10"> </div>
                </div>
              </div>
            </div>
            <div style="display:none">
              <apex:inputText id="txtEditCId" value="{!EditCategoryId}" ></apex:inputText>
            </div>
            <input type="button" class="btnAthena" data-dismiss="modal" aria-hidden="true" value="Cancel" />
            <!--<input type="button" class="btnAthena btn-primary btnAthenaPopP"  value="Save"  id="Button3"   /> -->
            <apex:commandButton styleclass="btnAthena btn-primary btnAthenaPopP"    action="{!EditCategory}" value="Save" id="btnEditCategory"/>
          </div>
        </div>
        <!--Suman Friday Code End -->
        
        <div id="AddCategory" class="modal hide fade" tabindex="-1" role="dialog" style="width:800px; left:43%;" aria-labelledby="myModalLabel1" aria-hidden="true" data-backdrop="static">
          <div class="modal-body">
            <div class="row-fluid">
              <div class="span12">
                <div class="control-group">
                  <label class="control-label">Name</label>
                  <div class="controls controls-row">
                    <apex:inputText id="txtCtgryNm"  maxlength="50" styleclass="input-block-level" value="{!CategoryName}"    title="Enter Category Name" />
                  </div>
                  <div class="alert alert-error span4 pull-right mr30" style="display:none" id="duplicateName"> </div>
                </div>
              </div>
            </div>
            <input type="button" class="btnAthena" data-dismiss="modal" aria-hidden="true" value="Cancel" />
            <input type="button" class="btnAthena btn-primary btnAthenaPopP"  value="Save"  id="CategorySave"  onclick="VerifyDuplicateCategoryName()" />
            <apex:commandButton styleclass="btnAthena btn-primary btnAthenaPopP"  style="display:none"   action="{!CreateCategory}"  value="Save" id="SaveCategory"/>
          </div>
        </div>
        <div id="AddTopics" class="modal hide fade" tabindex="-1" role="dialog" style="width:800px; left:43%;" aria-labelledby="myModalLabel1" aria-hidden="true" data-backdrop="static"> 
          <!-- <div class="modal-header">
                            <h3>Add Topics</h3>
                          </div>-->
          <div class="modal-body">
            <div class="TABclass">
              <ul class="nav nav-tabs" id="myTab">
                <li class="active"><a data-toggle="tab" href="#SearchTopics" ><span class="icon-search"></span> Search Existing Content </a></li>
                <li><a data-toggle="tab" href="#CreateNewTopics"><span class="icon-plus"></span> Create New Content </a></li>
              </ul>
              <div class="tab-content" id="myTabContent">
                <div id="SearchTopics" class="tab-pane fade active in">
                  <div class="row-fluid">
                    <div class="span12">
                      <div class="span9">
                        <div class="control-group">
                          <div class="pull-left colorBlue">
                            <h1 class="control-label">Category :</h1>
                          </div>
                          <div class="pull-left mtop5">
                            <label class="control-label"  id="lblCtgryName"></label>
                          </div>
                          <div class="controls controls-row">
                            <input type="text" class="input-block-level" value="" id="txtLearningBrd"  html-Placeholder="Search Topics" onkeydown="SearchTopic(event)"/>
                          </div>
                        </div>
                      </div>
                      <div class="span2">
                        <input type="button" class="btnAthena btn-primary mtop30" value="Search" onclick="SearchLearningBoard()"/>
                      </div>
                      <div class="alert alert-error span4 pull-right mr30" style="display:none" id="emptySearchTopic"> </div>
                      <!-- Commented By Komala <p class="searchResult clearB" id="divSearchTopicResult"  style="display:none">Search Topic result </p> --> 
                      
                    </div>
                  </div>
                  <!-- START By Komala -->
                  
                  <div class="TABclass clearB">
                    <ul class="nav nav-tabs">
                      <li class="active"><a href="#searchTopicsTab" data-toggle="tab">Content result <span class="countNum">(<span id="TopicResult"></span>)</span> </a></li>
                      <li><a href="#searchExternal" data-toggle="tab">Search result <span class="countNum">(<span id="SearchRes"></span>)</span> </a></li>
                    </ul>
                    <div class="tab-content">
                      <div class="tab-pane active" id="searchTopicsTab">
                        <p class="searchResult clearB" id="divSearchTopicResult"  style="display:none">Search Content result </p>
                        <div class=" AddLearningSearchDivB" id="AddLearningSearch"  style="display:none"> </div>
                        <div class="mbot20">
                          <div class="controls mtop10"> <span class="pull-right mtop30">
                            <input type="button" class="btnAthena btn-primary btnAthenaPopP" value="Save" style="display:none" id="BtnSaveSearchTopics"  onclick="return SaveSearchTopic(this);"/>
                            <apex:commandButton styleclass="btnAthena btn-primary btnAthenaPopP"  style="display:none"   action="{!CreateSearchTopic}" value="Add" id="btnSaveSearchTopic"/>
                            </span> </div>
                        </div>
                      </div>
                      <div class="tab-pane" id="searchExternal">
                        <div class="AddLearningSearchDivB" id="ExternalSearch"> </div>
                      </div>
                    </div>
                  </div>
                  <!-- End By Komala -->
                  
                  <div class="row-fluid">
                    <div class="span12 AddLearningSearchDiv" id="Div2"  style="display:none"> </div>
                  </div>
                  <div id="SearchTopicDiv"  style="display:none">
                    <apex:inputText id="txtSearchTopic"  value="{!SearchTopicIds}"></apex:inputText>
                    <apex:inputText id="txtSearchCtgry"  value="{!SearchCtgry}"></apex:inputText>
                  </div>
                  <div class="mbot20">
                    <div class="controls mtop10"> <span class="pull-right mtop30">
                      <input type="button" class="btnAthena" data-dismiss="modal" aria-hidden="true" value="Cancel" />
                      </span> </div>
                  </div>
                </div>
                <div id="CreateNewTopics" class="tab-pane fade ">
                  <div class="row-fluid">
                    <div class="span12">
                      <div class="control-group">
                        <div class="alert alert-error span4 pull-right mr30" style="display:none" id="emptyImageUpLoad"> </div>
                        <!-- <h1 class="catHeading">What Category</h1>
                                        <hr />-->
                        <div class="pull-left colorBlue">
                          <h1 class="control-label">Category :</h1>
                        </div>
                        <div class="pull-left mtop5">
                          <label class="control-label"  id="lblCategory"></label>
                          <apex:selectList multiselect="false" size="1" value="{!CreateTopicCtgryId}" id="Ctgry" onclick="CreateCatChanged()">
                            <apex:selectOptions value="{!TopicCategory}" ></apex:selectOptions>
                          </apex:selectList>
                        </div>
                      </div>
                      <div class="control-group clearB ptop10">
                        <apex:inputHidden value="{!hdnTopicCatId}" id="hdnTopicCtgry" />
                        <label class="control-label">Type</label>
                        <div class="controls controls-row">
                          <apex:selectList styleclass="span12 "  multiselect="false" size="1" value="{!CreateTypeOfTopic}" id="LearningTopic"  onchange="ShowTopicOnType(this)">
                            <apex:selectOptions value="{!LearningType}" ></apex:selectOptions>
                          </apex:selectList>
                        </div>
                      </div>
                      <div class="mbot20" id="dvInitTopicCancel">
                        <div class="controls mtop10"> <span class="pull-right mtop30">
                          <input type="button" id="btnInitTopicCancel" class="btnAthena" data-dismiss="modal" aria-hidden="true" value="Cancel" />
                          </span> </div>
                      </div>
                      <div  id="divTopicCommon" style="display:none">
                        <div class="control-group">
                          <label class="control-label">Name</label>
                          <div class="controls controls-row">
                            <apex:inputText id="txtTopic"  maxlength="100" styleclass="input-block-level" value="{!CreateTopicName}"  onblur="VerifyDuplicateTopicName(this)"  title="Enter Content Name" />
                          </div>
                          <div class="alert alert-error span4 pull-right mr30" style="display:none" id="showDuplicateTName"> </div>
                        </div>
                        <div class="control-group">
                          <label class="control-label">Description </label>
                          <div class="controls controls-row">
                            <apex:inputTextarea id="txtTopicArea"   styleclass="span12"   value="{!CreateTopicDesc}" title="Enter Content Description" />
                          </div>
                        </div>
                        <div class="control-group">
                          <label class="control-label">Add Tags</label>
                          <div id="AddTopicTags" style="display:none">
                            <apex:inputText id="txtAddTopicTags"  value="{!TopicTags}"></apex:inputText>
                          </div>
                          <div class="controls">
                            <input name="tags" id="txtTopicTags" value="{!TopicTags}" class="hide" />
                            <!-- Tag Hidden Value -->
                            <ul id="TopicTags">
                            </ul>
                          </div>
                        </div>
                        <div id="urlLearning" style="display:none"  class="span12 ml0 mtop10 clearB" >
                          <label>URL <span class="colorWarning warningImg" style="display:none" id="spnNoticeMessage"></span></label>
                          <span>
                          <apex:inputText id="InputTextURL" styleclass="span10" value="{!CreateTopicVideoURL}"/>
                          <!--<apex:commandButton styleclass="btnAthena btn-primary mtop-10" action="{!ShowVideoPreview}" value="Test"  />-->
                          <button type="button" class="btnAthena btn-primary mtop-10" id="playvideo"  onclick="openNewWindow()">Test</button>
                          
                          <!--<iframe id="video1" width="520" height="360"  frameborder="0" ></iframe>--> 
                          
                          </span> </div>
                      </div>
                      <div class="span5 ml0 mtop10 clearB"  id="VideoLearning"  style="display:none"> <span> 
                        <!-- <apex:inputText id="txtVideoURL" styleclass="span10" value="{!LVideoURL}"/>
                                                              
                                                                <button type="button" class="btnAthena btn-primary mtop-10">Test</button>--> 
                        <span class="colorBlue">Video Preview</span><br />
                        <span>
                        <div class="span10">
                          <apex:image id="novideo" url="{!URLFOR($Resource.img_athena, 'img_athena/no_video.png')}" alt="no_video" styleClass="span12"/>
                          <iframe   id="testvideo" frameborder="0"   scrolling="no" class="borderV" style="display:none"></iframe>
                        </div>
                        </span> <br />
                        </span>
                        <p class="span12 BoardImgList ml0 clearB"> </p>
                      </div>
                      <div id="TopicTextImage" style="display:none" class="clearB">
                        <div class="control-group Editratio">
                          <label class="control-label">Choose image</label>
                          <div class="controls"> <span class="mr10">
                            <apex:selectRadio id="UpLoadDefault" value="{!CreateImageSelectionTopic}"  onclick="ShowHideDefaultTopicImage(this)">
                              <apex:selectOptions value="{!ImageOptions}"/>
                            </apex:selectRadio>
                            </span> </div>
                        </div>
                        <div class="check ShowuploadImage clearB" style="display: none"  id="ShowTopicUpload">
                          <p>This image appears at the top of each Content Recommended size is 320px * 215px</p>
                          <div class="controls">
                            <div data-provides="fileupload" class="fileupload fileupload-new">
                              <div style="width: 200px; height: 150px;" class="fileupload-new thumbnail">
                                 <apex:image url="{!URLFOR($Resource.img_athena, 'img_athena/no_image.gif')}" alt="no_image" styleclass="viewDefNoImage"   style="width: auto; border: 0 none;"/> 
                                
                              </div>
                              <div style="max-width: 200px; max-height: 150px; line-height: 20px;" class="fileupload-preview fileupload-exists thumbnail"></div>
                              <div> <span class="btnAthena btn-file"><span class="fileupload-new">Select image</span> <span class="fileupload-exists">Change</span>
                                <apex:inputFile id="UpLoadTextImage" styleclass="default" value="{!BoardTopicAttach.body}" filename="{!BoardTopicAttach.name}" contentType="{!BoardTopicAttach.contentType}"/>
                                </span> </div>
                            </div>
                            <span class="label label-important">NOTE!</span> <span>Attached image thumbnail is
                            supported in Latest Firefox, Chrome, Opera,
                            Safari and Internet Explorer 10 only </span> </div>
                        </div>
                        <div class="check ShowDefaultImage" style="display:none" id="ShowTopicDefault">
                          <div class="control-group">
                            <label class="control-label" style="display:none">Select Default Image </label>
                            <div class="controls">
                            <div id="disabledDiv" style="display:none">
                              <apex:selectList multiselect="false" size="1" value="{!CreateTopicDefaultSelected}" id="LstSelectDefaultImg" onchange="defaultImgTopic(this, '{!getStaticImagePath}')" >
                                <apex:selectOptions value="{!DefaultTopicImage}" ></apex:selectOptions>
                              </apex:selectList>
                              </div>
                              <div class="viewDefaultImage thumbnail">
                              <!-- Default image -->
                               <apex:image id="TopicDefaultImage" url="{!URLFOR($Resource.img_athena, 'img_athena/BoardContent1.png')}" alt="no_image" styleclass="viewDefNoImage"/>
                              
                                 <!-- <apex:image id="TopicDefaultImage" url="{!URLFOR($Resource.img_athena, 'img_athena/no_image.gif')}" alt="no_image" styleclass="viewDefNoImage"/> -->
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="mbot20 clearB"  id="TopicCheckPublish"  style="display:none">
                        <hr />
                        <div class="controls mtop10"> <span class="mr10 publishCheckBG">
                          <apex:inputCheckbox value="{!CreateTopicPublish}" id="AddTopicPublish"/>
                          Publish </span> <span class="mr10">
                          <apex:inputCheckbox value="{!CreateTopicClientFacing}" id="AddTopicCF"  />
                          Client Facing </span> <span class="mr10">
                          <apex:inputCheckbox value="{!CreateTopicPracticeApprv}"  id="AddTopicPA"/>
                          Practice Approved </span>
                          <div style="display:none">
                            <apex:inputText id="txtCategoryType" styleclass="span10" value="{!CategoryType}"/>
                          </div>
                          <span class="pull-right mtop30">
                          <div id="TextUrlLink"  style="display:none" >
                            <input type="button" class="btnAthena" data-dismiss="modal" aria-hidden="true" value="Cancel" />
                            <input type="button" class="btnAthena btn-primary btnAthenaPopP" value="Save"  id="SaveAndNext"  onclick="funcVerifyDuplicateTopic(this)"/>
                            <apex:commandButton styleclass="btnAthena btn-primary btnAthenaPopP"  style="display:none"   action="{!CreateLearningAndAssociate}" value="Save" id="SaveTopic"/>
                          </div>
                          <div  id="UpLoadDoc"  style="display:none" >
                            <input type="button" class="btnAthena" data-dismiss="modal" aria-hidden="true" value="Cancel" />
                            <input type="button" class="btnAthena btn-primary btnAthenaPopP"  value="Next"  onclick="funcVerifyDuplicateTopicUpload(this)"/>
                            <apex:commandButton styleclass="btnAthena btn-primary btnAthenaPopP"  style="display:none"   action="{!CreateLearningAndAssociate}" value="Next"  id="NextCreateTopic"/>
                          </div>
                          </span> </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div id="LearningChangeOrderPopup" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel1" data-backdrop="static" aria-hidden="true" >
          <div class="modal-header">
            <h3>Change Content Order</h3>
          </div>
          <div class="modal-body">
            <div style="display:none">
              <apex:inputText id="txtOrderCategoryName"  value="{!OrderTopicCategoryName}"></apex:inputText>
              <apex:inputText id="txtOrderCategoryId"  value="{!OrderTopicCategoryId}"></apex:inputText>
            </div>
            <div style="display:none">
              <apex:inputText id="txtTopicChangeOrderID"  value="{!CategoryChangeOrderTopicId}"></apex:inputText>
            </div>
            <div class="mtop20 changeOrder">
              <div class="clearB mtop10 clearfix">
                <div class="pull-left">
                  <select id="list-box" multiple="multiple" size="5" class="span12"  style="height:250px; width:350px">
                  </select>
                </div>
                <div class="pull-left p5 mtop10P">
                  <button id="move-up" type="button" class="btnAthena btn-primary" title="Move Up" value="Move Up"  onclick="moveUp()"> &#9650; </button>
                  <br />
                  <button id="move-down" type="button" class="btnAthena btn-primary" title="Move Down"  value="Move Down" onclick="moveDown()"> &#9660; </button>
                </div>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button class="btnAthena" data-dismiss="modal" aria-hidden="true">Cancel</button>
            <apex:commandButton styleclass="btnAthena btn-primary"  action="{!SaveLearningChangeOrder}" value="Save" onclick="SaveTopicsChangeOrder(this)" id="CommandButton9"/>
          </div>
        </div>
        
        <!--- Delete Topic -->
        <div id="DeleteTopics" class="modal hide fade" tabindex="-1" role="dialog" style="width:800px; left:43%;" aria-labelledby="myModalLabel1" aria-hidden="true" data-backdrop="static">
          <div class="modal-header">
            <h3>Are you sure you want to delete Content ?</h3>
          </div>
          <div class="controls mtop10" >
            <div id="DeleteTopicId" style="Display:none">
              <apex:inputText id="txtTId" value="{!DTopicId}" />
            </div>
            <div class="modal-body"> <span class="pull-right mtop30">
              <input type="button" class="btnAthena" data-dismiss="modal" aria-hidden="true" value="No" />
              <apex:commandButton styleclass="btnAthena btn-primary"  action="{!DeleteTopic}" value="Yes" id="RemoveTopic"  onclick="RemoveTopicDlog()"/>
              </span> </div>
          </div>
        </div>
        <div id="GlobalSearch" class="modal hide fade" tabindex="-1" role="dialog" style="width:800px; left:43%;" aria-labelledby="myModalLabel1" aria-hidden="true" data-backdrop="static">
          <div class="modal-header">
            <h3>Create New Content</h3>
          </div>
          <div class="modal-body">
            <div class="row-fluid">
              <div class="span12">
                <div class="control-group clearfix">
                  <div class="alert alert-error span4 pull-right mr30" style="display:none" id="DivDuplicateIdolTName"> </div>
                  <div class="pull-left colorBlue">
                    <h1 class="control-label pl0">Category :</h1>
                  </div>
                  <div class="pull-left mtop5">
                    <label class="control-label"  id="lblGblCtgry" ></label>
                    <apex:selectList multiselect="false" size="1" value="{!CreateSearchTopicCtgryId}" id="TopicCtrgy" >
                      <apex:selectOptions value="{!TopicCategory}" ></apex:selectOptions>
                    </apex:selectList>
                  </div>
                </div>
                
                <!--                                      <div class="control-group">
                                          <label class="control-label">Category:</label>

                                          </div>-->
                <div class="control-group clearfix">
                  <div class="pull-left colorBlue">
                    <h1 class="control-label pl0">Type : </h1>
                  </div>
                  <div class="pull-left mtop5">
                    <label class="control-label"  >Link</label>
                  </div>
                </div>
                <div class="control-group">
                  <label class="control-label">Content</label>
                  <div class="controls controls-row">
                    <apex:inputText id="SearchTopicNm" styleclass="input-block-level" value="{!RTopicName}"/>
                  </div>
                </div>
                <div class="control-group">
                  <label class="control-label">Description </label>
                  <div class="controls controls-row">
                    <apex:inputTextarea id="SearchTopicDesc"   styleclass="span12"   value="{!RTopicDescription}" title="Enter Content Description"/>
                  </div>
                </div>
                <div class="control-group">
                  <label class="control-label">Add Tags</label>
                  <div id="Div4" style="display:none" >
                    <apex:inputText id="txtAssTags"  value="{!GlobalSearchTags}"></apex:inputText>
                  </div>
                  <div class="controls">
                    <input name="tags" id="txtExternalSrchTags" value="{!TopicTags}" class="hide" />
                    <!-- Tag Hidden Value -->
                    <ul id="ExternalSearchTags">
                    </ul>
                  </div>
                </div>
                <div id="Div7"  class="ml0 mtop10" >
                  <label>URL <span class="colorWarning"></span></label>
                  <span>
                  <apex:inputText id="SearchLinkUrl" styleclass="span10" value="{!RLink}"/>
                  <!--<apex:commandButton styleclass="btnAthena btn-primary mtop-10" action="{!ShowVideoPreview}" value="Test"  />-->
                  <button type="button" class="btnAthena btn-primary mtop-10" id="Button2"  onclick="openNewWindow()">Test</button>
                  </span> </div>
                <div id="UrlChoose" class="clearfix clearB mtop10" >
                  <div class="control-group Editratio">
                    <label class="control-label">Choose image :</label>
                    <div class="controls"> <span class="mr10">
                      <apex:selectRadio value="{!CreateImageTopicUrl}" id="IdolSearchRadio"  onclick="ShowHideSearchTopicImage(this)">
                        <apex:selectOptions value="{!IdolImageOptions}"/>
                      </apex:selectRadio>
                      </span> </div>
                  </div>
                  <div class="check ShowuploadImage clearB" style="display: none"  id="UploadSearchUrl">
                    <p>This image appears at the top of each learning board Recommended size is 920px * 320px</p>
                    <div class="controls">
                      <div data-provides="fileupload" class="fileupload fileupload-new">
                        <div style="width: 200px; height: 150px;" class="fileupload-new thumbnail">
                          <apex:image url="{!URLFOR($Resource.img_athena, 'img_athena/no_image.gif')}" alt="no_image" styleclass="viewDefNoImage"   style="width: auto; border: 0 none;"/>
                        </div>
                        <div style="max-width: 200px; max-height: 150px; line-height: 20px;" class="fileupload-preview fileupload-exists thumbnail"></div>
                        <div> <span class="btnAthena btn-file"><span class="fileupload-new">Select image</span> <span class="fileupload-exists">Change</span>
                          <apex:inputFile id="IdolSearchUploadImg" styleclass="default" value="{!RBoardTopicAttach.body}" filename="{!RBoardTopicAttach.name}" contentType="{!RBoardTopicAttach.contentType}"/>
                          </span> </div>
                      </div>
                      <span class="label label-important">NOTE!</span> <span>Attached image thumbnail is
                      supported in Latest Firefox, Chrome, Opera,
                      Safari and Internet Explorer 10 only </span> </div>
                  </div>
                  <div class="check ShowDefaultImage" style="display:none" id="DefaultSearchUrl">
                    <div class="control-group">
                      <label class="control-label" style="display:none">Select Default Image </label>
                      <div class="controls">
                      <div style="display:none">
                        <apex:selectList multiselect="false" size="1" value="{!SearchRTopicDefaultSelected}" id="SelectDefaultIdolImage" onchange="IdoldefaultImgTopic(this,'{!getStaticImagePath}')" >
                          <apex:selectOptions value="{!DefaultImagefilename}" ></apex:selectOptions>
                        </apex:selectList>
                        </div>
                        <div class="viewDefaultImage thumbnail">
                          <apex:image id="IdolDefaultImg" url="{!URLFOR($Resource.img_athena, 'img_athena/BoardContent1.png')}" alt="no_image" styleclass="viewDefNoImage"/>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <hr />
                <div class="mbot20"  id="Div9"  >
                  <div class="controls mtop10"> <span class="mr10 publishCheckBG">
                    <apex:inputCheckbox value="{!RTopicPublish}"  id="InputCheckbox1"/>
                    Publish </span> <span class="mr10">
                    <apex:inputCheckbox value="{!RTopicClientFacing}"  id="InputCheckbox2" />
                    Client Facing </span> <span class="mr10">
                    <apex:inputCheckbox value="{!RTopicPracticeApprv}" id="InputCheckbox3" />
                    Practice Approved </span> <span class="pull-right">
                    <input type="button" class="btnAthena" data-dismiss="modal" aria-hidden="true" value="Cancel" />
                    <input type="button" class="btnAthena btn-primary btnAthenaPopP"  value="Save"  id="Button4"  onclick="funcIdolCreateTopic()"  />
                    <apex:commandButton styleclass="btnAthena btn-primary btnAthenaPopP" style="display:none"  action="{!CreateIdolSearchTopic}" value="Save" id="btnIdolSave"/>
                    </span> </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!--End Search Global Results --> 
        <!--- Edit Topic-->
        <div id="EditTopics" class="modal hide fade positionR" tabindex="-1" role="dialog" style="width:800px; left:43%;" aria-labelledby="myModalLabel1" aria-hidden="true" data-backdrop="static">
          <div class="modal-header">
            <h3>Edit Content</h3>
          </div>
          <div class="modal-body">
            <div class="row-fluid">
              <div class="span12">
                <div class="control-group"> 
                  <!-- <h1 class="catHeading">What Category</h1>
                                        <hr />-->
                  <div class="alert alert-error span4 pull-right mr30" style="display:none" id="errorMsgForEdit"> </div>
                  <label class="control-label">Category</label>
                  <div class="controls controls-row">
                    <apex:selectList multiselect="false" size="1" value="{!TopicCtgryId}" id="TopicCategory"  onclick="EditCatChanged()">
                      <apex:selectOptions value="{!TopicCategory}" ></apex:selectOptions>
                    </apex:selectList>
                  </div>
                  <apex:inputHidden value="{!hdnTopicCatId}" id="InputHidden1" />
                  <div class="pull-left colorBlue">
                    <h1 class="control-label">Type :</h1>
                  </div>
                  <div class="pull-left mtop5">
                    <label class="control-label"  id="lblTopicType" data-TypeId=""></label>
                  </div>
                  
                  <!--  <label class="control-label">Type</label>-->
                  <div class="controls controls-row">
                    <apex:selectList styleclass="span12 "  multiselect="false" size="1" value="{!TypeOfTopic}" id="TypeOfTopic"  >
                      <apex:selectOptions value="{!LearningType}" ></apex:selectOptions>
                    </apex:selectList>
                  </div>
                </div>
                <div id="EditTopicId"  style="display:none">
                  <apex:inputText id="txtEditTopicId" value="{!TopicId}" styleclass="input-block-level" > </apex:inputText>
                </div>
                <div id="hideEditTopic" style="display:none">
                  <apex:inputText id="txtHideTopic" styleclass="input-block-level" value="{!TopicName}"/>
                </div>
                <div  id="EditCommonTopic" style="display:none">
                  <div class="control-group">
                    <label class="control-label">Content</label>
                    <div class="controls controls-row">
                      <apex:inputText id="txtEditTopicName" styleclass="input-block-level" value="{!TopicName}"/>
                     </div>
                    <!--<div class="alert alert-error span4 pull-right mr30" style="display:none" id="errorMsgForEdit">
                                        </div>--> 
                  </div>
                  <div class="control-group">
                    <label class="control-label">Description </label>
                    <div class="controls controls-row">
                      <apex:inputTextarea id="txtEditTopicDesc"   styleclass="span12"   value="{!TopicDesc}" title="Enter Content Description"/>
                    </div>
                  </div>
                  <div class="control-group">
                    <label class="control-label">Add Tags</label>
                    <div id="Div8" style="display:none" >
                      <apex:inputText id="txtEditTag"  value="{!EditTagValues}"></apex:inputText>
                    </div>
                    <div class="controls">
                      <input name="tags" id="txtEditTags"  class="hide" />
                      <!-- Tag Hidden Value -->
                      <ul id="EditTags">
                      </ul>
                    </div>
                  </div>
                  <div id="EditUpload" style="display:none"  class="span12 ml0 mtop10 clearB borderV" >
                    <div class="m10"> <span>Upload a new document or replace an existing one. </span> <br/>
                      <span id="hdnLURLCaption">Current uploaded document: </span><a href="" id="hdnLURLlink" target="_blank">abc</a> <span>
                      <!-- Commented By Komala <apex:canvasApp canvasId="capp" applicationName="SLP_File_Upload" width="90%" height="275px" scrolling="no"/> -->
                              <div id="UploadFile_EditTopics">
                              </div>
                              
                      </span>
                      <!-- Commented By Komala <input type='button' onclick="UploadViaApp('edit')" Value="Upload File" style="padding-left:20px" class="btnAthena btn-primary"/> -->
                    </div>
                  </div>
                  <div id="EditLinkDoc" style="display:none"  class="span5 ml0 mtop10 clearB" > 
                    <!--<span class="colorWarning" id="spnEditNoteVideoMsg"></span>
                                                <label>URL :</label> <label  id="lblTopicUrl" ></label>-->
                    <div style="width:auto">Existing URL:
                      <label  id="lblTopicUrl" ></label>
                    </div>
                    <div style="width:780px">URL: <span class="colorWarning warningImg" id="spnEditNoteVideoMsg"></span></div>
                    <span>
                    <apex:inputText id="txtEditVideoURL" styleclass="span10" value="{!TopicVideoURL}"/>
                    <!--<apex:commandButton   styleclass="btnAthena btn-primary mtop-10" action="{!ShowVideoPreview}" value="Test"  />-->
                    <button type="button" class="btnAthena btn-primary mtop-10" id="Button1"  onclick="EditopenNewWindow()">Test</button>
                    
                    <!--<iframe id="video1" width="520" height="360"  frameborder="0" ></iframe>--> 
                    
                    </span> </div>
                </div>
                <div class="span5 ml0 mtop10 clearB"  id="EditTopicVideo"  style="display:none"> <span> 
                  <!-- <apex:inputText id="txtVideoURL" styleclass="span10" value="{!LVideoURL}"/>
                                                              
                                                                <button type="button" class="btnAthena btn-primary mtop-10">Test</button>--> 
                  <span class="colorBlue">Video Preview</span><br />
                  <span>
                  <div class="span10">
                    <apex:image style="display:none" id="DefaultVideo" url="{!URLFOR($Resource.img_athena, 'img_athena/no_video.png')}" alt="no_video" styleClass="span12"/>
                    <iframe id="EditVideoURL" frameborder="0"   scrolling="no" ></iframe>
                  </div>
                  </span> <br />
                  <div class="clearB"><a>View instructions for uploading Brainshark videos</a></div>
                  <br />
                  <span>YouTube video must be in below format</span><br />
                  <span>http ://www.youtube.com/watch?v=TSNLsBiep31 </span> </span>
                  <p class="span12 BoardImgList ml0 clearB"> </p>
                </div>
                <div id="EditTopicImage" class="span5 ml0 mtop10 clearB" style="display:none">
                  <div class="control-group Editratio">
                    <label class="control-label">Choose image</label>
                    <div class="controls"> <span class="mr10">
                      <apex:selectRadio id="SelectByUpload" value="{!ImageSelectionTopic}"  onclick="ShowHideEditTopicImage(this)">
                        <apex:selectOptions value="{!ImageOptions}"/>
                      </apex:selectRadio>
                      </span> </div>
                  </div>
                  <div class="check ShowuploadImage clearB" style="display: none"  id="EditTopicUpload">
                    <p>This image appears at the top of each Content Recommended size is 320px * 215px</p>
                    <div class="controls">
                      <div data-provides="fileupload" class="fileupload fileupload-new">
                        <div style="width: 200px; height: 150px;" class="fileupload-new thumbnail">
                          <apex:image url="{!URLFOR($Resource.img_athena, 'img_athena/no_image.gif')}" alt="no_image" styleclass="viewDefNoImage" id="imageEditTopic"  style="width: auto; border: 0 none;"/>
                        </div>
                        <div style="max-width: 200px; max-height: 150px; line-height: 20px;" class="fileupload-preview fileupload-exists thumbnail"></div>
                        <div id="divSelectImg"> <span class="btnAthena btn-file"><span class="fileupload-new">Select image</span> <span class="fileupload-exists">Change</span>
                          <apex:inputFile styleclass="default" value="{!BoardTopicAttach.body}" filename="{!BoardTopicAttach.name}" contentType="{!BoardTopicAttach.contentType}"/>
                          </span> </div>
                      </div>
                      <span class="label label-important">NOTE!</span> <span>Attached image thumbnail is
                      supported in Latest Firefox, Chrome, Opera,
                      Safari and Internet Explorer 10 only </span> </div>
                  </div>
                  <div class="check ShowDefaultImage" style="display:none" id="EditDefaultTopic">
                    <div class="control-group">
                      <label class="control-label" style="display:none">Select Default Image </label>
                      <div class="controls">
                      <div style="display:none"> 
                        <apex:selectList multiselect="false" size="1" value="{!dropTopicDefaultSelected}" id="SelectList4" onchange="EditdefaultImgTopic(this, '{!getStaticImagePath}')" >
                          <apex:selectOptions value="{!DefaultTopicImage}" ></apex:selectOptions>
                        </apex:selectList>
                        </div>
                        <div class="viewDefaultImage thumbnail" >
                          <apex:image id="EditDefaultImg" url="{!URLFOR($Resource.img_athena, 'img_athena/BoardContent1.png')}" alt="no_image" styleclass="viewDefNoImage"/>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="clearB">
                  <hr />
                  <div class="mbot20"  id="EditCommonchkBox"  style="display:none">
                    <div class="controls mtop10"> <span class="mr10 publishCheckBG">
                      <apex:inputCheckbox value="{!TopicPublish}"  id="chkTopicPublish"/>
                      Publish </span> <span class="mr10">
                      <apex:inputCheckbox value="{!TopicClientFacing}"  id="chkTopicCF" />
                      Client Facing </span> <span class="mr10">
                      <apex:inputCheckbox value="{!TopicPracticeApprv}" id="chkTopicPA" />
                      Practice Approved </span> <span class="pull-right mtop30">
                      <input type="button" class="btnAthena" data-dismiss="modal" aria-hidden="true" value="Cancel" />
                      <input type="button" class="btnAthena btn-primary btnAthenaPopP"  value="Save"  id="Button3"  onclick="UpdateTopicTags(this)"/>
                      <apex:commandButton styleclass="btnAthena btn-primary btnAthenaPopP" style="display:none"    action="{!UpdateTopic}" value="Save" id="btnEditTopic"/>
                      </span> </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!--- End Edit Topic --> 
        <!--- Start Fileupload -->
        <!-- Commented By Komala <div id="UploadFile" class="modal hide fade" tabindex="-1" style="width:800px; left:43%;" role="dialog" aria-labelledby="myModalLabel1" aria-hidden="true" data-backdrop="static">
          <div class="modal-header">
            <h3>Upload Document</h3>
          </div>
          <div class="modal-body">
            <div id="uploadLearning" class="span12 ml0 mtop10" > <span>Upload a new document or replace an existing one. </span> <span>
              <apex:canvasApp canvasId="cappCreate" applicationName="SLP_File_Upload" width="90%" height="275px" scrolling="no" />
              </span> </div>
          </div>
          <div class="modal-footer">
            <input type='button' onclick="UploadViaApp('create')" Value="Upload File" style="padding-left:20px" class="btnAthena btn-primary"/>
            <apex:commandButton Styleclass="btnAthena btn-primary" action="{!CancelUploadClick}" value="Cancel" id="btnCancelUpload"/>
            <apex:inputHidden value="{!hdnPendingFileUploadTopicId}" id="hdnPendingFileUploadTopicId" />
          </div>
        </div> -->
        <!--- End Fileupload -->
        
        <input type='hidden' id= 'hdnTopicId' value=''/>
        <apex:inputHidden value="{!hdnLURL}" id="hdnLURL"/>
        <input type='hidden' id= 'hdnDocId' value=''/>
        <apex:inputHidden value="{!hdnTopicCatName}" id="hdnTopicCatName"/>
      </apex:form>
      <div id="modalPreviewRequired" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel1" aria-hidden="true" data-backdrop="static">
        <div class="modal-body" style="white-space: pre-line;">
          <div id="cappPDF">
            <apex:canvasApp canvasId="cappPDF" applicationName="SLP_File_Download" width="100%" scrolling="yes"/>
          </div>
          <div id="cappTXT">
            <apex:canvasApp canvasId="cappTXT" applicationName="SLP_File_Download" width="100%" scrolling="yes"/>
          </div>
          <div id="cappXLSX">
            <apex:canvasApp canvasId="cappXLSX" applicationName="SLP_File_Download" width="100%" scrolling="yes"/>
          </div>
          <div id="cappHTML">
            <apex:canvasApp canvasId="cappHTML" applicationName="SLP_File_Download" width="100%" scrolling="yes"/>
          </div>
          <div id="cappDOCX">
            <apex:canvasApp canvasId="cappDOCX" applicationName="SLP_File_Download" width="100%" scrolling="yes"/>
          </div>
          <div id="cappPPT">
            <apex:canvasApp canvasId="cappPPT" applicationName="SLP_File_Download" width="100%" scrolling="yes"/>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btnAthena" data-dismiss="modal" aria-hidden="true">Cancel</button>
        </div>
      </div>
      <div id="VideoPopUp" class="modal hide fade modalUploadView" tabindex="-1" role="dialog" aria-labelledby="myModalLabel1" aria-hidden="true" data-backdrop="static">
        <div class="modal-header">
          <h3 id="videoHeading"></h3>
        </div>
        <div class="modal-body">
          <iframe id="frameVideo" class='EBaddTopicLF' frameborder='0'   scrolling='no'></iframe>
        </div>
        <div class="modal-footer">
          <button class="btnAthena EbtnLess" data-dismiss="modal" aria-hidden="true">Cancel</button>
        </div>
      </div>
    </div>
    
    <!-- END PAGE --> 
  </div>
  <!-- END CONTAINER --> 
  
  <!-- BEGIN FOOTER -->
  <div id="footer">  Hewlett-Packard Development Company, L.P.     |     HP Restricted </div>
  <!-- END FOOTER --> 
  
  <!-- BEGIN JAVASCRIPTS --> 
  <!-- Load javascripts at bottom, this will reduce page load time
         -->
  <apex:includeScript value="{!URLFOR($Resource.assets_athena, 'assets_athena/bootstrap/js/bootstrap.js')}"/>
  <apex:includeScript value="{!URLFOR($Resource.assets_athena, 'assets_athena/jquery-ui/jQuery_UI_1_10_3.js')}"/>
  <apex:includeScript value="{!URLFOR($Resource.assets_athena, 'assets_athena/raty/ratyViewJs.js')}"/>
  <!-- page js files -->
  
  <apex:includeScript value="{!URLFOR($Resource.assets_athena, 'assets_athena/bootstrap/js/bootstrap-fileupload.js')}"/>
  <apex:includeScript value="{!URLFOR($Resource.js_athena, 'js_athena/typeahead.js')}"/>
  <!-- Add Tags  -->
  <apex:includeScript value="{!URLFOR($Resource.js_athena, 'js_athena/tag-it.js')}"/>
  
  <!-- ie8 fixes --> 
  <!--[if lt IE 9]>
   <apex:includeScript value="{!URLFOR($Resource.js_athena, 'js_athena/excanvas.js')}"/>
   <apex:includeScript value="{!URLFOR($Resource.js_athena, 'js_athena/respond.js')}"/>
   <![endif]--> 
  
  <!--common script for all pages-->
  <apex:includeScript value="{!URLFOR($Resource.js_athena, 'js_athena/common-scripts.js')}"/>
  
  <!-- canvas -->
  <apex:includeScript value="{!$Resource.athena_canvas_controller}"/>
  
  <!-- END JAVASCRIPTS --> 
  <script>
  
      $(document).ready(function () {
            
          //$('#loading_Modal').modal('show');
          $('input.typeahead-devs').typeahead({
              name: 'accounts',
              local: ['']
          });
           
          if ($('[id$=chkPublic]').attr('checked')) {
              $('#LBPMemberAccess').hide();
          }
          else{
              $('#LBPMemberAccess').show();
          }

            
             
          //chatter Display
          //$("#DivLearnings").append($("#BoardChatter"));
          //$("#BoardChatter").css('display', 'block');
          //$("#BoardChatter").show();

          //<!--Suman Friday Code Start -->

          $("#DivLearnings").append($("#dvAddCategory"));
          $("#dvAddCategory").css('display', 'block');
          $("#dvAddCategory").show();

          //<!--Suman Friday Code End -->

          $('#publishersharebutton').val('Post');
          LoadPrivateMemberAccess();

          $('#txtSearchUsers').on('keyup paste', function () {
                
              var FilterResultSet = new Array();
              var hdnSearchResultVal = $('[id$=hdnSearchResult]').val();
              var ResultSet = $.parseJSON(hdnSearchResultVal);
              var value = $(this).val().toUpperCase();

              if (value === '') {
                  if(ResultSet.length > 0)
                  {
                      $('#dvContributorsList').empty();
                      $.each(ResultSet, function (index, domElement) {

                          $('#dvContributorsList').append("<div id='trigger'><span><input type='radio' name='RelatedContributorSearch' value=" + domElement.Id + "  /></span><span class='m5' id=" + domElement.Id + ">" + domElement.Name + "</span> <div>");
                      });
                  }
                  return false;
              }

              $.each(ResultSet, function (index, domElement) {

                  var DomText = domElement.Name.toUpperCase();

                  if(DomText.indexOf(value) > -1 || DomText.indexOf(value) == 0)
                  {
                      FilterResultSet.push({"Id": domElement.Id, "Name": domElement.Name});
                  }
              });

              if(FilterResultSet.length > 0)
              {
                  $('#dvContributorsList').empty();
                    
                  $.each(FilterResultSet, function (index, domElement) {

                      $('#dvContributorsList').append("<div id='trigger'><span><input type='radio' name='RelatedContributorSearch' value=" + domElement.Id + "  /></span><span class='m5' id=" + domElement.Id + ">" + domElement.Name + "</span> <div>");
                  });
              }
          });

          $('#txtSearchOwner').on('keyup paste', function () {
                
              var FilterResultSet = new Array();
              var hdnSearchResultVal = $('[id$=txtOwnerSearchResult]').val();
              var ResultSet = $.parseJSON(hdnSearchResultVal);
              var value = $(this).val().toUpperCase();

              if (value === '') {
                  if(ResultSet.length > 0)
                  {
                      $('#divChangeOwnerResult').empty();
                      $.each(ResultSet, function (index, domElement) {

                          $('#divChangeOwnerResult').append("<div id='trigger' ><span><input type='radio' name='RelatedOwnerSearch' value=" + domElement.Id + "  /></span><span class='m5' id=" + domElement.Id + ">" + domElement.Name + "</span> <div>");
                      });
                  }
                  return false;
              }

              $.each(ResultSet, function (index, domElement) {

                  var DomText = domElement.Name.toUpperCase();

                  if(DomText.indexOf(value) > -1 || DomText.indexOf(value) == 0)
                  {
                      FilterResultSet.push({"Id": domElement.Id, "Name": domElement.Name});
                  }
              });

              if(FilterResultSet.length > 0)
              {
                  $('#divChangeOwnerResult').empty();
                    
                  $.each(FilterResultSet, function (index, domElement) {

                      $('#divChangeOwnerResult').append("<div id='trigger'><span><input type='radio' name='RelatedOwnerSearch' value=" + domElement.Id + "  /></span><span class='m5' id=" + domElement.Id + ">" + domElement.Name + "</span> <div>");
                  });
              }
          });
            

          /* Commented By Komala if ($('[id$=hdnPendingFileUploadTopicId]').val() != "") {
              $('#UploadFile').modal('show');
                
          } */
          
           // START By Komala
          
                if($('[id$=hdnPendingFileUploadTopicId]').val()!='')
                {
                  $('#uploadLearning').append($('#UploadFileComponent'));
                  $('#UploadFileComponent').show();
                          $('#dvUploadFile').modal('show');
                }

        // END By Komala
          if ($('[id$=errTopic]').val() != undefined && $('[id$=errTopic]').val() != "") {
              alert("File upload error: " + $('[id$=errTopic]').val());
              $('[id$=errTopic]').val("");
          }
            
          var IsRelatedOrder='{!IsRelatedBoardsOrder}';
          if(!IsRelatedOrder){
              $('#RelatedBoardsOrderId').show();
          }
          else
          { 
              $('#RelatedBoardsOrderId').hide();
          }
          
      });

    </script> 
  <script>

      function IsUploadImageExist(data)
      {
          if (!data.match(/(?:gif|jpg|jpeg|png|bmp)$/)) {
                
              document.getElementById('emptyImageUpLoad').innerHTML = "Please Upload Image";
              $('[id$=emptyImageUpLoad]').show();
              // document.getElementById('emptyImageUpLoad').style.display = 'block';
              
              return false;
               
          }
          else{
              return true;
          }
      }

      function VerifyIdolLinkTName(result,event) {debugger
         
          $('#DivDuplicateIdolTName').empty();
          if (result>0) {
            
              $('#DivDuplicateIdolTName').append('Duplicate Content Name');
              $('#DivDuplicateIdolTName').append('<br/>');
              //ValidateCreateIdolSearchTopic();
              $('[id$=DivDuplicateIdolTName]').show();
              
              $("html, body").animate({ scrollTop: $('#DivDuplicateIdolTName').offset().top }, 1000);
          }
          else
          {
              ValidateCreateIdolSearchTopic();
          }
       
      }


      function ValidateCreateIdolSearchTopic()
      {
            debugger
          $('#DivDuplicateIdolTName').empty();
          var topicTags = $('[id$=txtExternalSrchTags]').val();
          $('[id$=txtAssTags]').val(topicTags);

          var TName= $('[id$=SearchTopicNm]').val();
            
          var TDesc=$('[id$=SearchTopicDesc]').val();
               
          if (TName=='') {
              $('#DivDuplicateIdolTName').append('Enter Content Name');
              $('#DivDuplicateIdolTName').append('<br/>');
          }
          if (TDesc=='') {
              $('#DivDuplicateIdolTName').append('Enter Content Description');
              $('#DivDuplicateIdolTName').append('<br/>');
          }

          
          if ($($($($('[id$=IdolSearchRadio]')[0].children)[0].children)[0].children)[1].children[0].checked) {
              var TopicImage=  $('[id$=IdolSearchUploadImg]')[0].value; 
              if (!TopicImage.match(/(?:gif|jpg|jpeg|png|bmp)$/)) {
                  $('#DivDuplicateIdolTName').append('Upload Image');
                  $('#DivDuplicateIdolTName').append('<br/>');
                                 
              }
          }
          else if ($($($($('[id$=IdolSearchRadio]')[0].children)[0].children)[0].children)[0].children[0].checked) {
              if( ($('[id$=SelectDefaultIdolImage]').val()).toUpperCase()=='SELECTIMAGE')
              {
                  $('#DivDuplicateIdolTName').append('Select Default Image');
                  $('#DivDuplicateIdolTName').append('<br/>');
              }
          }

          if ($('#DivDuplicateIdolTName')[0].children.length > 0) {
              $("#DivDuplicateIdolTName").show();
              $('#DivDuplicateIdolTName').css('display', 'block');
               
              return false;
          }
          else {
              $("#DivDuplicateIdolTName").hide();
              $('[id$=btnIdolSave]').click();
              return true;
          }


      }

        
      function funcIdolCreateTopic()
      {debugger

            

          var TName=document.getElementById('{!$Component.EditTopic.SearchTopicNm}').value;
          //var TName = $('#txtTopic').attr('data-TName');
          Visualforce.remoting.Manager.invokeAction(
                   '{!$RemoteAction.EXO_AthenaEditLearningBoardDtls.VerifyDuplicateTopicName}',
                   TName,
                   VerifyIdolLinkTName
               );

      }

      function funcCreateTopicUploadDoc(event)
      {
          $('#emptyImageUpLoad').empty();
          var flag = 1;

          $('#showDuplicateTName').hide();
            
          // $('#emptyImageUpLoad').empty();
            
          var TName= $('[id$=txtTopic]').val();
            
           
          var topicTags = $('[id$=txtTopicTags]').val();
          $('[id$=txtAddTopicTags]').val(topicTags);
          var TDesc=$('[id$=txtTopicArea]').val();
               
          if (TName=='') {
              $('#emptyImageUpLoad').append('Enter Content Name');
              $('#emptyImageUpLoad').append('<br/>');
              flag = 0;
          }
          if (TDesc=='') {
              $('#emptyImageUpLoad').append('Enter Content Description');
              $('#emptyImageUpLoad').append('<br/>');
              flag = 0;
          }

          if ($('[id$=LearningTopic]').val() !='Video' ) {
              if ($($($($('[id$=UpLoadDefault]')[0].children)[0].children)[0].children)[1].children[0].checked) {
                  var TopicImage=  $('[id$=UpLoadTextImage]')[0].value; 
                  if (!TopicImage.match(/(?:gif|jpg|jpeg|png|bmp)$/)) {
                      $('#emptyImageUpLoad').append('Upload Image');
                      $('#emptyImageUpLoad').append('<br/>');
                      flag = 0;        
                  }
              }
              else if ($($($($('[id$=UpLoadDefault]')[0].children)[0].children)[0].children)[0].children[0].checked) {
                  if( ($('[id$=LstSelectDefaultImg]').val()).toUpperCase()=='SELECTIMAGE')
                  {
                      $('#emptyImageUpLoad').append('Select Default Image');
                      $('#emptyImageUpLoad').append('<br/>');
                      flag = 0;
                  }
              }

          }
          else if ($('[id$=LearningTopic]').val() =='Video' ) {
              if($('[id$=InputTextURL]').val() == '')
              {
                  $('#emptyImageUpLoad').append('Enter URL');
                  $('#emptyImageUpLoad').append('<br/>');
                  flag = 0;
              }
    
          }
          //funcVerifyDuplicateTopic();
          if ($('#emptyImageUpLoad')[0].children.length > 0)
          {
              $("#emptyImageUpLoad").show();
              $('#emptyImageUpLoad').css('display', 'block');
              $("html, body").animate({ scrollTop: $('#myTabContent').offset().top }, 1000);
              // event.preventDefault();
              return false;
          }
          else
          {
              $('[id$=NextCreateTopic]').click();
              return true;
          }
      }

         
      function funcCreateTopic(event)
      {
            
          $('#emptyImageUpLoad').empty();
          $('#showDuplicateTName').hide();
            
          // $('#emptyImageUpLoad').empty();
            
          var TName= $('[id$=txtTopic]').val();
            
           
          var topicTags = $('[id$=txtTopicTags]').val();
          $('[id$=txtAddTopicTags]').val(topicTags);
          var TDesc=$('[id$=txtTopicArea]').val();
               
          if (TName=='') {
              $('#emptyImageUpLoad').append('Enter Content Name');
              $('#emptyImageUpLoad').append('<br/>');
          }
          if (TDesc=='') {
              $('#emptyImageUpLoad').append('Enter Content Description');
              $('#emptyImageUpLoad').append('<br/>');
          }
            
          if ($('[id$=LearningTopic]').val() =='LinkORDoc' ) 
          {
              var textURL = $('[id$=InputTextURL]').val();
              if(textURL == '')
              {
                  $('#emptyImageUpLoad').append('URL field should not be empty');
                  $('#emptyImageUpLoad').append('<br/>');
                 
              }
          }
            

          if ($('[id$=LearningTopic]').val() !='Video' ) {
              if ($($($($('[id$=UpLoadDefault]')[0].children)[0].children)[0].children)[1].children[0].checked) {
                  var TopicImage=  $('[id$=UpLoadTextImage]')[0].value; 
                  if (!TopicImage.match(/(?:gif|jpg|jpeg|png|bmp)$/)) {
                      $('#emptyImageUpLoad').append('Upload Image');
                      $('#emptyImageUpLoad').append('<br/>');
                                 
                  }
              }
              else if ($($($($('[id$=UpLoadDefault]')[0].children)[0].children)[0].children)[0].children[0].checked) {
                  if( ($('[id$=LstSelectDefaultImg]').val()).toUpperCase()=='SELECTIMAGE')
                  {
                      $('#emptyImageUpLoad').append('Select Default Image');
                      $('#emptyImageUpLoad').append('<br/>');
                  }
              }

          }
          else if ($('[id$=LearningTopic]').val() =='Video' ) {
              if($('[id$=InputTextURL]').val() == '')
              {
                  $('#emptyImageUpLoad').append('Enter URL');
                  $('#emptyImageUpLoad').append('<br/>');
              }
    
          }
          //funcVerifyDuplicateTopic();
          if ($('#emptyImageUpLoad')[0].children.length > 0) {
              $("#emptyImageUpLoad").show();
              $('#emptyImageUpLoad').css('display', 'block');
              $("html, body").animate({ scrollTop: $('#myTabContent').offset().top }, 1000);
              // event.preventDefault();
              return false;
          }
          else {
              $('[id$=SaveTopic]').click();
              return true;
          }
      }

      function funcDeleteTopic(data) {
            
          $('#DeleteTopics').modal('show');
          var topicId = $(data).attr('data-topicId');
          $('[id$=txtTId]').val(topicId);

          var CatName = $(data).attr('data-ctgryname');
          $('[id$=hdnTopicCatName]').val(CatName);
      }



      // Utility; parse out parameter by name from URL query string
      $.urlParam = function (name) {
            
          var resultData = '';
          var results = new RegExp('[\\?&]' + name + '=([^&#]*)')
              .exec(window.location.href);
          if (results == null) {
              resultData = '';
          }
          else {
              resultData = results[1] || 0;
          }
          return resultData;
      }

      function LoadTopics() {
          var LearningBoardId = $.urlParam('id');
            
          Visualforce.remoting.Manager.invokeAction(
              '{!$RemoteAction.EXO_AthenaEditLearningBoardDtls.getLrngWithCat}',
              LearningBoardId,
              DisplayTopics
          );
      }

      function ShowHideCategory(data) {
            
          if ($(data).parent().find(".icon-plus-sign-alt").hasClass("icon-plus-sign-alt")) {
              $(data).parent().find(".icon-plus-sign-alt").removeClass("icon-plus-sign-alt").addClass("icon-check-minus");
          }
          else {
              $(data).parent().find(".icon-check-minus").removeClass("icon-check-minus").addClass("icon-plus-sign-alt");
          }

      }
        
      function ShowHideSearchTopicImage(data) {
            
          if ($(data).val() == 'UFC') {
              $('#UploadSearchUrl').show();
              $('#DefaultSearchUrl').hide();
          }
          else {
              $('#DefaultSearchUrl').show();
              $('#UploadSearchUrl').hide();
          }

      }

      function DisplayTopics(result, event) {debugger
            
          var lstTopicIds=new Array();
          for (var icount = 0; icount < result.length; icount++) {

              var CategoryName = result[icount].CategoryName;
              var CategoryId = result[icount].CategoryId;
              var CategoryType = result[icount].CategoryType;
              //var spacehref = result[icount].CategoryName.replace(/ /g, "_");
              var spacehref = result[icount].CategoryName.replace(/([~!@#$%^&*()_+=`{}\[\]\|\\:;'<>,.\/? ])+/g, '_').replace(/^(-)+|(-)+$/g,'');
              var hrefurl = '#' + spacehref;
              var generateLearning = ("<div class='panel panel-default'> <div class='panel-heading'>" +
              "<h4 class='panel-title'><a   onclick='ShowHideCategory(this)'  class='accordion-toggle a_underNone' data-toggle='collapse' data-parent='#accordion' href='" + hrefurl + "'> <span class='icon-plus-sign-alt'></span> " + result[icount].CategoryName + " </a>");

              //<!--Suman Friday Code Start -->

              if (CategoryName != '' && (CategoryType=='Custom')) {
                  var CategoryEdit = ("<a class='icon-remove pull-right a_underNone editTopic_a colorRed'   data-CtgryId=" + CategoryId + "  data-CategoryName='" + CategoryName + "'  onclick='DeleteCommunityCtgry(this)' ></a>" +
                    "<a class='icon-pencil pull-right a_underNone editTopic_a e_IconColor'  data-CtgryId=" + CategoryId + "  data-CategoryName='" + CategoryName + "'  onclick='ValidateEditCategory(this)'  ></a></h4></div>");
                  generateLearning += CategoryEdit;
              }
              else
              {
                  generateLearning += "</h4></div>";
              }

              //<!--Suman Friday Code End -->

              $('#DivLearnings').append(generateLearning);
              var generateL = ("<div id='" + spacehref + "' class='panel-collapse collapse'><div>");
                
              if(result[icount].lstlrngs.length>1)
              {
                  var OrderDisplay=("  <a class='icon-sort-by-order btnAthena btn-primary pull-right'  data-customCtgry="+ CategoryType +"  data-ctgryname = "+ spacehref +" data_sortctgryNm='"+ CategoryName +"'    data-sortctgry=" + CategoryId + "   onclick='ShowChangeOrder(this)'></a> ");
                  generateL+=OrderDisplay;
              }
              var aAddContent=("<a class='btnAthena btn-primary pull-right' data-toggle='modal' data_ctgryType='"+ CategoryType +"' data_ctgryNm='"+ CategoryName +"' data-ctgryName= "+ spacehref +"  data-ctgry=" + CategoryId + "  onclick='ShowTopicDtls(this)' ><span class='icon-plus'></span> Add Content</a></div><div></div>" );
              generateL+= aAddContent;                      
              var GenerateUrl = '';
              var generateLText = '';
              var IntegrateContent = '';
              var generateVideo = '';
              var LinkRelatedPDF = '';
              //var clientFacing = '';
              var NextDviToComplete = '';
              IntegrateContent = generateL;


              for (var icnt = 0; icnt < result[icount].lstlrngs.length; icnt++) {debugger
                    
                  var tID = 'ratingFeatured_' + result[icount].lstlrngs[icnt].Lid;
                  var AverageRating = result[icount].lstlrngs[icnt].AvgRating;
                  var RatersCount = result[icount].lstlrngs[icnt].RatersCount;

                  lstTopicIds.push({"Id": tID, "Rating": AverageRating, "RateCount": RatersCount});

                  //var spacehrefLearning = result[icount].lstlrngs[icnt].LName.replace(/ /g, "_");
                  var spacehrefLearning = $.trim(result[icount].lstlrngs[icnt].LName).replace(/([~!@#$%^&*()_+=`{}\[\]\|\\:;'<>,.\/? ])+/g, '-').replace(/^(-)+|(-)+$/g, '');
                  var hrefurlLearning = '#' + spacehrefLearning;
                    
                  //var splitLst='';
                  var DefaultTags="No Tags Associated";
                  var sliptTagsData='';
                  if (result[icount].lstlrngs[icnt].LType == 'Text') {
                        
                      GenerateUrl = (
                             "<div class='panel-body topicEdit clearB'> <div><a class='icon-remove pull-right a_underNone editTopic_a colorRed'   data-topicId=" + result[icount].lstlrngs[icnt].Lid + "  data-topicName='" + result[icount].lstlrngs[icnt].LName + "'  data-ctgryname='" + spacehref + "'  onclick='funcDeleteTopic(this)' ></a>" );

                      if ((result[icount].lstlrngs[icnt].BtnshowHideEdit) ||({!IsModerator})) {
                          var GenerateUTopicEdit= ( "<a class='icon-pencil pull-right a_underNone editTopic_a e_IconColor' id='" + result[icount].lstlrngs[icnt].Lid + "'  data-DefImg='" + result[icount].lstlrngs[icnt].StaticImage + "' data-topicId='" + result[icount].lstlrngs[icnt].Lid + "'  data-PractApprv='" + result[icount].lstlrngs[icnt].PracticeApprv + "'  data-ClientFacing='" + result[icount].lstlrngs[icnt].ClientFacing + "'  data-publish='" + result[icount].lstlrngs[icnt].IsActive + "'  data-TopicDesc=" + escape(result[icount].lstlrngs[icnt].LDescription) + " data-TopicName='" + result[icount].lstlrngs[icnt].LName + "'  data-LType='" + result[icount].lstlrngs[icnt].LType + "' data-ctgryname=" + spacehref + "  data-ctgry=" + CategoryId + "  data-TopicTags='"+result[icount].lstlrngs[icnt].AssociatedTopicTags+"'  data-Tags="+result[icount].lstlrngs[icnt].Tags+"  data-LURL="+escape(result[icount].lstlrngs[icnt].LURL)+" data-Image = "+ result[icount].lstlrngs[icnt].DefaultImageName +"  onclick='EditTopic(this)'  ></a> " );
                          GenerateUrl+=GenerateUTopicEdit;
                      }
                        
                      var GenerateU = ("</div>" +
                                      "<div class='span12 borderB' >" +
                                      "<div class='span4'>" +
                                      "<div class='m10 ml0'> <a class='' data-toggle='modal' href= " + hrefurlLearning + "> <img src=" + result[icount].lstlrngs[icnt].DefaultImageName + " class='EBaddTopicL'  /></a> " +
                                      "</div>" +
                                      "</div>" +
                                      "<div class='span8'>" +
                                      "<div class='m10 pr20'>");

                      if (result[icount].lstlrngs[icnt].PreviewRequired == 'YES')
                      {
                          var DisplayFormat = ("<a class='' data-toggle='modal' href='#' data-URL= " + escape(result[icount].lstlrngs[icnt].LURL) + " onclick='ShowTXT(" + "\"" + hrefurlLearning + "\"" + ")'><h4>" + result[icount].lstlrngs[icnt].LName + " </h4></a>" +
                                               "<p style='white-space: pre-line;'> " + result[icount].lstlrngs[icnt].LShortDescription + "  </p>" );

                          GenerateU += DisplayFormat;
                      }
                      else
                      {
                          var DisplayFormat = ("<a class='' data-toggle='modal' href='" + hrefurlLearning + "'><h4>" + result[icount].lstlrngs[icnt].LName + " </h4></a>" +
                                               "<p style='white-space: pre-line;'> " + result[icount].lstlrngs[icnt].LShortDescription + "  </p>" );

                          GenerateU += DisplayFormat;
                      }

                      GenerateUrl += GenerateU;

                      if (result[icount].lstlrngs[icnt].StrDescLength > 0) {
                          var IsReadMore=  ("<a class='' data-toggle='modal' href=" + hrefurlLearning + "> Read more </a>" );
                          GenerateUrl+=IsReadMore;
                      }
                  
                      var rating=("<div  id='ratingFeatured_" + result[icount].lstlrngs[icnt].Lid + "'></div>");
                      GenerateUrl+=rating;

                      if (result[icount].lstlrngs[icnt].Tags==DefaultTags) {
                          var TempTags= ("<div class='tagBack'><ul class='tags'><li class='tag'>" + result[icount].lstlrngs[icnt].Tags + " </li></ul></div>");
                          sliptTagsData+=TempTags;
                      }
                      else {

                            
                          if (result[icount].lstlrngs[icnt].Tags.length>0) {
                                
                              var spltTags=result[icount].lstlrngs[icnt].Tags;
                              var splitBr="<div class='tagBack'><ul class='tags'>";
                              sliptTagsData+=splitBr;
                              for (var icntTag = 0; icntTag < spltTags.length; icntTag++) {
                                  var TempTags= ("<li class='tag'>" + spltTags[icntTag] + " </li>");
                                  sliptTagsData+=TempTags;
                              }
                              var AfterSplit= "</ul></div>";
                              sliptTagsData+=AfterSplit;
                          }
                      }
                      GenerateUrl+=sliptTagsData;
                        
                        
                      var AfterTags=("<div id='" + spacehrefLearning + "' class='modal hide fade PositionF' tabindex='-1' role='dialog' aria-labelledby='myModalLabel1' aria-hidden='true' data-backdrop='static'>" +
    "<div class='modal-header'>" +
    " <h3>Content Description</h3>" +
    "</div>" +
    "<div class='modal-body readmoreHpop'>" +
    " <p style='white-space: pre-line;'> " +

      "" + result[icount].lstlrngs[icnt].LDescription + "" +
    "</p>" +
    "</div>" +
    "<div class='modal-footer'>" +
    " <button class='btnAthena' data-dismiss='modal' aria-hidden='true'>Cancel</button>" +

    "</div>" +
    "</div>" +
      
                       
         "<div><img src="+result[icount].lstlrngs[icnt].OwnerPhoto+"  height='35' width='35' class='Br20' /> <a id='aTopicName' class='hpit_athena_ca_itemLink' href='/apex/AthenaUserProfile?id="+result[icount].lstlrngs[icnt].TopicOwnerId+"'> "+ result[icount].lstlrngs[icnt].LOwnerName+" </a> </div>"+

                              "<div class='clearfix pr10'>" );
                      GenerateUrl+=  AfterTags;
                      IntegrateContent += GenerateUrl;

                      //var rating=("<div class='ratingDispalyL' id='ratingFeatured_" + result[icount].lstlrngs[icnt].Lid + "'></div>");
                      //GenerateUrl+=rating;


                      if (result[icount].lstlrngs[icnt].ClientFacing) {
                            
                          var clientFacing = (" <span class='detailDoc'><img src=" + result[icount].lstlrngs[icnt].hpsharedIcon + " class='pull-right mrl' title='Client Facing' /></span>");
                          IntegrateContent += clientFacing;
                      }

                        
                      if (result[icount].lstlrngs[icnt].PracticeApprv) {
                          var HPCrt= ("<span class='detailDoc'><img src=" + result[icount].lstlrngs[icnt].HPCertification + " class='pull-right mrl'  title='Practice Approved' /></span>");
                          IntegrateContent += HPCrt;
                      }

                      if (result[icount].lstlrngs[icnt].IsActive) {
                          var HPPublish= ("<span class='detailDoc'><img src=" + result[icount].lstlrngs[icnt].HPPublish + " class='pull-right mrl' title='Publish'  /></span>");
                          IntegrateContent += HPPublish;
                      }

                      NextDviToComplete = ("</div>" +
                                        "</div>" +
                                      "</div>" +
                                    "</div>" +
                                    "</div>");
                      IntegrateContent += NextDviToComplete;
                        

                  }
                  else if ((result[icount].lstlrngs[icnt].LType == 'Link or Document')  || (result[icount].lstlrngs[icnt].LType =='Upload Document')) {
                                                
                      var LinkTopicID = result[icount].lstlrngs[icnt].Lid;

                      GenerateUrl = (
                        "<div class='panel-body topicEdit clearB'><div><a class='icon-remove pull-right a_underNone editTopic_a colorRed'   data-topicId=" + result[icount].lstlrngs[icnt].Lid + "  data-topicName='" + result[icount].lstlrngs[icnt].LName + "' data-ctgryname='" + spacehref + "' onclick='funcDeleteTopic(this)' ></a> " );
                        
                      if ((result[icount].lstlrngs[icnt].BtnshowHideEdit) ||({!IsModerator})) {
                          var GenerateTopicEditShow= ("<a class='icon-pencil pull-right a_underNone editTopic_a e_IconColor' id='" + result[icount].lstlrngs[icnt].Lid + "'  data-DefImg='" + result[icount].lstlrngs[icnt].StaticImage + "'  data-topicId='" + result[icount].lstlrngs[icnt].Lid + "'  data-PractApprv='" + result[icount].lstlrngs[icnt].PracticeApprv + "'  data-ClientFacing='" + result[icount].lstlrngs[icnt].ClientFacing + "'  data-publish='" + result[icount].lstlrngs[icnt].IsActive + "' data-ctgryname=" + spacehref + "  data-TopicDesc=" + escape(result[icount].lstlrngs[icnt].LDescription) + " data-TopicName='" + result[icount].lstlrngs[icnt].LName + "'  data-ctgry=" + CategoryId + "  data-LType='" + result[icount].lstlrngs[icnt].LType + "'   data-TopicTags='"+result[icount].lstlrngs[icnt].AssociatedTopicTags+"'  data-Tags="+result[icount].lstlrngs[icnt].Tags+"  data-LURL="+escape(result[icount].lstlrngs[icnt].LURL)+" data-Image = "+ result[icount].lstlrngs[icnt].DefaultImageName +"  onclick='EditTopic(this)' ></a>" );
                          GenerateUrl+=GenerateTopicEditShow;
                      }

                      var GenerateU = ("</div>" +
                                       "<div class='span12 borderB' >" +
                                       "<div class='span4'>" );

                      var IsURLExist = result[icount].lstlrngs[icnt].LURL;

                      if(IsURLExist != undefined)
                      {
                          if (result[icount].lstlrngs[icnt].PreviewRequired == 'YES')
                          {
                              var imageHTML = ("<div class='m10 ml0'><a id = linkDoc_" + LinkTopicID + " Data-DocType = "+ result[icount].lstlrngs[icnt].DocType +" data-ID = " + LinkTopicID + " Data-Url = " + escape(result[icount].lstlrngs[icnt].LURL) + " onclick = 'OpenAssociatedModalPopUp(this)'> <img src=" + result[icount].lstlrngs[icnt].DefaultImageName + " class='EBaddTopicL' /></a></div>" +
                                           "</div>" +
                                           "<div class='span8'>" +
                                           "<div class='m10 pr20'>" +
                                           "<a id = linkDoc_" + LinkTopicID + " data-ID = " + LinkTopicID + " Data-DocType = "+ result[icount].lstlrngs[icnt].DocType +" Data-Url = " + escape(result[icount].lstlrngs[icnt].LURL) + " onclick = 'OpenAssociatedModalPopUp(this)'><h4>" + result[icount].lstlrngs[icnt].LName + " </h4></a>" +
                                           "<p style='white-space: pre-line;'> " + result[icount].lstlrngs[icnt].LShortDescription + "  </p>" );
                            
                              GenerateU += imageHTML;
                          }
                          else
                          {
                              var imageHTML = ("<div class='m10 ml0'><a id = linkDoc_" + LinkTopicID + " target='_blank' data-ID = " + LinkTopicID + " Data-Url = " + escape(result[icount].lstlrngs[icnt].LURL) + " onclick = 'NavigateUrl(this)'> <img src=" + result[icount].lstlrngs[icnt].DefaultImageName + " class='EBaddTopicL' /></a></div>" +
                                           "</div>" +
                                           "<div class='span8'>" +
                                           "<div class='m10 pr20'>" +
                                           "<a id = linkDoc_" + LinkTopicID + " data-ID = " + LinkTopicID + " target='_blank' Data-Url = " + escape(result[icount].lstlrngs[icnt].LURL) + " onclick = 'NavigateUrl(this)'><h4>" + result[icount].lstlrngs[icnt].LName + " </h4></a>" +
                                           "<p style='white-space: pre-line;'> " + result[icount].lstlrngs[icnt].LShortDescription + "  </p>" );
                            
                              GenerateU += imageHTML;
                          }
                            
                      }
                      else
                      {
                          var imageHTML = ("<div class='m10 ml0'> <img src=" + result[icount].lstlrngs[icnt].DefaultImageName + " class='EBaddTopicL' />  </div>" +
                                           "</div>" +
                                           "<div class='span8'>" +
                                           "<div class='m10 pr20'>" +
                                           "<h4>" + result[icount].lstlrngs[icnt].LName + " </h4>" +
                                           "<p style='white-space: pre-line;'> " + result[icount].lstlrngs[icnt].LShortDescription + "  </p>" );
                            
                          GenerateU += imageHTML;
                      }
                      //"<div class='m10 ml0'> <img src=" + result[icount].lstlrngs[icnt].DefaultImageName + " class='EBaddTopicL' />  </div>" +
                      //"</div>" +
                      //"<div class='span8'>" +
                      //"<div class='m10 pr20'>" +
                      //"<h4>" + result[icount].lstlrngs[icnt].LName + " </h4>" +
                      //"<p style='white-space: pre-line;'> " + result[icount].lstlrngs[icnt].LShortDescription + "  </p>" );
                        
                      GenerateUrl += GenerateU;

                      if (result[icount].lstlrngs[icnt].StrDescLength > 0) {
                          var IsReadMore=  ("<a class='' data-toggle='modal' href=" + hrefurlLearning + "> Read more </a>" );
                          GenerateUrl+=IsReadMore;
                      }

                      var rating=("<div  id='ratingFeatured_" + result[icount].lstlrngs[icnt].Lid + "'></div>");
                      GenerateUrl+=rating;

                      if (result[icount].lstlrngs[icnt].Tags==DefaultTags) {
                          var TempTags= ("<div class='tagBack'><ul class='tags'><li class='tag'>" + result[icount].lstlrngs[icnt].Tags + " </li></ul></div>");
                          sliptTagsData+=TempTags;
                      }
                      else {

                          if (result[icount].lstlrngs[icnt].Tags.length>0) {
                               
                              var spltTags=result[icount].lstlrngs[icnt].Tags;
                              var splitBr="<div class='tagBack'><ul class='tags'>";
                              sliptTagsData+=splitBr;
                              for (var icntTag = 0; icntTag < spltTags.length; icntTag++) {
                                  var TempTags= ("<li class='tag'>" + spltTags[icntTag] + " </li>");
                                  sliptTagsData+=TempTags;
                              }
                              var AfterSplit= "</ul></div>";
                              sliptTagsData+=AfterSplit;
                          }
                      }
                      GenerateUrl+=sliptTagsData;


                      var AfterTags=("<div id='" + spacehrefLearning + "' class='modal hide fade PositionF' tabindex='-1' role='dialog' aria-labelledby='myModalLabel1' aria-hidden='true' data-backdrop='static'>" +
                                            "<div class='modal-header'>" +
                                             " <h3>Content Description</h3>" +
                                            "</div>" +
                                            "<div class='modal-body readmoreHpop'>" +
                                             " <p style='white-space: pre-line;'> " +
                                                    "" + result[icount].lstlrngs[icnt].LDescription + "" +
                                              "</p>" +
                                            "</div>" +
                                            "<div class='modal-footer'>" +
                                             " <button class='btnAthena' data-dismiss='modal' aria-hidden='true'>Cancel</button>" +

                                            "</div>" +
                                          "</div>" +

         "<div><img src="+result[icount].lstlrngs[icnt].OwnerPhoto+"  height='35' width='35' class='Br20' /> <a id='aTopicName' class='hpit_athena_ca_itemLink' href='/apex/AthenaUserProfile?id="+result[icount].lstlrngs[icnt].TopicOwnerId+"'> "+ result[icount].lstlrngs[icnt].LOwnerName+" </a></div>"+

                                         "<div class='clearfix pr10'>");
                      GenerateUrl+=AfterTags;
                      IntegrateContent += GenerateUrl;
                        
                      if (result[icount].lstlrngs[icnt].ClientFacing) {
                          var clientFacing = (" <span class='detailDoc'><img src=" + result[icount].lstlrngs[icnt].hpsharedIcon + " class='pull-right mrl'  title='Client Facing' /></span>");
                          IntegrateContent += clientFacing;
                      }
                            
                      if (result[icount].lstlrngs[icnt].PracticeApprv) {
                          var HPCrt= ("<span class='detailDoc'><img src=" + result[icount].lstlrngs[icnt].HPCertification + " class='pull-right mrl'  title='Practice Approved' /></span>");
                          IntegrateContent += HPCrt;
                      }

                      if (result[icount].lstlrngs[icnt].IsActive) {
                          var HPPublish= ("<span class='detailDoc'><img src=" + result[icount].lstlrngs[icnt].HPPublish + " class='pull-right mrl'  title='Publish' /></span>");
                          IntegrateContent += HPPublish;
                      }


                      if (result[icount].lstlrngs[icnt].DocType == 'PDF') {
                            
                          var ShareTopicID = result[icount].lstlrngs[icnt].Lid;
                          LinkRelatedPDF = ( "<span class='detailDoc'> ");

                          if (result[icount].lstlrngs[icnt].PreviewRequired == 'YES')
                          {
                              var pdfHTML = ("<a id= anchor_" + ShareTopicID + " data-ID = " + ShareTopicID + " data-URL= " + escape(result[icount].lstlrngs[icnt].LURL) + " onclick='ShowPDF(" + "\"" + result[icount].lstlrngs[icnt].LURL + "\"" + ")'> <img class='mrl' width='25' height='25' src=" + result[icount].lstlrngs[icnt].filePDFUpload + " /> </a></span>  ");
                              LinkRelatedPDF += pdfHTML;
                          }
                          else
                          {
                              var pdfHTML = ("<a id= anchor_" + ShareTopicID + " target='_blank' data-ID = " + ShareTopicID + " data-URL= " + escape(result[icount].lstlrngs[icnt].LURL) + " onclick='functionTargetUrl(this)'> <img class='mrl' width='25' height='25' src=" + result[icount].lstlrngs[icnt].filePDFUpload + " /> </a></span>  ");
                              LinkRelatedPDF += pdfHTML;
                          }

                          IntegrateContent += LinkRelatedPDF;
                            
                      }

                      else if (result[icount].lstlrngs[icnt].DocType == 'PPT') {
                          var ShareTopicID = result[icount].lstlrngs[icnt].Lid;
                          LinkRelatedPDF = ( "<span class='detailDoc'> " +
                          "<a id= anchor_" + ShareTopicID + " target='_blank' data-ID = " + ShareTopicID + " data-URL= " + escape(result[icount].lstlrngs[icnt].LURL) + " onclick='functionTargetUrl(this)'> <img class='mrl' width='25' height='25' src=" + result[icount].lstlrngs[icnt].filePPTUpload + " /> </a> " +
                          "</span> ");
                          IntegrateContent += LinkRelatedPDF;
                       
                      }

                      else if (result[icount].lstlrngs[icnt].DocType == 'DOC') {
                          var ShareTopicID = result[icount].lstlrngs[icnt].Lid;

                          LinkRelatedPDF = ("<span class='detailDoc'> " +
                          "<a id= anchor_" + ShareTopicID + " target='_blank' data-ID = " + ShareTopicID + " data-URL= " + escape(result[icount].lstlrngs[icnt].LURL) + " onclick='functionTargetUrl(this)'> <img class='mrl' width='25' height='25' src=" + result[icount].lstlrngs[icnt].fileWordUpload + " /> </a> " +
                          "</span> ");

                          IntegrateContent += LinkRelatedPDF;
                       
                      }
                      else if (result[icount].lstlrngs[icnt].DocType == 'XLS') {
                          var ShareTopicID = result[icount].lstlrngs[icnt].Lid;

                          LinkRelatedPDF = ("<span class='detailDoc'> " +
                          "<a id= anchor_" + ShareTopicID + " target='_blank' data-ID = " + ShareTopicID + " data-URL= " + escape(result[icount].lstlrngs[icnt].LURL) + " onclick='functionTargetUrl(this)'> <img class='mrl' width='25' height='25' src=" + result[icount].lstlrngs[icnt].fileExcelUpload + " /> </a> " +
                          "</span> ");

                          IntegrateContent += LinkRelatedPDF;
                          
                      }
                      else if (result[icount].lstlrngs[icnt].DocType == 'TXT') {
                            
                          var ShareTopicID = result[icount].lstlrngs[icnt].Lid;
                          LinkRelatedPDF = ("<span class='detailDoc'> " );

                          if (result[icount].lstlrngs[icnt].PreviewRequired == 'YES')
                          {
                              var DisplayHTML = ("<a id= anchor_" + ShareTopicID + " data-ID = " + ShareTopicID + " data-URL= " + escape(result[icount].lstlrngs[icnt].LURL) + " onclick='ShowTXT(" + "\"" + result[icount].lstlrngs[icnt].LURL + "\"" + ")'> <img class='mrl' width='25' height='25' src=" + result[icount].lstlrngs[icnt].fileTextUpload + " /> </a> " +
                                                 "</span> ");
                              LinkRelatedPDF += DisplayHTML;
                          }
                          else
                          {
                              var DisplayHTML = ("<a id= anchor_" + ShareTopicID + " target='_blank' data-ID = " + ShareTopicID + " data-URL= " + escape(result[icount].lstlrngs[icnt].LURL) + " onclick='functionTargetUrl(this)'> <img class='mrl' width='25' height='25' src=" + result[icount].lstlrngs[icnt].fileTextUpload + " /> </a> " +
                                                 "</span> ");

                              LinkRelatedPDF += DisplayHTML;
                          }

                          IntegrateContent += LinkRelatedPDF;
                          
                      }
                        
                      else if (result[icount].lstlrngs[icnt].DocType == 'OTHER') {
                          var ShareTopicID = result[icount].lstlrngs[icnt].Lid;

                          LinkRelatedPDF = ("<span class='detailDoc'> ");

                          if (result[icount].lstlrngs[icnt].PreviewRequired == 'YES')
                          {
                              var displayHTML = ("<a id= anchor_" + ShareTopicID + " target='_blank' data-ID = " + ShareTopicID + " data-URL= " + escape(result[icount].lstlrngs[icnt].LURL) + " onclick='ShowHTML(" + "\"" + result[icount].lstlrngs[icnt].LURL + "\"" + ")'> <img class='mrl' width='25' height='25' src=" + result[icount].lstlrngs[icnt].fileURLUpload + " /> </a></span>");
                              LinkRelatedPDF += displayHTML;
                          }
                          else
                          {
                              var displayHTML = ("<a id= anchor_" + ShareTopicID + " target='_blank' data-ID = " + ShareTopicID + " data-URL= " + escape(result[icount].lstlrngs[icnt].LURL) + " onclick='functionWebTargetUrl(this)'> <img class='mrl' width='25' height='25' src=" + result[icount].lstlrngs[icnt].fileURLUpload + " /> </a></span>");
                              LinkRelatedPDF += displayHTML;
                          }

                          IntegrateContent += LinkRelatedPDF;
                       
                      }
                      NextDviToComplete = ("</div>" +
                                                                    "</div>" +
                                                                  "</div>" +
                                                                "</div>" +
                                                                "</div>");
                      IntegrateContent += NextDviToComplete;
                  }
                       
                  else if (result[icount].lstlrngs[icnt].LType == 'Video') {
                      var someText = "<a>" + result[icount].lstlrngs[icnt].LName + "</a>";
                      generateLText = ("<div class='panel-body topicEdit clearB'><div><a class='icon-remove pull-right a_underNone editTopic_a colorRed'  data-topicId=" + result[icount].lstlrngs[icnt].Lid + "  data-topicName='" + result[icount].lstlrngs[icnt].LName + "'  data-ctgryname='" + spacehref + "'  onclick='funcDeleteTopic(this)' ></a>" );
                      if ((result[icount].lstlrngs[icnt].BtnshowHideEdit) ||({!IsModerator})) {
                          var generateShowEdit=  (" <a class='icon-pencil pull-right a_underNone editTopic_a e_IconColor' id='" + result[icount].lstlrngs[icnt].Lid + "'  data-DefImg='" + result[icount].lstlrngs[icnt].StaticImage + "' data-topicId='" + result[icount].lstlrngs[icnt].Lid + "'  data-PractApprv='" + result[icount].lstlrngs[icnt].PracticeApprv + "' data-ClientFacing='" + result[icount].lstlrngs[icnt].ClientFacing + "'  data-publish='" + result[icount].lstlrngs[icnt].IsActive + "'  data-TopicDesc=" + escape(result[icount].lstlrngs[icnt].LDescription) + " data-TopicName='" + result[icount].lstlrngs[icnt].LName + "'  data-ctgry=" + CategoryId + "  data-LType='" + result[icount].lstlrngs[icnt].LType + "'  data-TopicTags='"+result[icount].lstlrngs[icnt].AssociatedTopicTags+"'  data-Tags="+result[icount].lstlrngs[icnt].Tags+"  data-LURL="+escape(result[icount].lstlrngs[icnt].LURL)+"  data-ctgryname=" + spacehref + "  data-Image = "+ result[icount].lstlrngs[icnt].DefaultImageName +" onclick='EditTopic(this)' ></a>" );
                          generateLText+=generateShowEdit;
                      }
                      var GenerateU=  ("</div>" +
                                       "<div class='span12 borderB'>" +
                                       " <div class='span4'>" +
                                       "<div class='m10 ml0'><iframe src=" + result[icount].lstlrngs[icnt].LURL + " class='EBaddTopicLF' frameborder='0'   scrolling='no'></iframe></div>" +
                                       "</div>" +
                                       "<div class='span8'>" +
                                       "<div class='m10 pr20'>");

                      if (result[icount].lstlrngs[icnt].PreviewRequired == 'YES') {
                            
                            
                          var displayHTML = ("<a href = '#' Data-Url = " + result[icount].lstlrngs[icnt].LURL + " Data-Name = " + result[icount].lstlrngs[icnt].LName + " onclick='functionOpenVideo(this)'><h4>" + result[icount].lstlrngs[icnt].LName + " </h4></a>" +
                                             "<p style='white-space: pre-line;'> " + result[icount].lstlrngs[icnt].LShortDescription + "  </p>");

                          GenerateU += displayHTML;
                      }
                      else
                      {
                          var displayHTML = ("<a target = '_blank' href = " + result[icount].lstlrngs[icnt].LURL + "><h4>" + result[icount].lstlrngs[icnt].LName + " </h4></a>" +
                                             "<p style='white-space: pre-line;'> " + result[icount].lstlrngs[icnt].LShortDescription + "  </p>");

                          GenerateU += displayHTML;
                      }
                                         

                      generateLText+=GenerateU;
                        
                      if (result[icount].lstlrngs[icnt].StrDescLength>0) {
                          var IsReadMore=  ("<a class='' data-toggle='modal' href=" + hrefurlLearning + "> Read more </a>" );
                          generateLText+=IsReadMore;
                      }
                      var rating=("<div  id='ratingFeatured_" + result[icount].lstlrngs[icnt].Lid + "'></div>");
                      generateLText+=rating;
                      if (result[icount].lstlrngs[icnt].Tags==DefaultTags) {
                          var TempTags= ("<div class='tagBack'><ul class='tags'><li class='tag'>" + result[icount].lstlrngs[icnt].Tags + " </li></ul></div>");
                          sliptTagsData+=TempTags;
                      }
                      else {

                          if (result[icount].lstlrngs[icnt].Tags.length>0) {
                                
                              var spltTags=result[icount].lstlrngs[icnt].Tags;
                              var splitBr="<div class='tagBack'><ul class='tags'>";
                              sliptTagsData+=splitBr;
                              for (var icntTag = 0; icntTag < spltTags.length; icntTag++) {
                                  var TempTags= ("<li class='tag'>" + spltTags[icntTag] + " </li>");
                                  sliptTagsData+=TempTags;
                              }
                              var AfterSplit= "</ul></div>";
                              sliptTagsData+=AfterSplit;
                          }
                      }
                      generateLText+=sliptTagsData;


                      var AfterTags=("<div id=" + spacehrefLearning + " class='modal hide fade PositionF' tabindex='-1' role='dialog' aria-labelledby='myModalLabel1' aria-hidden='true' data-backdrop='static'>" +
"<div class='modal-header'>" +
" <h3>Content Description</h3>" +
"</div>" +
"<div class='modal-body readmoreHpop'>" +
" <p style='white-space: pre-line;'> " +

                      "" + result[icount].lstlrngs[icnt].LDescription + "" +
"</p>" +
"</div>" +
"<div class='modal-footer'>" +
" <button class='btnAthena' data-dismiss='modal' aria-hidden='true'>Cancel</button>" +

"</div>" +
"</div>" +

         "<div><img src="+result[icount].lstlrngs[icnt].OwnerPhoto+"  height='35' width='35' class='Br20' /> <a id='aTopicName' class='hpit_athena_ca_itemLink' href='/apex/AthenaUserProfile?id="+result[icount].lstlrngs[icnt].TopicOwnerId+"'> "+ result[icount].lstlrngs[icnt].LOwnerName+" </a> </div>"+

                                                    "<div class='clearfix pr10'>" );
                      //GenerateUrl+=AfterTags;
                      generateLText+=AfterTags;
                      IntegrateContent += generateLText;
                      if (result[icount].lstlrngs[icnt].ClientFacing) {
                          clientFacing = (" <span class='detailDoc'><img src=" + result[icount].lstlrngs[icnt].hpsharedIcon + " class='pull-right mrl'  title='Client Facing' /></span>");
                          IntegrateContent += clientFacing;
                      }
                        
                      if (result[icount].lstlrngs[icnt].PracticeApprv) {
                          var HPCrt= ("<span class='detailDoc'><img src=" + result[icount].lstlrngs[icnt].HPCertification + " class='pull-right mrl'  title='Practice Approved' /></span>");
                          IntegrateContent += HPCrt;
                      }
                      if (result[icount].lstlrngs[icnt].IsActive) {
                          var HPPublish= ("<span class='detailDoc'><img src=" + result[icount].lstlrngs[icnt].HPPublish + " class='pull-right mrl'  title='Publish' /></span>");
                          IntegrateContent += HPPublish;
                      }

                      NextDviToComplete = ("</div>" +
                                        "</div>" +
                                      "</div>" +
                                    "</div>" +
                                    "</div>");
                      IntegrateContent += NextDviToComplete;

                  }

              }
              var LastDiv = "</div>";
              IntegrateContent += LastDiv;
              $('#DivLearnings').append(IntegrateContent);

          }
          for (var iL = 0; iL < lstTopicIds.length; iL++) {
                
              $('#' + lstTopicIds[iL].Id).raty({   
                  cancelOff: "{!URLFOR($Resource.assets_athena, 'assets_athena/raty/img/cancel-off.png')}",
                  cancelOn: "{!URLFOR($Resource.assets_athena, 'assets_athena/raty/img/cancel-on.png')}",
                  starHalf: "{!URLFOR($Resource.assets_athena, 'assets_athena/raty/img/star-half.png')}",
                  starOff: "{!URLFOR($Resource.assets_athena, 'assets_athena/raty/img/star-off.png')}",
                  starOn: "{!URLFOR($Resource.assets_athena, 'assets_athena/raty/img/star-on.png')}",
                  readOnly: true, 
                  score:lstTopicIds[iL].Rating 
              });
                    
                   
          }
            
          //Sarah
          var ele='';
          var spacehref2 ='';
          if(getCookie('CatName')!='' && getUrlVars()["u"]=='y')
          {
              ele=getCookie('CatName');
              spacehref2 = ele.replace(/ /g, "_");
          }
          else
          {
              ele = $('[id$=hdnTopicCatName]');
              spacehref2 = ele.val().replace(/ /g, "_");
          }
             
          //   var spacehref2 = ele.replace(/ /g, "_"); // By Komala
          var ele2 = $('#' + spacehref2);
          //var ele2 = $('#' + ele);// By Komala
          ele2.addClass('in');   
          var ahref = $('a[href="#' + spacehref2 + '"]')
          ShowHideCategory(ahref);
      }


      function SetBoardTags(data) {
            
          var addTags = $('#learningTags').val();
          $('[id$=InputHiddenTag]').val(addTags);
      }

      function ShowHideDefaultImage(data) {
            
          if ($(data).val() == 'UFC') {
              $('#ShowHideDefault').show();
              $('#DefaultDrop').hide();
          }
          else {
              $('#DefaultDrop').show();
              $('#ShowHideDefault').hide();
          }

      }
      function ShowHideDefaultTopicImage(data) {
            
          if ($(data).val() == 'UFC') {
              $('#ShowTopicUpload').show();
              $('#ShowTopicDefault').hide();
          }
          else {
              $('#ShowTopicDefault').show();
              $('#ShowTopicUpload').hide();
          }

      }

      function defaultImgChanged(selObj, path) {
            
          var selText = selObj.options[selObj.selectedIndex].text;
          var selVal = selObj.options[selObj.selectedIndex].value;
          var selPath = path + selVal;
          if (selVal != '') {
              $('[id$=imgDefault]').attr("src", selPath);
              $('[id$=imgDefault]').attr("alt", selText);
              $('[id$=imgDefault]').attr("class", "");
          }
          else {
              $('[id$=imgDefault]').attr("src", noImgSrc);
              $('[id$=imgDefault]').attr("alt", "no image");
              $('[id$=imgDefault]').attr("class", "viewDefNoImage");
          }
      }

      function EditdefaultImgTopic(selObj, path) {
            
          var selText = selObj.options[selObj.selectedIndex].text;
          var selVal = selObj.options[selObj.selectedIndex].value;
          var selPath = path + selVal;
          if (selVal != '') {
              $('[id$=EditDefaultImg]').attr("src", selPath);
              $('[id$=EditDefaultImg]').attr("alt", selText);
              $('[id$=EditDefaultImg]').attr("class", "");
          }
          else {
              $('[id$=EditDefaultImg]').attr("src", noImgSrc);
              $('[id$=EditDefaultImg]').attr("alt", "no image");
              $('[id$=EditDefaultImg]').attr("class", "viewDefNoImage");
          }
      }

      function defaultImgTopic(selObj, path) {
            
          var selText = selObj.options[selObj.selectedIndex].text;
          var selVal = selObj.options[selObj.selectedIndex].value;
          var selPath = path + selVal;
          if (selVal != '') {
              $('[id$=TopicDefaultImage]').attr("src", selPath);
              $('[id$=TopicDefaultImage]').attr("alt", selText);
              $('[id$=TopicDefaultImage]').attr("class", "");
          }
          else {
              $('[id$=TopicDefaultImage]').attr("src", noImgSrc);
              $('[id$=TopicDefaultImage]').attr("alt", "no image");
              $('[id$=TopicDefaultImage]').attr("class", "viewDefNoImage");
          }
      }
        
      function IdoldefaultImgTopic(selObj, path) {
            
          var selText = selObj.options[selObj.selectedIndex].text;
          var selVal = selObj.options[selObj.selectedIndex].value;
          var selPath = path + selVal;
          if (selVal != '') {
              $('[id$=IdolDefaultImg]').attr("src", selPath);
              $('[id$=IdolDefaultImg]').attr("alt", selText);
              $('[id$=IdolDefaultImg]').attr("class", "");
          }
          else {
              $('[id$=IdolDefaultImg]').attr("src", noImgSrc);
              $('[id$=IdolDefaultImg]').attr("alt", "no image");
              $('[id$=IdolDefaultImg]').attr("class", "viewDefNoImage");
          }
      }

      $(document).ready(function () {
            
          $('[id$=publisherDropdown]').hide();
          $('[id$=publisherAttachRypplePost]').hide();

          var userScore = '{!UserBoardRating}';
          $('#dvRating').raty({ 
              cancelOff: "{!URLFOR($Resource.assets_athena, 'assets_athena/raty/img/cancel-off.png')}",
              cancelOn: "{!URLFOR($Resource.assets_athena, 'assets_athena/raty/img/cancel-on.png')}",
              starHalf: "{!URLFOR($Resource.assets_athena, 'assets_athena/raty/img/star-half.png')}",
              starOff: "{!URLFOR($Resource.assets_athena, 'assets_athena/raty/img/star-off.png')}",
              starOn: "{!URLFOR($Resource.assets_athena, 'assets_athena/raty/img/star-on.png')}",
              readOnly: true, 
              score:userScore 
          });

          $('[id$=publishersharebutton]').val('Post');
          //document.getElementById('publisherDropdown').style.display = 'none';
          //document.getElementById('publisherAttachRypplePost').style.display = 'none';
            
      });
    </script> 
  <script>

      function SearchLearningBoard() {
          $('#AddLearningSearch').empty();
          $('#ExternalSearch').empty();
          $('#TopicResult').text('0');
          $('#SearchRes').text('0');
          $('#BtnSaveSearchTopics').hide();
          var searchData = $('#txtLearningBrd').val();
          var QueryStringId = $.urlParam('id');
          if (searchData.length==0) {
              document.getElementById('emptySearchTopic').innerHTML = "Enter Value For Search";
              $('[id$=emptySearchTopic]').show();
              //document.getElementById('emptySearchTopic').style.display = 'block';
              event.preventDefault();
              event.stopPropagation();
              return false;
          }
          else {
              $('#divSearchTopicResult').show();
              $('#AddLearningSearch').show();
              $('[id$=emptySearchTopic]').empty();
              $('[id$=emptySearchTopic]').hide();
              //document.getElementById('emptySearchTopic').style.display = 'none';
              Visualforce.remoting.Manager.invokeAction(
           '{!$RemoteAction.EXO_AthenaEditLearningBoardDtls.LearningSearch}',
           searchData,
           QueryStringId,
            DisplaySearchLearning
           );
              Visualforce.remoting.Manager.invokeAction(
                 '{!$RemoteAction.EXO_AthenaEditLearningBoardDtls.externalsearch}',
                 searchData,
                 QueryStringId,
                  DisplayExternalSearch
              );

          }
      
      }

      // Suman Start code Friday

      function DisplaySearchLearning(result, event) 
      {
          $('#TopicResult').val(result.length);
          $('#TopicResult').text(result.length);
          $('#AddLearningSearch').empty();
          if (result.length > 0)
          {
              for (var icnt = 0; icnt < result.length; icnt++)
              {
                  //$('#AddLearningSearch').append("<div class='clearB mbot10 clearfix'>" +
                  //                        "<div class='STsearch'>" +
                  //                          "<div class='m5 pull-left mtop25'>" +
                  //                           " <input type='checkbox'  value=" + result[icnt].Id + "/>" +

                  //                          "</div>" +
                  //                          "<div class='STimage'> <img src='img_athena/no_searchResult.jpg' /> </div>" +
                  //                          "<div class='pull-left'>" +
                  //                           " <h1><a href='https://{!getSfInstance}/apex/AthenaViewLearning?id=" + result[icnt].Id + "' target='_blank'>" + result[icnt].Name__c + " </a></h1>" +
                  //                            "<div> <a class='STdocIcon'><img src='img_athena/fileExcelUpload.png' /></a> </div>" +
                  //                          "</div>" +
                  //                        "</div>" +
                  //                      "</div>");


                  //$('#AddLearningSearch').append("<div><span><input type='checkbox' name='LearningSearch' value=" + result[icnt].Id + "  /></span> " + result[icnt].Name__c + " <div>");

                  $('[id$=BtnSaveSearchTopics]').show();
                  $('#AddLearningSearch').append("<div><span><input type='checkbox' name='LearningSearch' value=" + result[icnt].LBid + "  /></span> <span class='STimageIdol'> <img class='m10' src="+ result[icnt].DefaultImageName +" /></span><span class='m5' id=" + result[icnt].LBid + ">" + result[icnt].LBName + " </span> <span class='searchPopU'>" + result[icnt].LBOwnerName + " </span> <div>");

              }
          }
          else
          {
              $('[id$=BtnSaveSearchTopics]').hide();
              //$('#BtnSaveSearchTopics').hide();
              $('#AddLearningSearch').append("<div> Search Result not found </div>");
          }
      }

                
      // Suman End code Friday

      function ShowTopicDtls(data) {
        
          //Clear the elements
          $('.fileupload-preview fileupload-exists thumbnail').empty();
          $('.fileupload-preview fileupload-exists thumbnail').append('<img src="/resource/1401260033000/img_athena/img_athena/no_image.gif" alt="no_image" style="width: auto; border: 0 none;" class="viewDefNoImage">')
          $('#AddLearningSearch').empty();
          $('#ExternalSearch').empty();
          $('#txtLearningBrd').val('');
          $('#TopicResult').text('0');
          $('#SearchRes').text('0');
          $('#BtnSaveSearchTopics').hide();
          $('#emptySearchTopic').empty();
          $('#emptySearchTopic').hide();
          $('#emptyImageUpLoad').hide();
          $('#emptyImageUpLoad').empty();
          $('#AddTopics').modal('show');
          var CategoryId = $(data).attr('data-ctgry');
          var CategoryName=$(data).attr('data_ctgryNm');
          var CategoryType = $(data).attr('data_ctgryType');

          var TabCategoryName = $(data).attr('data-ctgryName');

          $('[id$=hdnTopicCatName]').val(TabCategoryName);
          document.cookie = "CatName=" + TabCategoryName;// By Komala

          $('[id$=hdnTopicCtgry]').val(CategoryId);
          $('[id$=hdnTopicCtgryName]').val(CategoryName);
          $('[id$=Ctgry]').val(CategoryId);
          $('[id$=lblCategory]').val(CategoryId);
          $('[id$=lblCategory]').text(CategoryName);
          $('[id$=lblCtgryName]').val(CategoryId);
          $('[id$=lblCtgryName]').text(CategoryName);
          $('[id$=txtCategoryType]').val(CategoryType);
          $('[id$=hdnTopicCatName]').val(CategoryName);
                  
          
          
          $('[id$=Ctgry]').hide();
          //$('[id$=Ctgry]').attr('disabled', 'disabled');
          $('[id$=LearningTopic]').val('TopicType');
          $('[id$=txtTopic]').val('');
          $('[id$=txtTopicArea]').val('');
          //$('[id$=txtTopicTags]').val('');
          $('[id$=InputTextURL]').val('');
          $('#divTopicCommon').hide();
          $('#VideoLearning').hide();
          $('#TopicTextImage').hide();
          $('#TopicCheckPublish').hide();
          document.getElementById('{!$Component.EditTopic.UpLoadDefault}').attr('checked','checked');
      }

      function ShowTopicOnType(data) {
            
          $('#dvInitTopicCancel').hide();

          $('#spnNoticeMessage').empty();
          $('#spnNoticeMessage').hide();
          $('#divTopicCommon').show();
          $('#TopicCheckPublish').show();
          $('[id$=txtTopic]').val('');
          $('[id$=txtTopicArea]').val('');
          $('[id$=InputTextURL]').val('');
          $('[id$=AddTopicPublish]').removeAttr('checked');
          $('[id$=AddTopicCF]').removeAttr('checked');
          $('[id$=AddTopicPA]').removeAttr('checked');
          $('[id$=txtTopicTags]').val('');
          $('[id$=TopicTags]').val('');
          //$('#TextUrlLink').show();
          //$('#UpLoadDoc').hide();
          if (data.value == 'Text') {
              $('#TextUrlLink').show();
              $('#UpLoadDoc').hide();
              $('#TopicTextImage').show();
              $('#VideoLearning').hide();
              $('#urlLearning').hide();
              $($($($($('[id$=UpLoadDefault]')[0].children)[0].children)[0].children)[0].children[0]).attr('checked','checked');
              $('[id$=rdoOptions]').attr("checked","checked");
              $('#TopicTextImage').show();

              $('#ShowTopicUpload').hide();
              $('#ShowTopicDefault').show();

          }
          else if (data.value == 'Video') {
              $('#TextUrlLink').show();
              $('#UpLoadDoc').hide();
              $('#TopicTextImage').hide();
              $('#VideoLearning').show();
              $('#urlLearning').show();
              $('#ShowTopicUpload').hide();
              $('#spnNoticeMessage').text('(Only Youtube and Brainshark videos are supported)');
              $('#spnNoticeMessage').show();
          }
          else if (data.value == 'LinkORDoc') {
              $('#TextUrlLink').show();
              $('#UpLoadDoc').hide();
              $('#TopicTextImage').show();
              $('#VideoLearning').hide();
              $('#urlLearning').show();
              $('#ShowTopicUpload').hide();
              $('#ShowTopicDefault').show();
              //$('#ShowTopicUpload').show();
              $($($($($('[id$=UpLoadDefault]')[0].children)[0].children)[0].children)[0].children[0]).attr('checked','checked');

          }
          else if (data.value == 'UploadDoc') {  
            
              //$('#SaveAndNext').val('Next');
              $('#TextUrlLink').hide();
              $('#UpLoadDoc').show();
              $('#TopicTextImage').show();
              $('#VideoLearning').hide();
              $('#urlLearning').hide();
              $('#uploadLearning').show();  
              //$('#TextUrlLink').show();
              $('#UpLoadDoc').show();
              $('#ShowTopicUpload').hide();
              $('#ShowTopicDefault').show();
              //$('#ShowTopicUpload').show();
              $($($($($('[id$=UpLoadDefault]')[0].children)[0].children)[0].children)[0].children[0]).attr('checked','checked');
          }
            
      }

      function funcChangeOwner(data) {
        
          //var te='{!$Component.formLB.inputUser}';
          //var test=document.getElementById('{!$Component.formLB.inputUser_lkid}').value;
          var lkfield = document.getElementById('{!$Component.EditBoard.chgOnwerInputUser}_lkid').value;

          $('[id$=hiddenChangeOwner]').val(lkfield);

          // lkfield.value now has the selected ID value
      }


      function EditopenNewWindow() {
            
          $('#errorMsgForEdit').empty();
          $('#errorMsgForEdit').hide();
          var EditType= $('[id$=lblTopicType]').val();
            
          if (EditType == "Video") {

              var srcurl1 = $.trim($('[id$=txtEditVideoURL]').val());
              var isUrlValid= isValidUrl(srcurl1);
              if ((srcurl1 != '' ) && (isUrlValid)) {
                    
                  if (srcurl1.indexOf("youtube.com")>-1)
                  {
                      if(srcurl1.indexOf("www")==-1)
                      {
                          srcurl1="www."+srcurl1;
                 
                      }
                      if(srcurl1.indexOf("https")==-1) 
                      { 
                          if(srcurl1.indexOf("http") == -1){ 
                              srcurl1= 'https://'+srcurl1; 
                          } 
                      }
                                
                      if(isValidUrl(srcurl1)){
                          $('#errorMsgForEdit').hide();
                          $('#EditTopicVideo').show();
                          $('[id$=EditVideoURL]').show();
                          $('[id$=DefaultVideo]').hide();
                
                          srcurl1 = srcurl1.replace("watch?v=", "embed/");
                          srcurl1 = srcurl1.replace("http:", "https:");
                          $('#EditVideoURL').attr('src', srcurl1);
                          $('#EditVideoURL').reload(true);
                      }
                      else{
                          $('#errorMsgForEdit').append('Enter valid URL');
                          $('#errorMsgForEdit').append('<br/>');
                          if ($('#errorMsgForEdit')[0].children.length > 0) {
                              $("#errorMsgForEdit").show();
                              $('#errorMsgForEdit').css('display', 'block');

                              return false;
                          }
                      }
                  }
                  else{
                      $('#errorMsgForEdit').hide();
                      $('#EditTopicVideo').show();
                      $('[id$=EditVideoURL]').show();
                      $('[id$=DefaultVideo]').hide();
                
                      $('#EditVideoURL').attr('src', srcurl1);
                      $('#EditVideoURL').reload(true);
                  }
                
                
              }
              else {
                  if ($('[id$=txtEditVideoURL]').val() == '') {
                        
                      $('#errorMsgForEdit').append('Enter URL');
                      $('#errorMsgForEdit').append('<br/>');
                  }
                  if((!isUrlValid) && $('[id$=txtEditVideoURL]').val() != ''){
                      $('#errorMsgForEdit').append('Enter Valid URL');
                      $('#errorMsgForEdit').append('<br/>');
                  }
                  if ($('#errorMsgForEdit')[0].children.length > 0) {
                      $("#errorMsgForEdit").show();
                      $('#errorMsgForEdit').css('display', 'block');

                      return false;
                  }
              }
          }
          else {
                
              var href = $('[id$=txtEditVideoURL]').val();
              if (href != '') {

                  if (href.indexOf('http://') > -1) {
                      href = href.replace('http://', 'http://')
                  }
                  else if (href.indexOf('www.') > -1) {
                      href = href.replace('www.', 'https://')
                  }
                  else if (href.indexOf('https://') > -1) {
                      href = href.replace('https://', 'https://')
                  }
                  else if (href.indexOf('http://') <= -1 && href.indexOf('www.') <= -1) {
                      href = 'http://' + href;
                  }

                  //var link = $('<a href="http://' + href + '" />');
                  var link = $('<a href="' + href + '" />');
                  link.attr('target', '_blank');
                  window.open(link.attr('href'));
              }
              else {
                  if ($('[id$=txtEditVideoURL]').val() == '') {
                      $('#errorMsgForEdit').empty();
                      $('#errorMsgForEdit').append('Enter URL');
                      $('#errorMsgForEdit').append('<br/>');
                  }
                  if ($('#errorMsgForEdit')[0].children.length > 0) {
                      $("#errorMsgForEdit").show();
                      $('#errorMsgForEdit').css('display', 'block');

                      return false;
                  }
              }
          }
      }

      function isValidUrl(s) {
          var regexp = /(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/
          return regexp.test(s);
      }
      function isValidWWWUrl(s) {
          var regexp = /(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/
          return regexp.test(s);
      }
      function openNewWindow() {
          $('#emptyImageUpLoad').empty();
          $('#emptyImageUpLoad').hide();
          var TestURL = document.getElementById('{!$Component.EditTopic:LearningTopic}').value;
            
          //var LType = $('input[name=optionsRadios1]:checked').val(); 
          if (TestURL == "Video") {
              var srcurl1 = $.trim($('[id$=InputTextURL]').val());

              var isUrlValid= isValidWWWUrl(srcurl1);
                
              if ((srcurl1 != '' ) && (isUrlValid)) {
                  $('#emptyImageUpLoad').empty();
                  if (srcurl1.indexOf("youtube.com")>-1)
                  {
                    
                      if(srcurl1.indexOf("www")==-1)
                      {
                          srcurl1="www."+srcurl1;
                 
                      }
                      if(srcurl1.indexOf("https")==-1) 
                      { 
                          if(srcurl1.indexOf("http") == -1){ 
                              srcurl1= 'https://'+srcurl1; 
                          } 
                      }
                
                      if(isValidUrl(srcurl1)){
                          $('#emptyImageUpLoad').hide();
                          $('[id$=testvideo]').show();
                          $('[id$=novideo]').hide();
           
                          srcurl1 = srcurl1.replace("watch?v=", "embed/");
                          srcurl1 = srcurl1.replace("http:", "https:");
                          $('#testvideo').attr('src', srcurl1);
                          $('#testvideo').reload(true);
                      }
                      else{
                          $('#emptyImageUpLoad').append('Enter valid URL');
                          $('#emptyImageUpLoad').append('<br/>');
                          if ($('#emptyImageUpLoad')[0].children.length > 0) {
                              $("#emptyImageUpLoad").show();
                              $('#emptyImageUpLoad').css('display', 'block');

                              return false;
                          }
                      }
                    
                  }
                  else if(srcurl1.indexOf("brainshark.com")>-1){
                      if (srcurl1.indexOf("www") == -1) {
                          srcurl1 = "www." + srcurl1;

                      }
                      if (srcurl1.indexOf("https") == -1) {
                          if (srcurl1.indexOf("http") == -1) {
                              srcurl1 = 'https://' + srcurl1;
                          }
                      }

                      if (isValidUrl(srcurl1)) {
                          $('#VideoLearning').show();
                          $('[id$=testvideo]').show();
                          $('[id$=novideo]').hide();
                          $('#emptyImageUpLoad').hide();


                          //srcurl1 = srcurl1.replace("watch?v=", "embed/");
                          //srcurl1 = srcurl1.replace("http:", "https:");
                          $('#testvideo').attr('src', srcurl1);
                          $('#testvideo').reload(true);

                      }
                      
                      else {
                          $('#emptyImageUpLoad').append('Enter Valid URL');
                          $('#emptyImageUpLoad').append('<br/>');
                          if ($('#emptyImageUpLoad')[0].children.length > 0) {
                              $("#emptyImageUpLoad").show();
                              $('#VideoLearning').hide();
                              $('#emptyImageUpLoad').css('display', 'block');

                              return false;
                          }

                      }
                  }
                  else {

                      $('#emptyImageUpLoad').append('Enter Valid URL');
                      $('#emptyImageUpLoad').append('<br/>');
                      if ($('#emptyImageUpLoad')[0].children.length > 0) {
                          $("#emptyImageUpLoad").show();
                          $('#VideoLearning').hide();
                          $('#emptyImageUpLoad').css('display', 'block');

                          return false;
                      }

                  }
                    
                  /* else{
                       $('[id$=testvideo]').show();
                       $('[id$=novideo]').hide();
                       $('#testvideo').attr('src', srcurl1);
                       $('#testvideo').reload(true);
               
                   } */
                    
                
              }
              else {
                  if ($('[id$=InputTextURL]').val() == '') {
                       
                      $('#emptyImageUpLoad').append('Enter URL');
                      $('#emptyImageUpLoad').append('<br/>');
                  }
                  if((!isUrlValid) && $('[id$=InputTextURL]').val() != ''){
                      $('#emptyImageUpLoad').append('Enter Valid URL');
                      $('#emptyImageUpLoad').append('<br/>');
                  }
                  if ($('#emptyImageUpLoad')[0].children.length > 0) {
                      $("#emptyImageUpLoad").show();
                      $('#emptyImageUpLoad').css('display', 'block');

                      return false;
                  }
              }
          }
          else {
                
              var href = $('[id$=InputTextURL]').val();
              if (href != '') {

                  if (href.indexOf('http://') > -1) {
                      href = href.replace('http://', 'http://')
                  }
                  else if (href.indexOf('www.') > -1) 
                  {
                      if (href.indexOf('https://') > -1)
                      {
                          href = href.replace('https://', '')
                      }
                      if (href.indexOf('http://') > -1)
                      {
                          href = href.replace('http://', '')
                      }

                      href = href.replace('www.', '')
                      href = 'https://' + href;
                  }
                  else if (href.indexOf('https://') > -1) {
                      href = href.replace('https://', 'https://')
                  }
                  else if (href.indexOf('http://') <= -1 && href.indexOf('www.') <= -1) {
                      href = 'http://' + href;
                  }

                  //var link = $('<a href="http://' + href + '" />');
                  var link = $('<a href="' + href + '" />');
                  link.attr('target', '_blank');
                  window.open(link.attr('href'));
              }
              else {
                  if ($('[id$=InputTextURL]').val() == '') {
                      $('#emptyImageUpLoad').empty();
                      $('#emptyImageUpLoad').append('Enter URL');
                      $('#emptyImageUpLoad').append('<br/>');
                  }
                  if ($('#emptyImageUpLoad')[0].children.length > 0) {
                      $("#emptyImageUpLoad").show();
                      $('#emptyImageUpLoad').css('display', 'block');

                      return false;
                  }
              }
          }
      }

      /*Suman Script Start Code*/

      //function SearchAddRelatedBoard() {
      //    var searchData = $('#txtAddRelative').val();
        
      //    var warehouseId = $.urlParam('id');

      //    //jQuery('[id$=hiddenSearch]').val(searchData);
      //    Visualforce.remoting.Manager.invokeAction('{!$RemoteAction.EXO_AthenaEditLearningBoardDtls.AddRelatedLB}', searchData, warehouseId, DisplaySearchLB);
      //}

      //function DisplaySearchLB(result, event) {
        
      //    $('#AddRelative').empty();
      //    if (result.length > 0) {
      //        for (var icnt = 0; icnt < result.length; icnt++) {
      //            $('#AddRelative').append("<div><span><input type='checkbox' name='RelatedSearch' value=" + result[icnt].Id + "  /></span> <a href='https://{!getSfInstance}/apex/AthenaLearningBoardDtls?id=" + result[icnt].Id + "' target='_blank'>" + result[icnt].Name__c + " </a> <div>");
      //        }
      //    }
      //    else {
      //        $('#AddRelative').append("<div> Search Result not found </div>");
      //    }
      //}

      function AddRelatedBoard()
      {
          $('#txtAddRelative').val('');
          $('#AddRelative').hide();
          $('#AddRelative').empty();
          $('#dvReleatedBoardErrorMsg').hide();
          $('#dvReleatedBoardErrorMsg').empty();

          $('#AddBoards').modal('show');
      }

      function SaveRelatedBoard(event) {

            
          var SearchText = $('[id$=txtAddRelative]').val();
          var strRel = '';
          var flag = 0;

          if(SearchText == '')
          {
              $('[id$=dvReleatedBoardErrorMsg]').empty();
              $('[id$=dvReleatedBoardErrorMsg]').append('Enter Search Value');
              $('[id$=dvReleatedBoardErrorMsg]').append('<br/>');
              flag = 1;

              $('[id$=dvReleatedBoardErrorMsg]').show();
              event.preventDefault();
              event.stopPropagation();
              return false;
          }
          else
          {
              $('input[name="RelatedSearch"]:checked').each(function () {
                  if (strRel == '') {
                      strRel = $(this).val();
                  }
                  else {
                      strRel = strRel + ',' + $(this).val();
                  }
              });

                
              $('[id$=hiddenRelatedSearch]').val(strRel);

              if (strRel == '')
              {
                  $('[id$=dvReleatedBoardErrorMsg]').empty();
                  $('[id$=dvReleatedBoardErrorMsg]').append('Select at least one board');
                  $('[id$=dvReleatedBoardErrorMsg]').append('<br/>');
                  $('[id$=dvReleatedBoardErrorMsg]').show();

                  event.preventDefault();
                  return false;
              }
              else
              {
                  $('[id$=dvReleatedBoardErrorMsg]').hide();
                  var button = document.getElementById("{!$Component.EditTopic.btnRelatedBoard}");
                  button.click();
              }
          }

      }

      //function RemoveRelLearningBoard(data) {
        

      //    $('[id$=hdrlbrdId]').val(data);
      //}

      /*Suman Script End Code*/

      function AddContributor(data) {
            
          var lkfield = document.getElementById('{!$Component.EditTopic.inputUser}_lkid').value;
          $('[id$=hdnNewContributor]').val(lkfield);
      }
    
      // Code modfied Today - Friday
      function DisplaySearchLB(result, event)
      {
            
          $('#AddRelative').empty();
          if (result.length > 0)
          {
              for (var icnt = 0; icnt < result.length; icnt++)
              {
                  //$('#AddRelative').append("<div><span><input type='checkbox' name='RelatedSearch' value=" + result[icnt].Id + "  /></span> <span id=" + result[icnt].Id + ">" + result[icnt].Name__c + " </span> <div>");
                  $('#AddRelative').append("<div><span><input type='checkbox' name='RelatedSearch' value=" + result[icnt].LBid + "  /></span> <span> <img width='50' height='50' class='m10' src="+ result[icnt].DefaultImageName +" /></span><span class='m5' id=" + result[icnt].LBid + ">" + result[icnt].LBName + " <span class='searchPopU'>" + result[icnt].LBOwnerName + " </span> </span> <div>");
              }
          }
          else
          {
              $('#AddRelative').append("<div> Search Result not found </div>");
          }
      }

      function SearchAddRelatedBoard() {
            
        
          var searchData = $('#txtAddRelative').val();
        
          if (searchData != '') {
              $('[id$=dvReleatedBoardErrorMsg]').hide();
              $('[id$=AddRelative]').show();

              //$('[id$=dvReleatedBoardErrorMsg]').show();
              //document.getElementById('dvReleatedBoardErrorMsg').style.display = 'none';
              //document.getElementById('AddRelative').style.display = 'block'; 
              var warehouseId = $.urlParam('id');
              Visualforce.remoting.Manager.invokeAction('{!$RemoteAction.EXO_AthenaEditLearningBoardDtls.AddRelatedLB}', searchData, warehouseId, DisplaySearchLB);
          }
          else
          {
              document.getElementById('dvReleatedBoardErrorMsg').innerHTML = "Enter Value For Search";
              $('[id$=dvReleatedBoardErrorMsg]').show();
              //$('[id$=AddRelative]').hide();
              //document.getElementById('dvReleatedBoardErrorMsg').style.display = 'block';
              //document.getElementById('AddRelative').style.display = 'none'; 
          }
      }

      function RemoveRelLearningBoard(data) {
        
          $('#dvRelatedBoardRemove').modal('show');
          $('[id$=hdrlbrdId]').val(data);

          //$('[id$=hdrlbrdId]').val(data);
      }

      // Suman End Code Friday

      $(function () {
            
          //event.preventDefault();
          LoadTopics();
          //document.getElementById('{!$Component.EditBoard:inputUser}').value = '';

          //if ({!IsModerator}) {
          //document.getElementById('{!$Component.EditBoard:chkFeatured}').disabled =false;
          //$('[id$=chkFeatured]').removeAttr('disabled');
          //}
          //else {
          //document.getElementById('{!$Component.EditBoard:chkFeatured}').disabled=true;
          //$('[id$=chkFeatured]').attr('disabled','disabled');
          //}
        
          if({!IsBoardModeratorOrOwner}){
          $('[id$=btnHeaderBoardSave]').show();
          //$('[id$=btnHeaderBoardSave]').removeAttr('disabled');
      }
      else {
      // $('[id$=btnHeaderBoardSave]').attr('disabled','disabled');
        $('[id$=btnHeaderBoardSave]').hide();
      }
    

      $("select[id$=chgOnwerInputUser_mlktp]").hide();
      $("select[id$=inputUser_mlktp]").hide();
      //var sampleTags = ['cloud', 'athena', 'sample', 'board', 'UI', 'css', 'jQuery', 'salesforce', 'html5', 'responcive', ];
      var sampleTags = [{!AvailTags}]; 


      //-------------------------------
      // Single TAG field
      //-------------------------------
      $('#learningTagsTop').tagit({
          availableTags: sampleTags,
          // This will make Tag-it submit a single form value, as a comma-delimited field.
          singleField: true,
          singleFieldNode: $('#learningTags')
      });

      $('#TopicTags').tagit({
          availableTags: sampleTags,
          // This will make Tag-it submit a single form value, as a comma-delimited field.
          singleField: true,
          singleFieldNode: $('#txtTopicTags')
      });

      $('#EditTags').tagit({
          availableTags: sampleTags,
          // This will make Tag-it submit a single form value, as a comma-delimited field.
          singleField: true,
          singleFieldNode: $('#txtEditTags')
      });

      $('#ExternalSearchTags').tagit({
          availableTags: sampleTags,
          // This will make Tag-it submit a single form value, as a comma-delimited field.
          singleField: true,
          singleFieldNode: $('#txtExternalSrchTags')
      });

      //show hide imageUpload
      $("input[type=radio]").change(function () {
          var divId = $(this).attr("id");
          $("div.check").hide();
          $("." + divId).show();
          $("input[type=checkbox]").change();
      });

      $('.removeFdiv a').click(function (domHTML) {
            
      });
        
      //document.getElementById('{!$Component.EditBoard.dropTemplate}').disabled = true;
      //document.getElementById('{!$Component.EditBoard.dropTemplate}').style.cursor = "default";
      document.getElementById('{!$Component.EditTopic.inputUser}').disabled = true;
      // document.getElementById('{!$Component.EditBoard.chgOnwerInputUser}').disabled = true;
      // Suman Start Code Friday
        
      document.getElementById('{!$Component.EditTopic.inputUser}').value = '';
      //document.getElementById('{!$Component.EditBoard.chgOnwerInputUser}').value = '';

      //if ('{!IsBoardModerator}') 
      //  document.getElementById('{!$Component.EditBoard.chkFeatured}').disabled = false;
      //else
      //  document.getElementById('{!$Component.EditBoard.chkFeatured}').disabled = true;

      //var btnHeaderSave = document.getElementById('{!$Component.EditBoard.btnHeaderBoardSave}');
      //btnHeaderSave.onclick = function (event) {

      //    if ('{!!IsBoardModeratorOrOwner}') {
      //        event.preventDefault();
      //        document.getElementById('{!$Component.EditBoard.btnHeaderBoardSave}').style.cursor = "default";
      //        return false;
      //    }
      //    else {
      //        return true;
      //    }
      //}


      //if ('{!IsBoardModerator}') 
      //    document.getElementById('{!$Component.EditBoard.chkFeatured}').disabled = false;
      //else
      //    document.getElementById('{!$Component.EditBoard.chkFeatured}').disabled = true;


      //var btnHeaderSave = document.getElementById('{!$Component.EditBoard.btnHeaderBoardSave}');
      //btnHeaderSave.onclick = function (event) {

      //    if ('{!IsBoardModeratorOrOwner}') {
      //        return true;
      //    }
      //    else {
      //        event.preventDefault();
      //        document.getElementById('{!$Component.EditBoard.btnHeaderBoardSave}').style.cursor = "default";
      //        return false;                
      //    }



      // Suman End Code Friday
        
      });

      function RemoveLearning(data) {
        

          jQuery('[id$=hdnLId]').val(data);
      }
      function EditCatChanged() {

          $('[id$=hdnTopicCatName]').val($('[id$=TopicCategory] option:selected').text());
    
      }
    
      function EditTopic(data) {
           debugger
      // START By Komala
            $('#UploadFile_EditTopics').append($('#UploadFileComponent'));
            $('#UploadFileComponent').show();
      // END By Komala
          $('[id$=txtEditVideoURL]').val('');
          $('#errorMsgForEdit').hide();
          $('#errorMsgForEdit').empty();
          $('#spnEditNoteVideoMsg').empty();
          $('#EditTopics').modal('show');
          $('#EditCommonTopic').show();

          var Ltype=$(data).attr('data-LType');

          if (Ltype=='Link or Document') {
              Ltype='Link';
              var TopicUrl= unescape($(data).attr('data-LURL'));
              $('#lblTopicUrl').text(TopicUrl);
              $('#spnEditNoteVideoMsg').removeClass('warningImg');
          }
          if (Ltype=='Video') {
              $('#spnEditNoteVideoMsg').addClass('warningImg');
              var TopicUrl= unescape($(data).attr('data-LURL'));
              $('#spnEditNoteVideoMsg').text('(Only Youtube and Brainshark videos are supported)');
              $('#lblTopicUrl').text(TopicUrl);
          }

          $('[id$=TypeOfTopic]').hide();
          $('[id$=lblTopicType]').val(Ltype);
          $('[id$=lblTopicType]').text(Ltype);
        
          //$('#lblTopicUrl').text(TopicUrl);
          //$('#lblTopicUrl').val(TopicUrl);
          var TTags= $(data).attr('data-TopicTags');
          if (TTags!='undefined') {
              $('[id$=txtEditTags]').val(TTags);
          }
       
          //$('[id$=EditTags]').val(TTags);
          $('#EditTags li:not(:last)').remove();
          if (TTags!='undefined') {
           
              if (($(data).attr('data-Tags')!='' ) && ($(data).attr('data-Tags')!=null)) {
                  if ($(data).attr('data-Tags').indexOf(',') != -1) {
            
                      var TTags= $(data).attr('data-Tags').split(',');
                      $('[id$=txtEditTags]').val(TTags);
                      //$('#EditTags li').remove();
                      //$('#EditTags li:not(:last)').remove();

                      for (var iLoop = 0; iLoop < TTags.length; iLoop++) {
                          var result= ("<li class='tagit-choice ui-widget-content ui-state-default ui-corner-all tagit-choice-editable'>"+
                     "<span class='tagit-label'>"+TTags[iLoop]+"</span>"+
                     "<a class='tagit-close'>"+
                         "<span class='text-icon' style='display:block'></span>"+
                         "<span class='ui-icon ui-icon-close'></span>"+

                     "</a>"+
                  "</li>");
                          $("#EditTags > li.tagit-new").before(result);
                          //$(".tagit-new").before(result);
                      }
                  }
                  else {
                      var TopicTag=$(data).attr('data-Tags');
                      //$('#EditTags li:not(:last)').remove();
                      var result= ("<li class='tagit-choice ui-widget-content ui-state-default ui-corner-all tagit-choice-editable'>"+
                                 "<span class='tagit-label'>"+TopicTag+"</span>"+
                                 "<a class='tagit-close'>"+
                                     "<span class='text-icon' style='display:block'></span>"+
                                     "<span class='ui-icon ui-icon-close'></span>"+

                                 "</a>"+
                              "</li>");
                      //$(".tagit-new").before(result);
                      $("#EditTags > li.tagit-new").before(result);
                  }
              }
          }


          var ctgryId = $(data).attr('data-ctgry');
          var CatName = $(data).attr('data-ctgryname');
          $('[id$=hdnTopicCatName]').val(CatName);
          document.cookie = "CatName=" + CatName;

          var TopicType = $(data).attr('data-LType');
          $('[id$=TopicCategory]').val(ctgryId);
          var TName = $(data).attr('data-TopicName');
          var TDesc = $(data).attr('data-TopicDesc');
          var result = unescape(TDesc);

          $('[id$=txtEditTopicName]').val(TName);
          $('[id$=txtHideTopic]').val(TName);
          $('[id$=txtEditTopicDesc]').val(unescape(TDesc));
          var TId = $(data).attr('data-topicId');
          $('#hdnTopicId').val(TId);
          var DocId = $(data).attr('data-DocId');
          $('#hdnDocId').val(DocId);
          $('[id$=txtEditTopicId]').val(TId);

          if ($(data).attr('data-publish').toUpperCase() == "TRUE") {

              $('[id$=chkTopicPublish]').attr('checked', 'checked');
          }
          else {
              $('[id$=chkTopicPublish]').removeAttr('checked');
          }

          if ($(data).attr('data-ClientFacing').toUpperCase() == "TRUE") {
              $('[id$=chkTopicCF]').attr('checked', 'checked');
          }
          else {
              $('[id$=chkTopicCF]').removeAttr('checked');
          }

          if ($(data).attr('data-PractApprv').toUpperCase() == "TRUE") {
              $('[id$=chkTopicPA]').attr('checked', 'checked');
          }
          else {
              $('[id$=chkTopicPA]').removeAttr('checked');
          }

          if (TopicType == 'Text') {
              debugger
              var ImageTextType = $(data).attr('data-Image');
              if(ImageTextType.indexOf('BoardContent1.png')!=-1)
              {
                  
              }
              else
              {
                
            //$('[id$=imageEditTopic]').attr('src',ImageTextType);
                  
              }

              $('[id$=TypeOfTopic]').val(TopicType);
              //$('[id$=TypeOfTopic]').attr('disabled', 'disabled');
              $('#EditTopicImage').show();
              //$('#EditTopicUpload').show();
              $('#EditCommonchkBox').show();
              $('#EditLinkDoc').hide();
              $('#EditUpload').hide();
              //$($($($($('[id$=SelectByUpload]')[0].children)[0].children)[0].children)[0].children[0]).attr('checked','checked');
              var dImg=  $(data).attr('data-DefImg');
              if(dImg=='true')
              {
                  $($($($($('[id$=SelectByUpload]')[0].children)[0].children)[0].children)[0].children[0]).attr('checked','checked');
                  //$('#divSelectImg').show();
                   $('#EditTopicUpload').hide();
                  $('#EditDefaultTopic').show();
                 
              }
              else
              {
                  //$('#divSelectImg').hide();
                  $($($($($('[id$=SelectByUpload]')[0].children)[0].children)[0].children)[1].children[0]).attr('checked','checked');
                  $('#EditTopicUpload').show();
                  $('#EditDefaultTopic').hide();
                  $('[id$=imageEditTopic]').attr('src',ImageTextType);
              }
          }
          else if (TopicType == 'Video') {
              $('[id$=TypeOfTopic]').val(TopicType);
              //$('[id$=TypeOfTopic]').attr('disabled', 'disabled');
              $('#EditLinkDoc').show();
              $('#EditTopicImage').hide();
              $('#EditCommonchkBox').show();
              $('#EditUpload').hide();
              $('#EditTopicVideo').hide();
              $('#DefaultVideo').hide();
              $('#EditVideoURL').hide();
            
            
          }
          else if (TopicType == 'Link or Document') {
              var ImageLinkType = $(data).attr('data-Image');
              if(ImageLinkType.indexOf('BoardContent1.png')!=-1)
              {
            
              }
              else
              {
                      //$('[id$=imageEditTopic]').attr('src',ImageLinkType);
                  
              }
                
              var Link = 'LinkORDoc';
              $('[id$=TypeOfTopic]').val(Link);
              $('#EditLinkDoc').show();
              //$('[id$=TypeOfTopic]').attr('disabled', 'disabled');
              $('#EditTopicImage').show();
              $('#EditTopicUpload').show();
              $('#EditCommonchkBox').show();
              $('#EditUpload').hide();
              $('#EditTopicVideo').hide();
              //$($($($($('[id$=SelectByUpload]')[0].children)[0].children)[0].children)[0].children[0]).attr('checked','checked');
              var dImg=  $(data).attr('data-DefImg');
              if(dImg=='true')
              {
                  $($($($($('[id$=SelectByUpload]')[0].children)[0].children)[0].children)[0].children[0]).attr('checked','checked');
                  //$('#divSelectImg').show();
                  $('#EditTopicUpload').hide();
                  $('#EditDefaultTopic').show();
              }
              else
              {
                  //$('#divSelectImg').hide();
                  $($($($($('[id$=SelectByUpload]')[0].children)[0].children)[0].children)[1].children[0]).attr('checked','checked');
                 $('[id$=imageEditTopic]').attr('src',ImageLinkType);
                  
                   $('#EditTopicUpload').show();
                  $('#EditDefaultTopic').hide();
              }
          }
          else if (TopicType == 'Upload Document') {

              var ImageUploadType = $(data).attr('data-Image');
              if(ImageUploadType.indexOf('BoardContent1.png')!=-1)
              {
                  
              }
              else
              {
               // $('[id$=imageEditTopic]').attr('src',ImageUploadType);
                  
              }
              var Link = 'UploadDoc';
              $('[id$=TypeOfTopic]').val(Link);
              $('#EditLinkDoc').hide();
              //$('[id$=TypeOfTopic]').attr('disabled', 'disabled');
              $('#EditTopicImage').show();
              $('#EditTopicUpload').show();
              $('#EditCommonchkBox').show();
              $('#EditUpload').show();
              $('#EditTopicVideo').hide();
              // if ($(data).attr('data-LURL')!='undefined') {
              //     $('#UploadedFileName').text($(data).attr('data-LURL'));
              // }
              var url = $(data).attr('data-LURL');
              $('[id$=hdnLURL]').val(url);
              var hyp = document.getElementById('hdnLURLlink');
              hyp.text = unescape(url);
              hyp.href = unescape(url);
              hyp.innerHTML =unescape(url);
              $('#hdnLURLCaption').html('Current uploaded document: ');
            
              var DocId = $(data).attr('data-DocId');
              $('#hdnDocId').val(DocId);
                
              //$($($($($('[id$=SelectByUpload]')[0].children)[0].children)[0].children)[0].children[0]).attr('checked','checked');
              var dImg=  $(data).attr('data-DefImg');
              if(dImg=='true')
              {
                  $($($($($('[id$=SelectByUpload]')[0].children)[0].children)[0].children)[0].children[0]).attr('checked','checked');
                  //$('#divSelectImg').show();
                  $('#EditTopicUpload').hide();
                  $('#EditDefaultTopic').show();
                  
              }
              else
              {
                  //$('#divSelectImg').hide();
                  $($($($($('[id$=SelectByUpload]')[0].children)[0].children)[0].children)[1].children[0]).attr('checked','checked');
                   $('[id$=imageEditTopic]').attr('src',ImageUploadType);
                  $('#EditTopicUpload').show();
                  $('#EditDefaultTopic').hide();
              }

          }
      }
    
      function UploadViaApp(editOrcreate) {
          if (editOrcreate == 'create') {
              var m = {'name' : 'button.click','payload' : {'BoardId' : 'abc', 'CommunityId' : 'def', 'tid': '123', 'UserName' : 'def', 'LURL' : 'url', 'DocId' : 'ESxx'},'target' : {'canvas' : 'cappCreate'}}; 
              m.payload.tid = $('[id$=hdnPendingFileUploadTopicId]').val();
              //$('[id$=hdnPendingFileUploadTopicId]').val('');

              m.payload.LURL =  '';
              m.payload.DocId = '';
          }
          else {
              var m = {'name' : 'button.click','payload' : {'BoardId' : 'abc', 'CommunityId' : 'def', 'tid': '123', 'UserName' : 'def', 'LURL' : 'url', 'DocId' : 'ESxx'},'target' : {'canvas' : 'capp'}}; 
              m.payload.tid =  $('#hdnTopicId').val();
              m.payload.LURL =  $('[id$=hdnLURL]').val();
              m.payload.DocId =  $('#hdnDocId').val();
          }
          m.payload.BoardId = $.urlParam('id');
          m.payload.CommunityId = '';      
          m.payload.UserName = $('span.username').text();
          Sfdc.canvas.controller.publish(m);
          $('#hdnLURLCaption').html('');
          var hyp = document.getElementById('hdnLURLlink');
          hyp.text = '';
          hyp.href = '';
          hyp.innerHTML = '';
          //
          //$('[id$=btnRefreshUpload]').trigger('click');
            
      }

      function ShowHideEditTopicImage(data) {
          debugger
          if ($(data).val() == 'UFC') {
              $('#EditTopicUpload').show();
              $('#EditDefaultTopic').hide();
          }
          else {
              $('#EditDefaultTopic').show();
              $('#EditTopicUpload').hide();
          }

      }

      function functionSaveChanges()
      {
          var LBTags=$('#learningTags').val();
          $('[id$=txtUserTag]').val(LBTags);
      }
    
      function functionContributorsRemove(data)
      {
        
          $('#dvModalContributor').modal('show');
          var contributorId = $(data).attr('data-contrbtrID');
          $('[id$=txtContributorId]').val(contributorId);
      }

      function SaveSearchTopic(event) {
    
          var strRel = '';
            
          $('input[name="LearningSearch"]:checked').each(function () {
              if (strRel == '') {
                  strRel = $(this).val();
              }
              else {
                  strRel = strRel + ',' + $(this).val();
              }
 
          });

          if (strRel == '') {
              document.getElementById('emptySearchTopic').innerHTML = "Select at least one Content";
              //document.getElementById('emptySearchTopic').style.display = 'block';
              $('[id$=emptySearchTopic]').show();
                
          }
          else {
              $('[id$=txtSearchTopic]').val(strRel);
              //$('[id$=BtnSaveSearchTopic]').click();

              $('[id$=btnSaveSearchTopic]').click();

                
          }
    
      }

      function GetUploadPopUp(topicId)
      {
          var popUp=window.open('https://c0004438.itcs.hp.com:90/SFDCFileUpload.aspx?tid='+topicId,'popUp','width=800,height=500,toolbar=0,scrollbars=0,location=0,adressbar=0,resizable =0,alwaysRaised=yes');
          popUp.focus();
    
      }
    
    
      function GetEditUploadPopUp()
      {
            
          var Tid=$('[id$=txtEditTopicId]').val();
          var popUp=window.open('https://c0004438.itcs.hp.com:90/SFDCFileUpload.aspx?tid='+Tid,'popUp','width=800,height=500,toolbar=0,scrollbars=0,location=0,adressbar=0,resizable =0,alwaysRaised=yes');
          popUp.focus();
    
          //window.showModelDialog("https://c0004438.itcs.hp.com:88/SFDCFileUpload.aspx?tid=88",window,"status:false;dialogWidth:300px;dialogHeight:300px");
          //window.moveTo(0,0);
          //window.resizeTo(screen.width,screen.height-100);
          //self.close();
      }

      //$(document).ready(function () {
      //    // alert('herehidden ' + $('[id$=hdnPendingFileUploadTopicId]').val());
      //    // alert('msg ' + $('[id$=errTopic]').val());
      //    if ($('[id$=hdnPendingFileUploadTopicId]').val() != "") {
      //        //$('#UploadFile').modal('show');
      //        var TID=$('[id$=hdnPendingFileUploadTopicId]').val();
      //        GetUploadPopUp(TID);
                
      //    }
      //    if ($('[id$=errTopic]').val() != undefined && $('[id$=errTopic]').val() != "") {
      //        alert("File upload error: " + $('[id$=errTopic]').val());
      //        $('[id$=errTopic]').val("");
      //    }

      //});
    
      $(document).ready(function () {
            
            
          //if ($('[id$=hdnPendingFileUploadTopicId]').val() != "") {
          //    $('#UploadFile').modal('show');
                
          //}
          //if ($('[id$=errTopic]').val() != undefined && $('[id$=errTopic]').val() != "") {
          //    alert("File upload error: " + $('[id$=errTopic]').val());
          //    $('[id$=errTopic]').val("");
          //}

      });
  

      function SearchTopic(event){
           
          if (event.keyCode == 13) {
              $('#AddLearningSearch').empty();
              $('#ExternalSearch').empty();
        
              $('#TopicResult').text('0');
              $('#SearchRes').text('0');
              $('#BtnSaveSearchTopics').hide();
              var searchData = $('#txtLearningBrd').val();
              var QueryStringId = $.urlParam('id');
              if (searchData.length == 0) {
                  document.getElementById('emptySearchTopic').innerHTML = "Enter Value For Search";
                  document.getElementById('emptySearchTopic').style.display = 'block';
                  event.preventDefault();
                  event.stopPropagation();
                  return false;
              }
              else {
                  $('#divSearchTopicResult').show();
                  $('#AddLearningSearch').show();
                  $('#emptySearchTopic').hide();
                  $('[id$=emptySearchTopic]').empty();
                  document.getElementById('emptySearchTopic').style.display = 'none';
                  Visualforce.remoting.Manager.invokeAction(
               '{!$RemoteAction.EXO_AthenaEditLearningBoardDtls.LearningSearch}',
               searchData,
               QueryStringId,
                DisplaySearchLearning
            );
                  Visualforce.remoting.Manager.invokeAction(
                 '{!$RemoteAction.EXO_AthenaEditLearningBoardDtls.externalsearch}',
                 searchData,
                 QueryStringId,
                  DisplayExternalSearch
              );
              }
      
          }
      }
    
    
      function DisplayExternalSearch(result, event) 
      {
            
          $('#ExternalSearch').empty();
          $('#SearchRes').val(result.length);
          $('#SearchRes').text(result.length);
          $('#ExternalSearch').append("<div>");
            
            
          for (var icnt = 0; icnt < result.length; icnt++)
          {
              var DescSummary=result[icnt].Summary;
                
              var IdolHtml= ($.parseHTML(DescSummary)[0].data).replace('<font color=red>','').replace('</font>','')
                               
              $('#ExternalSearch').append("<div><span class='m5'> <a href="+result[icnt].Url +"  data-url="+result[icnt].Url+" id='SearchLinkUrl' />"+ 
                  " </span> <br/><span class='searchPopU'>" + result[icnt].Title  + " </span><br><span  class='LinkDesc'>"+ IdolHtml +" </span>"+
                  "<input type='hidden' class='LinkSummary' value="+"\""+result[icnt].Summary+"\""+"/><div><input type='button' data-url="+result[icnt].Url+" data-Title='" + result[icnt].Title  + "' data-Desc="+"\""+result[icnt].Summary+"\""+"  class='btnAthena btn-primary btnAthenaPopP' value='Add' onclick='CreateIdolSearchTopic(this)'/></div>"+
                  "</div><hr/> ");
                    
          }
            
          $('#ExternalSearch').append("</div>");
            
          // }
            
      }
      //Sree end

      // Suman Start code Saturday

      function ShowChangeOrder(data)
      {
          var TopicCustomCtgry = $(data).attr('data-customCtgry');
          var TopicCategoryId = $(data).attr('data-sortctgry');
          var TopicCategoryName = $(data).attr('data_sortctgryNm');
          var CatName = $(data).attr('data-ctgryname');

          $('[id$=txtOrderCategoryId]').val(TopicCategoryId);
          $('[id$=txtOrderCategoryName]').val(TopicCategoryName);
          $('[id$=hdnTopicCatName]').val(CatName);


          var LearningBoardId = $.urlParam('id');
            
          Visualforce.remoting.Manager.invokeAction('{!$RemoteAction.EXO_AthenaEditLearningBoardDtls.GetLearningBoardOrder}', LearningBoardId, TopicCategoryId,TopicCustomCtgry, RenderChangeOrderDropdown );
      }

      function RenderChangeOrderDropdown(result)
      {
          $('#list-box').empty();

          $.each(result, function (index, value) {
              $("#list-box").append($("<option></option>").val(this.LearningID).html(this.LearningName));
          });

          $('#LearningChangeOrderPopup').modal('show');
      }

      function SaveTopicsChangeOrder(data)
      {
          var strRel = '';
          $("#list-box > option").each(function()
          {
              if (strRel == '') 
              {
                  strRel = $(this).val();
              }
              else
              {
                  strRel = strRel + ',' + $(this).val();
              }
          });

          $('[id$=txtTopicChangeOrderID]').val(strRel);
      }

      function AddRelatedBoardChangeOrder()
      {
          var LearningBoardId = $.urlParam('id');
            
          Visualforce.remoting.Manager.invokeAction('{!$RemoteAction.EXO_AthenaEditLearningBoardDtls.GetRelatedLB}', LearningBoardId, RenderRelatedChangeOrderDropdown );
      }

      function RenderRelatedChangeOrderDropdown(result)
      {
          $('#slctRelatedBoard').empty();

          $.each(result, function (index, value) {
              $("#slctRelatedBoard").append($("<option></option>").val(this.LearningID).html(this.LearningName));
          });

          $('#ChangeRelatedOrder').modal('show');
      }

      function SaveRelatedChangeOrder(data)
      {
          var strRel = '';
          $("#slctRelatedBoard > option").each(function()
          {
              if (strRel == '') 
              {
                  strRel = $(this).val();
              }
              else
              {
                  strRel = strRel + ',' + $(this).val();
              }
          });

          $('[id$=txtRelatedChangeOrderID]').val(strRel);
      }

      // Script code for Topic modal popup list box

      var originalItems;
                                        
      $(document).ready(function() { 
          originalItems = $("#list-box option");
                                                            
          //$("#move-up").click(moveUp); 
          //$("#move-down").click(moveDown);
          $("#reset-list").click(resetList);
      });
                    
      function moveUp() {
          $("#list-box option:selected").each(function() {
                
              var listItem = $(this);
              var listItemPosition = $("#list-box option").index(listItem) + 1;
                                                  
              if (listItemPosition == 1) return false;
                                                  
              listItem.insertBefore(listItem.prev());
          });                           
      }
                    
      function moveDown() {
    
          var itemsCount = $("#list-box option").length;
                                        
          $($("#list-box option:selected").get().reverse()).each(function() {
              var listItem = $(this);
              var listItemPosition = $("#list-box option").index(listItem) + 1;
                                                  
              if (listItemPosition == itemsCount) return false;
                                                  
              listItem.insertAfter(listItem.next());
          });
      }
                    
      function resetList() {
          $("#list-box").html(originalItems);
      }
      // Script code for Topic modal popup list box


      // Script code for Related board modal popup list box
      var originalItems1;

      function CreateIdolSearchTopic(data)
      {
          $('#DivDuplicateIdolTName').empty(); 
          $('#DivDuplicateIdolTName').hide();
          var categoryId= $('[id$=lblCategory]').val();
          var CtgryName= $('[id$=lblCategory]').text();
          //'lblGblCtgry'
          $('[id$=TopicCtrgy]').val(categoryId);
          $('[id$=lblGblCtgry]').val(categoryId);
          $('[id$=lblGblCtgry]').text(CtgryName);
      
          $('#GlobalSearch').modal('show');
          $($($($($($('[id$=IdolSearchRadio]')[0].children)[0].children)[0].children)[0].children)[0]).attr('checked','checked');
          //$('[id$=UploadSearchUrl]').show();
          $('[id$=DefaultSearchUrl]').show();
          $('[id$=TopicCtrgy]').hide();
          $('[id$=lblGblCtgry]').show();
          //var SearchLinkUrl=$('#SearchLinkUrl').attr('data-url');
          var SearchLinkUrl=$(data).attr('data-url');
          var SearchTitle=$(data).attr('data-Title');  //Commented by Komala
          //var SearchTitle=$($(this).parent().parent()[0]).find('span.searchPopU').text();
          //var SearchTitle=$('.LinkSummary').val();
          var LinkDesc=$(data).attr('data-Desc').replace(/(<([^>]+)>)/ig,""); 
          $('[id$=SearchTopicNm]').val(SearchTitle);
          $('[id$=SearchTopicDesc]').val(LinkDesc);
          $('[id$=SearchLinkUrl]').val(SearchLinkUrl);
      }
                                        
      $(document).ready(function() {
        
          originalItems1 = $("#slctRelatedBoard option");
                                                            
          $("#btnRelatedMoveUp").click(RelatedMoveUp); 
          $("#btnRelatedMoveDown").click(RelatedMoveDown);
          $("#btnRelatedReset").click(RelatedresetList);
      });
                    
      function RelatedMoveUp() {
          $("#slctRelatedBoard option:selected").each(function() {
              var listItem = $(this);
              var listItemPosition = $("#slctRelatedBoard option").index(listItem) + 1;
                                                  
              if (listItemPosition == 1) return false;
                                                  
              listItem.insertBefore(listItem.prev());
          });                           
      }
                    
      function RelatedMoveDown() {
          var itemsCount = $("#slctRelatedBoard option").length;
                                        
          $($("#slctRelatedBoard option:selected").get().reverse()).each(function() {
              var listItem = $(this);
              var listItemPosition = $("#slctRelatedBoard option").index(listItem) + 1;
                                                  
              if (listItemPosition == itemsCount) return false;
                                                  
              listItem.insertAfter(listItem.next());
          });
      }
                    
      function RelatedresetList() {
          $("#slctRelatedBoard").html(originalItems1);
      }

      function ShowHideChatter(data) {

          if ($(data).parent().find(".icon-plus-sign-alt").hasClass("icon-plus-sign-alt")) {
              $('#chatterBoard').show();
              $(data).parent().find(".icon-plus-sign-alt").removeClass("icon-plus-sign-alt").addClass("icon-check-minus");
          }
          else {
              $('#chatterBoard').hide();
              $(data).parent().find(".icon-check-minus").removeClass("icon-check-minus").addClass("icon-plus-sign-alt");
          }



      }

      // Script code for Related board modal popup list box
         
      // Suman End code Saturday
      function UpdateTopicTags(){
            
          var topicTags = $('[id$=txtEditTags]').val();
          $('[id$=txtEditTag]').val(topicTags);

          //Validation 
          var TopicNm = $('[id$=txtEditTopicName]').val();
          var TName = $('[id$=txtHideTopic]').val();
          var TopicDescription = $('[id$=txtEditTopicDesc]').val();

          $('[id$=errorMsgForEdit]').empty();
          var flag = 0;

          if(TopicNm == '')
          {
              $('[id$=errorMsgForEdit]').append('Enter Content Name');
              $('[id$=errorMsgForEdit]').append('<br/>');
              flag = 1;
          }
          if(TopicDescription == '')
          {
              $('[id$=errorMsgForEdit]').append('Enter Content Description');
              $('[id$=errorMsgForEdit]').append('<br/>');
              flag = 1;
          }

          if(flag == 0)
          {
              if (TopicNm.trim() != TName.trim()) {
    
                  Visualforce.remoting.Manager.invokeAction(
                      '{!$RemoteAction.EXO_AthenaEditLearningBoardDtls.VerifyDuplicateTopicName}',
                      TopicNm,
                      VerifyEditTName
                  );

              }
              else {
                  $('[id$=errorMsgForEdit]').hide();   
                  $('[id$=btnEditTopic]').click();
                  return true;
              }
          }
          else
          {
              $('[id$=errorMsgForEdit]').show();   
              ScrollToRelativePosition('errorMsgForEdit');
          }
      }

      function VerifyEditTName(result,event) {
            
          $('#errorMsgForEdit').empty();
       
          if (result>0) {
            
              $('#errorMsgForEdit').append('Duplicate Content Name');
              $('#errorMsgForEdit').append('<br/>');
              $('#errorMsgForEdit').show();
              ScrollToRelativePosition('errorMsgForEdit');
              return false;
          }
        
          else {
              $('[id$=btnEditTopic]').click();
              return true;
          }
       
      }


      function funcEditBoardUpload()
      {
          $('#EditImage').modal('show');
          //$('#EditImage').empty();
          $($($($($('[id$=imgEditBoard]')[0].children)[0].children)[0].children)[0].children[0]).attr('checked','checked');
          $('#ShowHideDefault').show();
      }

      function RemoveTopicDlog()
      {
          $('#DeleteTopics').hide();
      }


      function funcVerifyDuplicateTopic(btnSave) {

           
          var TName=document.getElementById('{!$Component.EditTopic.txtTopic}').value;
          //var TName = $('#txtTopic').attr('data-TName');
          Visualforce.remoting.Manager.invokeAction(
                   '{!$RemoteAction.EXO_AthenaEditLearningBoardDtls.VerifyDuplicateTopicName}',
                   TName,
                   VerifyTName
               );
            
      }

      function VerifyTName(result,event) {
            
            
          if (result>0) {
              $('#emptyImageUpLoad').empty();
              $('#emptyImageUpLoad').append('Duplicate Content Name');
              $('#emptyImageUpLoad').append('<br/>');
              funcCreateTopic(event);
          }
          else{
              funcCreateTopic(event);
          }

       
      }

      function funcVerifyDuplicateTopicUpload(btnSave) {
            
          var TName=document.getElementById('{!$Component.EditTopic.txtTopic}').value;
          //var TName = $('#txtTopic').attr('data-TName');
          Visualforce.remoting.Manager.invokeAction(
                   '{!$RemoteAction.EXO_AthenaEditLearningBoardDtls.VerifyDuplicateTopicName}',
                   TName,
                   VerifyTUploadName
               );
      }

      function VerifyTUploadName(result,event) {
            
          $('#emptyImageUpLoad').empty();
          if (result>0) {
            
              $('#emptyImageUpLoad').append('Duplicate Content Name');
              $('#emptyImageUpLoad').append('<br/>');
              funcCreateTopicUploadDoc(event);
          }
          else{
              funcCreateTopicUploadDoc(event);
          }

       
      }


      function VerifyDuplicateTopicName(btnSave) {
            
          var TName=document.getElementById('{!$Component.EditTopic.txtTopic}').value;
          //var TName = $('#txtTopic').attr('data-TName');
          Visualforce.remoting.Manager.invokeAction(
                   '{!$RemoteAction.EXO_AthenaEditLearningBoardDtls.VerifyDuplicateTopicName}',
                   TName,
                   VerifyTopicDuplName
               );
      }

      function VerifyTopicDuplName(result,event) {
            
          $('#showDuplicateTName').empty();
          $('#showDuplicateTName').hide();
          $('#emptyImageUpLoad').hide();
          if (result>0) {
            
              $('#showDuplicateTName').append('Duplicate Content Name');
              $('#showDuplicateTName').append('<br/>');
              if ($('#showDuplicateTName')[0].children.length > 0) {
                  $("#showDuplicateTName").show();
                  $('#showDuplicateTName').css('display', 'block');
                
                  return false;
              }
          }
      }

      function AddCreateCategory() {
            
          $('[id$=txtCtgryNm]').val('');
          $('#duplicateName').hide();
          $('#AddCategory').modal('show');
      }

      function VerifyDuplicateCategoryName()
      {
          var CName = $('[id$=txtCtgryNm]').val();
          var LearningBoardId = $.urlParam('id');
          
          Visualforce.remoting.Manager.invokeAction(
                   '{!$RemoteAction.EXO_AthenaEditLearningBoardDtls.VerifyDuplicateCategoryName}',
                   CName,
                   LearningBoardId,
                   VerifyTopicDuplCategoryName
               );
      }

      function VerifyTopicDuplCategoryName(result, event) {
            
          $('#duplicateName').empty();
          if (result > 0) {

              $('#duplicateName').append('Duplicate Category Name');
              $('#duplicateName').append('<br/>');
              funcCreateCategory(event);
          }
          else {
              funcCreateCategory(event);
          }
      }
        
      function funcCreateCategory(event) {
            
          $('#duplicateName').hide();
          var CName = $('[id$=txtCtgryNm]').val();
          if (CName == '') {
              $('#duplicateName').append('Enter Category Name');
              $('#duplicateName').append('<br/>');
          }
          
          if ($('#duplicateName')[0].children.length > 0) {
              $("#duplicateName").show();
              $('#duplicateName').css('display', 'block');
              return false;
          }
          else {
              $('[id$=SaveCategory]').click();
              return true;
          }
      }

      function LoadPrivateMemberAccess() {
          var BoardId = $.urlParam('id');

          Visualforce.remoting.Manager.invokeAction(
              '{!$RemoteAction.EXO_AthenaEditLearningBoardDtls.GetRequestedMembers}',
              BoardId,
              DisplayPrivateMemberAccess
          );
      }


      function DisplayPrivateMemberAccess(result, event) {
            
          $('#divPrivateMembers').empty();

          if (result.length > 0) {

              for (var icnt = 0; icnt < result.length; icnt++) {

                  var EditPrivate = ("<div> <span class='hpit_athena_ca-item-personPhoto '><img width='50' height='50'  src=" + result[icnt].SmallPhotoUrl + " /></span><span class='m5' id=" + result[icnt].Id + ">" + result[icnt].Name + "");

                  if (result[icnt].Title != 'undefined' && result[icnt].Title != undefined) {
                      var divTitle = (" <span class='searchPopU'>" + result[icnt].Title + " </span> ");
                      EditPrivate += divTitle;
                  }

                  var nextTitle = ("</span> <div class='clearfix'>" +
                       "<span class='p05'> <input type='radio' class='mtopRadio' name='ApproveReject_" + result[icnt].Id + "' data-UserId=" + result[icnt].Id + "  value='Approve'></span><span> Approve </span>" +
                 "<span class='m10'><input type='radio' class='mtopRadio' name='ApproveReject_" + result[icnt].Id + "' value='Reject'></span><span> Reject </span>");
                  EditPrivate += nextTitle;

                  $('#divPrivateMembers').append(EditPrivate);
              }
              $('[id$=PrivateMember]').show();
          }
          else {
              $('#divPrivateMembers').append('No Members to access ');
              $('[id$=PrivateMember]').hide();
          }
      }

        
      function validatePrivateMembers(event) {

            
          var strRel = '';
          var PrivateMem = $('#divPrivateMembers')[0].children;
          var CommApprv = $('[id$=txtCommApprv]').val();
          var CommReject = $('[id$=txtCommRjct]').val();

          for (var iLoop = 0; iLoop < PrivateMem.length; iLoop++) {
             


              if (PrivateMem[iLoop].children[2].children[0].children[0].checked) {
                  var UserApprovedId = $(PrivateMem[iLoop].children[2].children[0].children[0]).attr('data-UserId');
                  if (strRel == '') {
                      strRel = UserApprovedId + '_' + CommApprv;
                  }
                  else {
                      strRel = strRel + ',' + UserApprovedId + '_' + CommApprv;
                  }

              }
              else if($(PrivateMem[iLoop].children[2].children[2].children[0])[0].checked){
                  //else if (PrivateMem[iLoop].children[2].children[1].checked) {
                  var UserRejectId = $(PrivateMem[iLoop].children[2].children[0].children[0]).attr('data-UserId');
                  if (strRel == '') {
                      strRel = UserRejectId + '_' + CommReject;
                  }
                  else {
                      strRel = strRel + ',' + UserRejectId + '_' + CommReject;
                  }

              }
          }
          $('[id$=txtPriMemAcc]').val(strRel);

          //if (strRel != '') {
          //$("[id$=PrivateMember]").css("display", "block");
          //document.getElementById('{!$Component.EditTopic.PrivateMember}').style.display = 'block';
          //  $('[id$=PrivateMember]').show();
          //}


      }

      //<!--Suman Friday Code Start -->
        

      function ValidateEditCategory(data) {
          var EditCId = $(data).attr('data-CtgryId');
          var EditCName = $(data).attr('data-CategoryName');
          $('#EditCategory').modal('show');
          $('[id$=txtEditCId]').val(EditCId);
          $('[id$=txtEditCategory]').text(EditCName);
          $('[id$=txtEditCategory]').val(EditCName);
      }
      function DeleteCommunityCtgry(data) {
          var EditCId = $(data).attr('data-CtgryId');
          var EditCName = $(data).attr('data-CategoryName');
          $('[id$=txtDeleteCId]').val(EditCId);
          $('#DeleteCategory').modal('show');
      }

      //<!--Suman Friday Code End -->

      function CreateCatChanged() {
          $('[id$=hdnTopicCatName]').val($('[id$=Ctgry] option:selected').text());
      }
      function functionTargetUrl(data) {
          var TopicID = "anchor_" + $(data).attr('data-ID');
          var TopicURL = $(data).attr('data-URL');

          var PPTTopicURL = unescape(TopicURL);

          $('[id$=' + TopicID + ']').attr('href', PPTTopicURL);
      }

      function functionWebTargetUrl(data) {

          var TopicURL = $(data).attr('data-URL');

          var href = unescape(TopicURL);

          //var href = $('[id$=InputTextURL]').val();

          if (href.indexOf('http://') > -1) {
              href = href.replace('http://', 'http://')
          }
          else if (href.indexOf('www.') > -1) {
              href = href.replace('www.', 'www.')
          }
          else if (href.indexOf('https://') > -1) {
              href = href.replace('https://', 'https://')
          }
          else if (href.indexOf('http://') <= -1 && href.indexOf('www.') <= -1) {
              href = 'http://' + href;
          }

          //var link = $('<a href="http://' + href + '" />');
          var link = $('<a href="' + href + '" />');
          link.attr('target', '_blank');
          window.open(link.attr('href'));
      }

      function ScrollToRelativePosition(positionId) {
          $("html, body").animate({ scrollTop: $('#' + positionId).offset().top }, 1000);
      }

      function OpenContributorNamePopup()
      {
          $('#dvContributorsList').empty();
          $('[id$=txtSearchUsers]').val('');
          $('[id$=dvctrbtrErrorMsg]').hide();
          $('#UserNamePopUp').modal('show');

          Visualforce.remoting.Manager.invokeAction(
                   '{!$RemoteAction.EXO_AthenaEditLearningBoardDtls.FetchContributorsList}',
                    $.urlParam('id'),
                    DisplayContributorsList);
      }

      function DisplayContributorsList(result, event)
      {
          var resultSet = JSON.stringify(result);

          $('#hdnSearchResult').val(resultSet);

          if (result.length > 0)
          {
              for (var icnt = 0; icnt < result.length; icnt++)
              {
                  $('#dvContributorsList').append("<div id='trigger' ><span><input type='radio' name='RelatedContributorSearch' value=" + result[icnt].Id + "  /></span><span class='m5' id=" + result[icnt].Id + ">" + result[icnt].Name + "</span> <div>");
              }
          }
          $('#txtSearchUsers').focus();
      }

      function SaveOrAddContributor(data) 
      {
          var strRel = '';

          $('input[name="RelatedContributorSearch"]:checked').each(function () {
              if (strRel == '') {
                  strRel = $(this).val();
              }
              else {
                  strRel = strRel + ',' + $(this).val();
              }
          });

                
          $('[id$=hdncontributorlist]').val(strRel);

          if (strRel == '')
          {
              $('[id$=dvctrbtrErrorMsg]').empty();
              $('[id$=dvctrbtrErrorMsg]').append('Select at least one user');
              $('[id$=dvctrbtrErrorMsg]').append('<br/>');
              $('[id$=dvctrbtrErrorMsg]').show();

              event.preventDefault();
              return false;
          }
          else
          {
              $('[id$=dvctrbtrErrorMsg]').hide();
              $('[id$=btnSaveContributor]').click();
          }
      }

      function OpenChangeNamePopup()
      {
          $('#divChangeOwnerResult').empty();
          $('[id$=txtSearchOwner]').val('');
          $('[id$=spnChangeOwnerErrorMsg]').hide();
          $('#dvChangeOwnerModal').modal('show');

          Visualforce.remoting.Manager.invokeAction(
                   '{!$RemoteAction.EXO_AthenaEditLearningBoardDtls.FetchContributorsList}',
                    $.urlParam('id'),
                    DisplayOwnersList);
      }

      function DisplayOwnersList(result, event)
      {
          var resultSet = JSON.stringify(result);

          $('#txtOwnerSearchResult').val(resultSet);

          if (result.length > 0)
          {
              for (var icnt = 0; icnt < result.length; icnt++)
              {
                  $('#divChangeOwnerResult').append("<div id='trigger' ><span><input type='radio' name='RelatedOwnerSearch' value=" + result[icnt].Id + "  /></span><span class='m5' id=" + result[icnt].Id + ">" + result[icnt].Name + "</span> <div>");
              }
          }
          $('#txtSearchOwner').focus();
      }

      function SaveOrAddOwner() 
      {
          var strRel = '';

          $('input[name="RelatedOwnerSearch"]:checked').each(function () {
              if (strRel == '') {
                  strRel = $(this).val();
              }
          });
                
          $('[id$=txtChangeOwnerId]').val(strRel);

          if (strRel == '')
          {
              $('[id$=spnChangeOwnerErrorMsg]').empty();
              $('[id$=spnChangeOwnerErrorMsg]').append('Select at least one user');
              $('[id$=spnChangeOwnerErrorMsg]').append('<br/>');
              $('[id$=spnChangeOwnerErrorMsg]').show();

              event.preventDefault();
              return false;
          }
          else
          {
              $('[id$=spnChangeOwnerErrorMsg]').hide();
              $('[id$=btnSaveOrUpdateOwner]').click();
          }
      }

      function NavigateUrl(data) {

            
          var TopicID = "linkDoc_" + $(data).attr('data-ID');
          var TopicURL = $(data).attr('Data-Url');

          var PPTTopicURL = unescape(TopicURL);

          $('[id$=' + TopicID + ']').attr('href', PPTTopicURL);
      }

      function functionTextSearchUser(event)
      {
          if (event.keyCode == 13)
          {
              event.preventDefault();
              return false;
          }
      }

      function OpenAssociatedModalPopUp(data)
      {
          var DocType = $(data).attr('Data-DocType');
          var Url = $(data).attr('Data-Url');

          if(DocType == 'PDF')
          {
              ShowPDF(Url);
          }
          else if(DocType == 'PPT')
          {
              ShowPPTX(Url);
          }
          else if(DocType == 'DOC')
          {

          }
          else if(DocType == 'XLS')
          {
              ShowXLSX(Url);
          }
          else if(DocType == 'TXT')
          {
              ShowTXT(Url);
          }
          else if(DocType == 'OTHER')
          {
              ShowHTML(Url);
          }
      }

      function ShowPDF(data) {
            
          //var pdfURL = $(data).attr('Data-Url');

          document.getElementById('modalPreviewRequired').style.display = 'block';
          document.getElementById('cappPDF').style.display = 'block';
          document.getElementById('cappTXT').style.display = 'none';
          document.getElementById('cappXLSX').style.display = 'none';
          document.getElementById('cappHTML').style.display = 'none';
          document.getElementById('cappDOCX').style.display = 'none';
          document.getElementById('cappPPT').style.display = 'none';

          var m = { 'name': 'button.click', 'payload': { 'url': 'abc', 'contenttype': 'def' }, 'target': { 'canvas': 'cappPDF' } };

          m.payload.url = data;
          m.payload.contenttype = 'application/pdf';
          Sfdc.canvas.controller.publish(m);
          $('#modalPreviewRequired').modal('show');
      }

      function ShowDOCX(data) {

          //var pdfURL = $(data).attr('Data-Url');

          document.getElementById('modalPreviewRequired').style.display = 'block';
          document.getElementById('cappPDF').style.display = 'none';
          document.getElementById('cappTXT').style.display = 'none';
          document.getElementById('cappXLSX').style.display = 'none';
          document.getElementById('cappHTML').style.display = 'none';
          document.getElementById('cappDOCX').style.display = 'block';
          document.getElementById('cappPPT').style.display = 'none';

          var m = { 'name': 'button.click', 'payload': { 'url': 'abc', 'contenttype': 'def' }, 'target': { 'canvas': 'cappDOCX' } };

          m.payload.url = data;
          m.payload.contenttype = 'application/vnd.openxmlformats-officedocument.wordprocessingml.document';
          Sfdc.canvas.controller.publish(m);
          $('#modalPreviewRequired').modal('show');
      }
      function ShowPPTX(data) {
            
          //var pdfURL = $(data).attr('Data-Url');

          document.getElementById('modalPreviewRequired').style.display = 'block';
          document.getElementById('cappPDF').style.display = 'none';
          document.getElementById('cappTXT').style.display = 'none';
          document.getElementById('cappXLSX').style.display = 'none';
          document.getElementById('cappHTML').style.display = 'none';
          document.getElementById('cappDOCX').style.display = 'none';
          document.getElementById('cappPPT').style.display = 'block';


          var m = { 'name': 'button.click', 'payload': { 'url': 'abc', 'contenttype': 'def' }, 'target': { 'canvas': 'cappPPTX' } };

          m.payload.url = data;
          m.payload.contenttype = 'application/vnd.openxmlformats-officedocument.presentationml.presentation';
          Sfdc.canvas.controller.publish(m);

          $('#modalPreviewRequired').modal('show');
      }

      function ShowXLSX(data) {

          //var pdfURL = $(data).attr('Data-Url');

          document.getElementById('modalPreviewRequired').style.display = 'block';
          document.getElementById('cappPDF').style.display = 'none';
          document.getElementById('cappTXT').style.display = 'none';
          document.getElementById('cappXLSX').style.display = 'block';
          document.getElementById('cappHTML').style.display = 'none';
          document.getElementById('cappDOCX').style.display = 'none';
          document.getElementById('cappPPT').style.display = 'none';

          var m = { 'name': 'button.click', 'payload': { 'url': 'abc', 'contenttype': 'def' }, 'target': { 'canvas': 'cappXLSX' } };

          m.payload.url = data;
          m.payload.contenttype = 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet';
          Sfdc.canvas.controller.publish(m);
      }

      function ShowHTML(data) {
            

          //var pdfURL = $(data).attr('Data-Url');

          document.getElementById('modalPreviewRequired').style.display = 'block';
          document.getElementById('cappPDF').style.display = 'none';
          document.getElementById('cappTXT').style.display = 'none';
          document.getElementById('cappXLSX').style.display = 'none';
          document.getElementById('cappHTML').style.display = 'block';
          document.getElementById('cappDOCX').style.display = 'none';
          document.getElementById('cappPPT').style.display = 'none';

          var m = { 'name': 'button.click', 'payload': { 'url': 'abc', 'contenttype': 'def' }, 'target': { 'canvas': 'cappHTML' } };

          //var urlText = pdfURL;
          //if (url.indexOf("https") == -1) {
          //    urlText = url.replace("http:", "https:");
          //}

          m.payload.url = data;
          m.payload.contenttype = 'html';
          Sfdc.canvas.controller.publish(m);
          $('#modalPreviewRequired').modal('show');
      }

      function ShowTXT(url) {
            
          document.getElementById('modalPreviewRequired').style.display = 'block';
          document.getElementById('cappPDF').style.display = 'none';
          document.getElementById('cappTXT').style.display = 'block';
          document.getElementById('cappXLSX').style.display = 'none';
          document.getElementById('cappHTML').style.display = 'none';
          document.getElementById('cappDOCX').style.display = 'none';
          document.getElementById('cappPPT').style.display = 'none';

          var m = { 'name': 'button.click', 'payload': { 'url': 'abc', 'contenttype': 'def' }, 'target': { 'canvas': 'cappTXT' } };

          m.payload.url = url;
          m.payload.contenttype = 'text/plain';
          Sfdc.canvas.controller.publish(m);
          $('#modalPreviewRequired').modal('show');
      }

      function functionOpenVideo(data) {

          var videoNameHeading = $(data).attr('Data-Name');

          var videoURL = $(data).attr('Data-Url');

          $('#frameVideo').attr('src', videoURL);
          $('#videoHeading').text(videoNameHeading);

          $('#VideoPopUp').modal('show');

      }
        
    </script>
  </body>
  <!-- END BODY -->
  </html>
</apex:page>