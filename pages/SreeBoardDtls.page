<apex:page controller="SreeBoardDtls" showheader="false" standardstylesheets="true" doctype="html-5.0" applybodytag="false" applyhtmltag="false">
<!--[if IE 8]> <html lang="en" class="ie8"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9"> <![endif]-->
<!--[if !IE]><!-->
<html lang="en">
<!--<![endif]-->
<!-- BEGIN HEAD -->
<head>
    <meta charset="utf-8" />
    <title>Edit</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <meta content="" name="description" />
    <meta content="" name="hp" />
    
    <apex:stylesheet value="{!URLFOR($Resource.assets_athena, 'assets_athena/bootstrap/css/bootstrap.min.css')}" />
    <apex:stylesheet value="{!URLFOR($Resource.assets_athena, 'assets_athena/bootstrap/css/bootstrap-responsive.min.css')}" />
    <apex:stylesheet value="{!URLFOR($Resource.assets_athena, 'assets_athena/font-awesome/css/font-awesome.css')}" />
    <apex:stylesheet value="{!URLFOR($Resource.css_athena, 'css_athena/style.css')}" />
    <apex:stylesheet value="{!URLFOR($Resource.css_athena, 'css_athena/style-responsive.css')}" />
    <apex:stylesheet value="{!URLFOR($Resource.css_athena, 'css_athena/style-default.css')}" />

    
</head>
<!-- END HEAD -->
<!-- BEGIN BODY -->
<body>
    
    <!-- BEGIN HEADER -->
<header>
  <div class="navbar">
    <div class="navbar-inner">
      <div class="container-fluid"> <a class="HpLogo"> 
          <apex:image url="{!URLFOR($Resource.img_athena, 'img_athena/HP_Blue_Logo.png')}" alt="HP Logo"/></a>
        <div class="nav mtop10">
          <h1 class="h1fontS">Social Learning Platform</h1>
          <h3 class="h3fontS">Learning on your terms</h3>
        </div>
        <ul class="nav pull-right top-menu mtop16">
          <!-- BEGIN USER LOGIN DROPDOWN -->
          <li class="dropdown"> <a href="#" class="dropdown-toggle" data-toggle="dropdown"> Welcome <span class="username colorBlue">{!LoggedinUserDtls.Name}</span> <span><apex:image url="{!LoggedinUserDtls.FullPhotoUrl}" styleClass="userImage" alt="no_username"/></span> 
            <!--<b class="caret"></b>--> 
            </a>
            <ul class="dropdown-menu extended logout">
              <li><a href="https://{!getSfInstance}/apex/AthenaUserProfile?id={!LoggedinUserDtls.id}">My Profile</a></li>
              <li><a href="https://{!getSfInstance}/secur/logout.jsp">Log Out</a></li>
            </ul>
          </li>
          <!-- END USER LOGIN DROPDOWN -->
        </ul>
        
         <apex:form id="UPform">
            <div class="nav notify-row"> <span class="add-on icon-search topSearchIcon topSearch"></span>
              <apex:inputText id="searchText" styleClass="typeahead-devs" size="20" value="{!strSearchValue}" html-Placeholder="Please Enter Search Text" onkeydown="SubmitSearchForm(event);"/>              
              <apex:commandButton action="{!NavigateToGlobalSearch}" value="Search" id="searchButton" title="Click to Search for Learning Board" style="display:none;"/>
            </div>
        </apex:form>

        
         
      </div>
         
        <div class="alert alert-error span4 pull-right mr30" style="display:none" id="err_msg">
       </div>
    </div>
  </div>
  <div class="navbar">
    <div class="navbar-inner">
      <div class="container-fluid menunavBar"> <a class="icon-home topNavIcon" href="https://{!getSfInstance}/apex/AthenaSocialLearning" title="Home"></a> <a class="icon-book topNavIcon"  href="https://{!getSfInstance}/apex/AthenaSocialLearning" title="Library"></a> 
          <apex:OutputPanel rendered="{!IsLearningBoardCreator}"> 
              <a class="topNavIconC" href="https://{!getSfInstance}/apex/AthenacreatelearningBoard" title="Create Board"></a>
         </apex:OutputPanel> 
           <a class="icon-question-sign topNavIcon pull-right" href="https://ea2013.sharepoint.hp.com/teams/esplm/SitePages/Social Learning.aspx" target="_blank" title="Help"></a>
      </div>
        
    </div>
  </div>
</header>
<!-- END HEADER --> 
<!-- BEGIN CONTAINER -->
<div id="container" class="row-fluid"> 
  <!-- BEGIN PAGE -->
  <div id="main-content">
  <div class="BDbg">
    <div class="BDheading">
        <div class="span8"><h2>{!LearningBoardDtls.LBName}</h2></div>
      
      <div class="span4 BoardFormbtn" >
      <apex:outputPanel rendered="{!!isloggedUser}">
              <apex:form >
                
                     <apex:commandButton id="btnfollow" value="Follow" styleclass="btnAthena btn-primary shareBtn"  action="{!followBoard}" rendered="{!!IsFollowBoard}"/>
                     <apex:commandButton id="btnUnfollow" value="Unfollow" styleclass="btnAthena btn-primary shareBtn"  action="{!unfollowBoard}" rendered="{!IsFollowBoard}"/>
                
              </apex:form>
      </apex:outputPanel>
      
              <apex:form >
                  <apex:outputPanel rendered="{!IsBoardEditor}">
                       <a id="btnEditor" class="btnAthena btn-primary" href="https://{!getSfInstance}/apex/AthenaEditLearningBoardDtls?id={!LearningBoardDtls.LbId}">Edit Board</a>
                  </apex:outputPanel>
              </apex:form>
     </div>
    </div>
    <div class="container-fluid">
      <div class="row-fluid mtop10">
        <div class="span8">
          <div class="PositionR"> 
              <apex:outputPanel rendered="{!!LearningBoardDtls.StaticImage}"> 
            <!-- <img src="data:{!LearningBoardDtls.AttContentType};base64,{!LearningBoardDtls.Attbody}" /> -->
            <apex:image url="{!URLFOR($Action.Attachment.Download, LearningBoardDtls.AttachmentId)}" styleClass="BoardDetailImage" />
          </apex:outputPanel>
          <apex:outputPanel rendered="{!LearningBoardDtls.StaticImage}">
                              <img src='{!LearningBoardDtls.DefaultImageName}' class="BoardDetailImage" />
           <!-- <apex:image url="{!URLFOR($Resource.athena_images, 'images/antena_defaultImgLearning.png')}"/>-->
          </apex:outputPanel>

            <div class="BoardTit">
              <div class="span8">
                <h4>{!LearningBoardDtls.LBSubTitle}</h4>
              </div>
              <div class="span4">

                  <apex:form styleClass="EfollowForm" >
                    <apex:outputPanel rendered="{!!isloggedUser}">
                        <apex:commandButton id="CommandButton1" value="Follow" styleclass="btnAthena btn-primary shareBtn m14"  action="{!followOwner}" rendered="{!!IsFollowOwner}"/>
                        <apex:commandButton id="CommandButton2" value="Unfollow" styleclass="btnAthena btn-primary shareBtn m14"  action="{!unfollowOwner}" rendered="{!IsFollowOwner}"/>
                    </apex:outputPanel>
                </apex:form>

                <div class="hpit_athena_ca-item-personName colorWhite mtop10 pull-right"> <a class="hpit_athena_ca_itemLink" href="/apex/AthenaUserProfile?id={!LearningBoardOwnerDtls.id}">  {!IF(len(LearningBoardOwnerDtls.Name)>20,(LEFT(LearningBoardOwnerDtls.Name,20) + '...'),LearningBoardOwnerDtls.Name)}</a> </div>
                <div class="hpit_athena_ca-item-personPhoto mtop10 pull-right"> 
                
                    <apex:image url="{!LearningBoardOwnerDtls.FullPhotoUrl}" width="35" height="35" alt="no_username_small."/>
                </div>
                
                
                 
              </div>
            </div>
          </div>
        </div>
        <div class="span4">
            <div class="BDdetailHeight">
                <p>
                     {!LearningBoardDtls.LBShortDescription}
                    <apex:outputPanel rendered="{!IsReadMore}">
                        <a class="" data-toggle="modal" href="#LBreadmore"> Read more </a>
                    </apex:outputPanel>
                </p>
             <div class="tagBack" style="display:none;">
                 <ul class="tags">
                    <apex:repeat value="{!LBAssociatedTags}" var="asTag" > 
                        <li class="tag"> {!asTag} </li>
                    </apex:repeat>
                 </ul>
             <!-- <a class="pull-right m5">More tags</a>  -->
             </div>
            </div>

<div id="LBreadmore" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel1" aria-hidden="true" data-backdrop="static">
  <div class="modal-header">
    <h3>Learning Board Description</h3>
  </div>
  <div class="modal-body">
    <p> 
        {!LearningBoardDtls.LBDescription}

    </p>
  </div>
  <div class="modal-footer">
    <button class="btnAthena" data-dismiss="modal" aria-hidden="true">Cancel</button>
    
  </div>
</div>


            


<div id="TopicReadMore" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel1" aria-hidden="true" data-backdrop="static">
  <div class="modal-header">
    <h3>Learning  Description</h3>
  </div>
  <div class="modal-body">
    <div id="Topic"></div>
  </div>
  <div class="modal-footer">
    <button class="btnAthena" data-dismiss="modal" aria-hidden="true">Cancel</button>
    
  </div>
</div>
            <div class="BoardBtns">
               <!--<a class="btnAthena btn-primary " href="mailto:?Subject={!LoggedinUserDtls.Name} thought you might be interested in the {!LearningBoardDtls.LBName} learning board. &Body=Hi,%0D%0A{!LoggedinUserDtls.Name} thought that you may be interested in this learning board!%0D%0A{!LearningBoardDtls.LBName}%0D%0A{!LearningBoardDtls.LBDescription} %0D%0A  https://{!getSfInstance}/apex/SreeBoardDtls?id={!LearningBoardDtls.LBid}"><span class="icon-share"></span> Share</a>-->
                <a class="btnAthena btn-primary" id="lrngBoardShare" onclick="OpenLearningBoardShare()"><span class="icon-share"></span> Share</a>
          </div>

            <div id="DivShareModelPopup" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel1" aria-hidden="true">
                <apex:form id="formShareHeader">
                  <div class="modal-header">
                    <h3>Share</h3>
                  </div>
                  <div class="modal-body">
                    <div class="span5 ml0">
                      <label>User Email</label>
                    </div>
                    <div class="span5"> 
                        <span>
                            <apex:inputText id="txtEmailinputUser" value="{!HeaderShareEmail}" />
                        </span>
                    </div>
                  </div>
                  <div class="modal-footer">
                      <button class="btnAthena EbtnLess" data-dismiss="modal" aria-hidden="true"  onclick="funcClearShareEamil()" >Cancel</button>
                      <apex:commandLink Styleclass="btnAthena btn-primary btnAthenaPopP" action="{!ShareLearningBoard}" value="Send" >
                           <apex:param name="q" value="{!LearningBoardDtls.LBid}" assignTo="{!ShareHeaderBoardId}"/>
                      </apex:commandLink>
                  </div>
                </apex:form>
           </div>
        </div>
      </div>
    </div>
  </div>

  <div class="container-fluid">
      <div class="row-fluid mtop20">
        <div class="span8">
            <div class="panel-group" id="Div1">
           
            <div class="" id="Div2">
                <div class='panel panel-default'> 
          <div class='panel-heading'>
          <h4 class='panel-title'> 
              <a onclick="ShowHideChatter(this)"  class='accordion-toggle a_underNone' data-toggle='collapse' data-parent='#accordion'> <span class='icon-plus-sign-alt'></span>
               <span>What's on your mind? <span><apex:image url="{!URLFOR($Resource.img_athena, 'img_athena/hpChatIcon.png')}" alt="hpChatIcon"/> </span></span></a></h4>

      </div>
          
          </div>
              <div id="DivChatterLB"  style="display:none">
                  <chatter:feed entityid="{!LearningBoardDtls.LBid}" />
              </div>
                </div>
              </div>


          <div class="panel-group" id="accordion">
           
            <div class="" id="DivLearnings">
              
            </div>
          </div>
        </div>
        <div class="span4">
          <div class="row-fluid ">
            <div class="hpit_athena_rightDiv span12"> 
                Followers
                <hr />
                <apex:repeat value="{!Followers}" var="follow" > 
                    <a href="https://{!getSfInstance}/apex/AthenaUserProfile?id={!follow.id}" title="{!follow.Name}" class="hpit_athena_ca-item-personPhoto"> <apex:image width="35" height="35" url="{!follow.FullPhotoUrl}"  /></a>
                </apex:repeat>
            </div>
          </div>
          <div class="row-fluid ">
            <div class="hpit_athena_rightDiv span12"> Contributors 
               <hr />
             
                  <apex:repeat value="{!Contributors}" var="cont" > 
                 <a href="https://{!getSfInstance}/apex/AthenaUserProfile?id={!cont.id}" title="{!cont.Name}" class="hpit_athena_ca-item-personPhoto"> <apex:image width="35" height="35" url="{!cont.FullPhotoUrl}"  /></a>
                </apex:repeat>
              </div>
          </div>
          <div class="row-fluid ">
            <div class="hpit_athena_rightDiv span12"> <h3>Related boards</h3> 
                <hr />
              
          <apex:repeat value="{!RelatedLearningBoards}" var="rlb" > <a class="hpit_athena_ca_itemLink" href="/apex/SreeBoardDtls?id={!rlb.Lbid}">
            <p class="hpit_athena_rightHeading" style="margin:0"> <span style="font-size:15px" >{!rlb.LBName}</span> </p>
            </a>
            <p style="margin:0"><span style="color:#7A7878"> {!rlb.LBOwnerName}</span></p>
            <a class="hpit_athena_ca_itemLink" href="/apex/SreeBoardDtls?id={!rlb.Lbid}">
            <p>
              <apex:outputPanel rendered="{!!rlb.StaticImage}"> 
                <!-- <img src="data:{!rlb.AttContentType};base64,{!rlb.Attbody}"  width="220" height="162"/> -->
                <apex:image url="{!URLFOR($Action.Attachment.Download, rlb.AttachmentId)}"  width="220" height="162" />
              </apex:outputPanel>
              <apex:outputPanel rendered="{!rlb.StaticImage}">
                                            <img src='{!rlb.DefaultImageName}' width="220" height="162"/>
               <!-- <apex:image url="{!URLFOR($Resource.athena_images, 'images/antena_defaultImgLearning.png')}" width="220" height="162"/>-->
              </apex:outputPanel>
            </p>
            </a>
            <hr />
          </apex:repeat>
          <!--  <p> Sales goals to the next level</p> --> 
        </div>
          </div>
        </div>
      </div>
    </div>
</div>
  <!-- END PAGE --> 
</div>

    <div class="slide-out-div">
        <a class="handle" href="http://link-for-non-js-users">Content</a>
        <apex:form id="ChatterFeedBack">
                <p>What do you like?</p>
            <apex:inputText Styleclass="inputW" value="{!ChatterLike}" id="theTextInput"/>
            <p>What need to be improved?</p>
        <apex:inputTextarea id="newDesc" Styleclass="inputW" value="{!ChatterImprovement}"/><p/>
        <apex:commandButton value="Send" Styleclass="btnAthena shareBtn btn-primary" action="{!AddToChatterComment}"/>
   
            </apex:form>
    </div>

    <div id="DivTopicShareModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel1" aria-hidden="true">
                <apex:form id="formTopic">
                  <div class="modal-header">
                    <h3>Share</h3>
                  </div>
                  <div class="modal-body">
                      <div style="display:none">
                          <apex:inputText id="txtTopicId" value="{!ShareTopicId}" />
                      </div>
                    <div class="span5 ml0">
                      <label>User Email</label>
                    </div>
                    <div class="span5"> 
                        <span>
                            <apex:inputText id="txtInputEmailTopic" value="{!HeaderShareEmail}" />
                        </span>
                    </div>
                  </div>
                  <div class="modal-footer">
                      <button class="btnAthena EbtnLess" data-dismiss="modal" aria-hidden="true">Cancel</button>
                      <apex:commandLink Styleclass="btnAthena btn-primary btnAthenaPopP" action="{!ShareTopicLearningBoard}" value="Send" >
                      </apex:commandLink>
                  </div>
                </apex:form>
    </div>

<!-- END CONTAINER --> 

<!-- BEGIN FOOTER -->
<div id="footer"> Â© Hewlett-Packard Development Company, L.P.     |     HP Restricted </div>
<!-- END FOOTER --> 

    <!-- BEGIN JAVASCRIPTS --> 
<!-- Load javascripts at bottom, this will reduce page load time
         --> 
    <apex:includeScript value="{!URLFOR($Resource.js_athena, 'js_athena/jquery-1.8.3.min.js')}"/>
    <apex:includeScript value="{!URLFOR($Resource.assets_athena, 'assets_athena/bootstrap/js/bootstrap.js')}"/>
    <apex:includeScript value="{!URLFOR($Resource.assets_athena, 'assets_athena/jquery-ui/jQuery_UI_1_10_3.js')}"/>
    <apex:includeScript value="{!URLFOR($Resource.js_athena, 'js_athena/typeahead.js')}"/>
    <apex:includeScript value="{!URLFOR($Resource.js_athena, 'js_athena/jquery.feedback_me.js')}"/>
    <!-- ie8 fixes -->
    <!--[if lt IE 9]>
   <apex:includeScript value="{!URLFOR($Resource.js_athena, 'js_athena/excanvas.js')}"/>
   <apex:includeScript value="{!URLFOR($Resource.js_athena, 'js_athena/respond.js')}"/>
   <![endif]-->

    <!--common script for all pages-->
    <apex:includeScript value="{!URLFOR($Resource.js_athena, 'js_athena/common-scripts.js')}"/>

    <!-- END JAVASCRIPTS -->   
    <script  type="text/javascript">
        function TopicDialog(data) {
            var Description = $(data).attr('data-topicDesc');


        }


        $('.popovers').popover();

        $('#accordion1').collapse({
            toggle: false
        }).on('show', function (e) {
            $(e.target).parent().find(".icon-chevron-down").removeClass("icon-chevron-down").addClass("icon-chevron-up");
        }).on('hide', function (e) {
            $(e.target).parent().find(".icon-chevron-up").removeClass("icon-chevron-up").addClass("icon-chevron-down");
        });

        // Utility; parse out parameter by name from URL query string
        $.urlParam = function (name) {

            var resultData = '';
            var results = new RegExp('[\\?&]' + name + '=([^&#]*)')
                .exec(window.location.href);
            if (results == null) {
                resultData = '';
            }
            else {
                resultData = results[1] || 0;
            }
            return resultData;
        }



        function LoadLearningBoard() {
            var LearningBoardId = $.urlParam('id');

            Visualforce.remoting.Manager.invokeAction(
                '{!$RemoteAction.SreeBoardDtls.getLrngWithCat}',
                LearningBoardId,
                DisplayLearnings
            );
        }

        function ShowHideCategory(data) {

            if ($(data).parent().find(".icon-plus-sign-alt").hasClass("icon-plus-sign-alt")) {
                $(data).parent().find(".icon-plus-sign-alt").removeClass("icon-plus-sign-alt").addClass("icon-check-minus");
            }
            else {
                $(data).parent().find(".icon-check-minus").removeClass("icon-check-minus").addClass("icon-plus-sign-alt");
            }



        }

        function ShowHideChatter(data) {

            if ($(data).parent().find(".icon-plus-sign-alt").hasClass("icon-plus-sign-alt")) {
                $('#DivChatterLB').show();
                $(data).parent().find(".icon-plus-sign-alt").removeClass("icon-plus-sign-alt").addClass("icon-check-minus");
            }
            else {
                $('#DivChatterLB').hide();
                $(data).parent().find(".icon-check-minus").removeClass("icon-check-minus").addClass("icon-plus-sign-alt");
            }



        }

        function getQueryString(sParam) {

            var sPageURL = window.location.search.substring(1);
            var sURLVariables = sPageURL.split('&');

            for (var i = 0; i < sURLVariables.length; i++) {
                var sParameterName = sURLVariables[i].split('=');
                if (sParameterName[0].toUpperCase() == sParam.toUpperCase()) {
                    return sParameterName[1];
                }
            }
        }

        function in_array(array, id) {

            for (var i = 0; i < array.length; i++) {
                if (array[i].Lid == id) {
                    return true;
                }
            }
            return false;
        }

        function DisplayLearnings(result, event) {



            $('#DivLearnings').empty();
            var TopicId = getQueryString('topicId');

            //var TopicId = $.urlParam('topicId');
            if (TopicId != undefined) {

                for (var icount = 0; icount < result.length; icount++) {
                    if (result[icount].lstlrngs.length > 0) {

                        if (in_array(result[icount].lstlrngs, TopicId)) {

                            var spacehref = result[icount].CategoryName.replace(/ /g, "_");
                            var hrefurl = '#' + spacehref;
                            var generateLearning = ("<div class='panel panel-default'> <div class='panel-heading'>" +
                            "<h4 class='panel-title'> <a   onclick='ShowHideCategory(this)'  class='accordion-toggle a_underNone' data-toggle='collapse' data-parent='#accordion' href='" + hrefurl + "'> <span class='icon-check-minus'></span> " + result[icount].CategoryName + " </a>  </h4>" +
                                  "</div>");
                            $('#DivLearnings').append(generateLearning);
                            var generateL = ("<div id='" + spacehref + "' class='panel-collapse collapse'>");

                            $('#DivLearnings').append(generateL);


                            for (var icnt = 0; icnt < result[icount].lstlrngs.length; icnt++) {
                                if (result[icount].lstlrngs[icnt].Lid == TopicId) {

                                    $('#DivLearnings').append("<hr />");
                                }

                                if (result[icount].lstlrngs[icnt].LType == 'Text') {

                                    var ShareTopicID = result[icount].lstlrngs[icnt].Lid;

                                    var GenerateUrl = (
                                           "<div class='panel-body topicEdit clearB'>" +
                                                     " <div class='span12 borderB' >" +
                                                      "  <div class='span4'>" +
                                                       "   <div class='m10 ml0'> <img src=" + result[icount].lstlrngs[icnt].DefaultImageName + " class='EBaddTopicL' />  </div>" +
                                                        "</div>" +
                                                        "<div class='span8'>" +
                                                         " <div class='m10'>" +
                                                          "  <h4>" + result[icount].lstlrngs[icnt].LName + " </h4>" +
                                                           " <p> " + result[icount].lstlrngs[icnt].LDescription + "  </p>" +
                                                            "<div>" +
                                                             "<div class='tagBack' style='display:none;'><ul class='tags'><li class='tag'>" + result[icount].lstlrngs[icnt].Tags + " </li></ul></div>" +
                                                             " <button class='demo btnAthena btn-primary pull-right' data-TopicId='" + ShareTopicID + "' onclick='OpenTopicSharePopup(this)'>Share</button>" +
                                                              " <span class='detailDoc'><img src=" + result[icount].lstlrngs[icnt].hpsharedIcon + " class='pull-right mrl' /></span> </div>" +
                                                          "</div>" +
                                                        "</div>" +
                                                      "</div>" +
                                                      "</div>");
                                    $('#DivLearnings').append(GenerateUrl);

                                }
                                else if (result[icount].lstlrngs[icnt].LType == 'Video') {
                                    var ShareTopicID = result[icount].lstlrngs[icnt].Lid;
                                    var GenerateUrl = (
                                           "<div class='panel-body topicEdit clearB'>" +
                                                     " <div class='span12 borderB' >" +
                                                      "  <div class='span4'>" +
                                                       "   <div class='m10 ml0'> <img src=" + result[icount].lstlrngs[icnt].DefaultImageName + " class='EBaddTopicL'  />  </div>" +
                                                        "</div>" +
                                                        "<div class='span8'>" +
                                                         " <div class='m10'>" +
                                                          "  <h4>" + result[icount].lstlrngs[icnt].LName + " </h4>" +
                                                           " <p> " + result[icount].lstlrngs[icnt].LDescription + "  </p>" +
                                                            "<div>" +
                                                             "<div class='tagBack' style='display:none;'><ul class='tags'><li class='tag'>" + result[icount].lstlrngs[icnt].Tags + " </li></ul></div>" +
                                                             " <button class='btnAthena btn-primary pull-right' data-TopicId='" + ShareTopicID + "' onclick='OpenTopicSharePopup(this)'><span class='icon-share'></span> Share</button>" +
                                                              " <span class='detailDoc'><img src=" + result[icount].lstlrngs[icnt].hpsharedIcon + " class='pull-right mrl' /></span> </div>" +
                                                          "</div>" +
                                                        "</div>" +
                                                      "</div>" +
                                                      "</div>");
                                    $('#DivLearnings').append(GenerateUrl);

                                }

                                else if ((result[icount].lstlrngs[icnt].LType == 'Link or Document') || (result[icount].lstlrngs[icnt].LType == 'Upload Document')) {

                                    if (result[icount].lstlrngs[icnt].DocType == 'PDF') {
                                        var ShareTopicID = result[icount].lstlrngs[icnt].Lid;
                                        var generateLText = ("<div class='panel-body topicEdit clearB'>" +
                                                              " <div class='span12 borderB'>" +
                                                               "  <div class='span4'>" +
                                                                "   <div class='m10 ml0'> <iframe src=" + result[icount].lstlrngs[icnt].LURL + " class='hpit_athena_detailPostIfram EBaddTopicLF' frameborder='0'   scrolling='no' style='border:1px solid #999999'></iframe>  </div>" +
                                                                 "</div>" +
                                                                 "<div class='span8'>" +
                                                                  " <div class='m10'>" +
                                                                   "  <h4>" + result[icount].lstlrngs[icnt].LName + " </h4>" +
                                                                    " <p> " + result[icount].lstlrngs[icnt].LDescription + "  </p>" +
                                                                     "<div>" +
                                                                      "<div class='tagBack' style='display:none;'><ul class='tags'><li class='tag'>" + result[icount].lstlrngs[icnt].Tags + " </li></ul></div>" +
                                                                      " <button class='btnAthena btn-primary pull-right' data-TopicId='" + ShareTopicID + "' onclick='OpenTopicSharePopup(this)'><span class='icon-share'></span> Share</button>" +
                                                                       "<span class='detailDoc'> <a target='_blank' href=" + result[icount].lstlrngs[icnt].LURL + "> <img class='mrl' width='25' height='25' src=" + result[icount].lstlrngs[icnt].filePDFUpload + " /> </a> </span> <span class='detailDoc'><img src=" + result[icount].lstlrngs[icnt].hpsharedIcon + " class='pull-right mrl' /></span> </div>" +
                                                                   "</div>" +
                                                                 "</div>" +
                                                               "</div>" +
                                                             "</div>");
                                        $('#DivLearnings').append(generateLText);
                                    }
                                    else if (result[icount].lstlrngs[icnt].DocType == 'PPT') {
                                        var ShareTopicID = result[icount].lstlrngs[icnt].Lid;
                                        var generateLText = ("<div class='panel-body topicEdit clearB'>" +
                                                              " <div class='span12 borderB'>" +
                                                               "  <div class='span4'>" +
                                                                "   <div class='m10 ml0'> <iframe src=" + result[icount].lstlrngs[icnt].LURL + " class='hpit_athena_detailPostIfram EBaddTopicLF' frameborder='0'   scrolling='no' style='border:1px solid #999999'></iframe>  </div>" +
                                                                 "</div>" +
                                                                 "<div class='span8'>" +
                                                                  " <div class='m10'>" +
                                                                   "  <h4>" + result[icount].lstlrngs[icnt].LName + " </h4>" +
                                                                    " <p> " + result[icount].lstlrngs[icnt].LDescription + "  </p>" +
                                                                     "<div>" +
                                                                      "<div class='tagBack' style='display:none;'><ul class='tags'><li class='tag'>" + result[icount].lstlrngs[icnt].Tags + " </li></ul></div>" +
                                                                      " <button class='btnAthena btn-primary pull-right' data-TopicId='" + ShareTopicID + "' onclick='OpenTopicSharePopup(this)'><span class='icon-share'></span> Share</button>" +
                                                                       "<span class='detailDoc'> <a target='_blank' href=" + result[icount].lstlrngs[icnt].LURL + "> <img class='mrl' width='25' height='25' src=" + result[icount].lstlrngs[icnt].filePPTUpload + " /> </a> </span> <span class='detailDoc'><img src=" + result[icount].lstlrngs[icnt].hpsharedIcon + " class='pull-right mrl' /></span> </div>" +
                                                                   "</div>" +
                                                                 "</div>" +
                                                               "</div>" +
                                                             "</div>");
                                        $('#DivLearnings').append(generateLText);
                                    }
                                    else if (result[icount].lstlrngs[icnt].DocType == 'DOC') {
                                        var ShareTopicID = result[icount].lstlrngs[icnt].Lid;
                                        var generateLText = ("<div class='panel-body topicEdit clearB'>" +
                                                              " <div class='span12 borderB'>" +
                                                               "  <div class='span4'>" +
                                                                "   <div class='m10 ml0'> <iframe src=" + result[icount].lstlrngs[icnt].LURL + " class='hpit_athena_detailPostIfram EBaddTopicLF' frameborder='0'   scrolling='no' style='border:1px solid #999999'></iframe>  </div>" +
                                                                 "</div>" +
                                                                 "<div class='span8'>" +
                                                                  " <div class='m10'>" +
                                                                   "  <h4>" + result[icount].lstlrngs[icnt].LName + " </h4>" +
                                                                    " <p> " + result[icount].lstlrngs[icnt].LDescription + "  </p>" +
                                                                     "<div>" +
                                                                     "<div class='tagBack' style='display:none;'><ul class='tags'><li class='tag'>" + result[icount].lstlrngs[icnt].Tags + " </li></ul></div>" +
                                                                      //" <button class='demo btnAthena btn-primary pull-right'>Share</button>" +
                                                                      " <button class='btnAthena btn-primary pull-right' data-TopicId='" + ShareTopicID + "' onclick='OpenTopicSharePopup(this)'><span class='icon-share'></span> Share</button>" +
                                                                       "<span class='detailDoc'> <a target='_blank' href=" + result[icount].lstlrngs[icnt].LURL + "> <img class='mrl' width='25' height='25' src=" + result[icount].lstlrngs[icnt].fileWordUpload + " /> </a> </span> <span class='detailDoc'><img src=" + result[icount].lstlrngs[icnt].hpsharedIcon + " class='pull-right mrl' /></span> </div>" +
                                                                   "</div>" +
                                                                 "</div>" +
                                                               "</div>" +
                                                             "</div>");
                                        $('#DivLearnings').append(generateLText);
                                    }
                                    else if (result[icount].lstlrngs[icnt].DocType == 'OTHER') {
                                        var ShareTopicID = result[icount].lstlrngs[icnt].Lid;
                                        var generateLText = ("<div class='panel-body topicEdit clearB'>" +
                                                              " <div class='span12 borderB'>" +
                                                               "  <div class='span4'>" +
                                                                "   <div class='m10 ml0'> <iframe src=" + result[icount].lstlrngs[icnt].LURL + " class='hpit_athena_detailPostIfram EBaddTopicLF' frameborder='0'   scrolling='no' style='border:1px solid #999999'></iframe>  </div>" +
                                                                 "</div>" +
                                                                 "<div class='span8'>" +
                                                                  " <div class='m10'>" +
                                                                   "  <h4>" + result[icount].lstlrngs[icnt].LName + " </h4>" +
                                                                    " <p> " + result[icount].lstlrngs[icnt].LDescription + "  </p>" +
                                                                     "<div>" +
                                                                     "<div class='tagBack' style='display:none;'><ul class='tags'><li class='tag'>" + result[icount].lstlrngs[icnt].Tags + " </li></ul></div>" +
                                                                      " <button class='btnAthena btn-primary pull-right' data-TopicId='" + ShareTopicID + "' onclick='OpenTopicSharePopup(this)'><span class='icon-share'></span> Share</button>" +
                                                                       "<span class='detailDoc'> <a target='_blank' href=" + result[icount].lstlrngs[icnt].LURL + "> <img class='mrl' width='25' height='25' src=" + result[icount].lstlrngs[icnt].fileURLUpload + " /> </a> </span> <span class='detailDoc'><img src=" + result[icount].lstlrngs[icnt].hpsharedIcon + " class='pull-right mrl' /></span> </div>" +
                                                                   "</div>" +
                                                                 "</div>" +
                                                               "</div>" +
                                                             "</div>");
                                        $('#DivLearnings').append(generateLText);
                                    }
                                }
                            }

                            $('#DivLearnings').append("</div>");
                        }
                        else {

                            //Collaps and Expand

                            var spacehref = result[icount].CategoryName.replace(/ /g, "_");
                            var hrefurl = '#' + spacehref;
                            var generateLearning = ("<div class='panel panel-default'> <div class='panel-heading'>" +
                            "<h4 class='panel-title'> <a   onclick='ShowHideCategory(this)'  class='accordion-toggle a_underNone' data-toggle='collapse' data-parent='#accordion' href='" + hrefurl + "'> <span class='icon-plus-sign-alt'></span> " + result[icount].CategoryName + " </a>  </h4>" +
                                  "</div>");
                            $('#DivLearnings').append(generateLearning);
                            var generateL = ("<div id='" + spacehref + "' class='panel-collapse collapse'>");

                            var GenerateUrl = '';
                            var generateLText = '';
                            var IntegrateContent = '';
                            var generateVideo = '';
                            var LinkRelatedPDF = '';
                            var clientFacing = '';
                            var practiceApproved = '';
                            var NextDviToComplete = '';
                            IntegrateContent = generateL;


                            for (var icnt = 0; icnt < result[icount].lstlrngs.length; icnt++) {


                                if (result[icount].lstlrngs[icnt].LType == 'Text') {
                                    var ShareTopicID = result[icount].lstlrngs[icnt].Lid;
                                    GenerateUrl = (
                                       "<div class='panel-body topicEdit clearB'>" +
                                                 " <div class='span12 borderB' >" +
                                                  "  <div class='span4'>" +
                                                   "   <div class='m10 ml0'> <img src=" + result[icount].lstlrngs[icnt].DefaultImageName + " class='EBaddTopicL'  />  </div>" +
                                                    "</div>" +
                                                    "<div class='span8'>" +
                                                     " <div class='m10'>" +
                                                      "  <h4>" + result[icount].lstlrngs[icnt].LName + " </h4>" +
                                                       " <p> " + result[icount].lstlrngs[icnt].LDescription + "   </p>" +
                                                       "<div class='tagBack' style='display:none;'><ul class='tags'><li class='tag'>" + result[icount].lstlrngs[icnt].Tags + " </li></ul></div>" +
                                                      "<div>" +
                                                        //"<a href='mailto:?Subject={!LoggedinUserDtls.Name} thought that you may be interested in " + result[icount].lstlrngs[icnt].LName + " topic. &Body=Hi,%0D%0A{!LoggedinUserDtls.Name} thought that you may be interested in this learning board!%0D%0A " + result[icount].lstlrngs[icnt].LName + " %0D%0A " + result[icount].lstlrngs[icnt].LDescription + " %0D%0A  https://{!getSfInstance}/apex/SreeBoardDtls?id={!LearningBoardDtls.LBid}'>" +
                                                        "<a href='#'>" +
                                                         " <button class='btnAthena btn-primary pull-right' data-TopicId='" + ShareTopicID + "' onclick='OpenTopicSharePopup(this)'><span class='icon-share'></span> Share</button></a>");
                                    IntegrateContent += GenerateUrl;
                                    if (result[icount].lstlrngs[icnt].ClientFacing) {
                                        clientFacing = (" <span class='detailDoc'><img src=" + result[icount].lstlrngs[icnt].hpsharedIcon + " class='pull-right mrl' /></span>");
                                        IntegrateContent += clientFacing;
                                    }

                                    if (result[icount].lstlrngs[icnt].PracticeApproved == true) {
                                        practiceApproved = (" <span class='detailDoc'><img src=" + result[icount].lstlrngs[icnt].HPCertification + " class='pull-right mrl' /></span>");
                                        IntegrateContent += practiceApproved;
                                    }

                                    NextDviToComplete = ("</div>" +
                                                      "</div>" +
                                                       "</div>" +
                                                  "</div>" +
                                                  "</div>");
                                    IntegrateContent += NextDviToComplete;


                                }
                                else if ((result[icount].lstlrngs[icnt].LType == 'Link or Document') || (result[icount].lstlrngs[icnt].LType == 'Upload Document')) {

                                    GenerateUrl = (
                                    "<div class='panel-body topicEdit clearB'>" +
                                              " <div class='span12 borderB' >" +
                                               "  <div class='span4'>" +
                                                "   <div class='m10 ml0'> <img src=" + result[icount].lstlrngs[icnt].DefaultImageName + " class='EBaddTopicL'  />  </div>" +
                                                 "</div>" +
                                                 "<div class='span8'>" +
                                                  " <div class='m10'>" +
                                                   "  <h4>" + result[icount].lstlrngs[icnt].LName + " </h4>" +
                                                    " <p> " + result[icount].lstlrngs[icnt].LDescription + "  </p>" +
                                                    "<div class='tagBack' style='display:none;'><ul class='tags'><li class='tag'>" + result[icount].lstlrngs[icnt].Tags + " </li></ul></div>" +
                                                     "<div>");

                                    IntegrateContent += GenerateUrl;

                                    if (result[icount].lstlrngs[icnt].DocType == 'PDF') {
                                        var ShareTopicID = result[icount].lstlrngs[icnt].Lid;

                                        //LinkRelatedPDF = ("<a href='mailto:?Subject={!LoggedinUserDtls.Name} thought that you may be interested in " + result[icount].lstlrngs[icnt].LName + " topic. &Body=Hi,%0D%0A{!LoggedinUserDtls.Name} thought that you may be interested in this topic !%0D%0A " + result[icount].lstlrngs[icnt].LName + " %0D%0A " + result[icount].lstlrngs[icnt].LDescription + " %0D%0A  https://{!getSfInstance}/apex/SreeBoardDtls?id={!LearningBoardDtls.LBid}'>" +

                                        LinkRelatedPDF = ("<a href='#'>" +
                                            "<button class='btnAthena btn-primary pull-right' data-TopicId='" + ShareTopicID + "' onclick='OpenTopicSharePopup(this)'><span class='icon-share'></span> Share</button></a>" +

                                                          "<span class='detailDoc'> " +
                                        "<a target='_blank' href=" + result[icount].lstlrngs[icnt].LURL + "> <img class='mrl' width='25' height='25' src=" + result[icount].lstlrngs[icnt].filePDFUpload + " /> </a> " +
                                        "</span> ");
                                        IntegrateContent += LinkRelatedPDF;
                                        if (result[icount].lstlrngs[icnt].ClientFacing) {
                                            clientFacing = (" <span class='detailDoc'><img src=" + result[icount].lstlrngs[icnt].hpsharedIcon + " class='pull-right mrl' /></span>");
                                            IntegrateContent += clientFacing;
                                        }

                                        if (result[icount].lstlrngs[icnt].PracticeApproved == true) {
                                            practiceApproved = (" <span class='detailDoc'><img src=" + result[icount].lstlrngs[icnt].HPCertification + " class='pull-right mrl' /></span>");
                                            IntegrateContent += practiceApproved;
                                        }

                                        NextDviToComplete = ("</div>" +
                                                          "</div>" +
                                                        "</div>" +
                                                      "</div>" +
                                                      "</div>");
                                        IntegrateContent += NextDviToComplete;


                                    }

                                    else if (result[icount].lstlrngs[icnt].DocType == 'PPT') {
                                        var ShareTopicID = result[icount].lstlrngs[icnt].Lid;

                                        //LinkRelatedPDF = ("<a href='mailto:?Subject={!LoggedinUserDtls.Name} thought that you may be interested in " + result[icount].lstlrngs[icnt].LName + " topic. &Body=Hi,%0D%0A{!LoggedinUserDtls.Name} thought that you may be interested in this topic!%0D%0A " + result[icount].lstlrngs[icnt].LName + " %0D%0A " + result[icount].lstlrngs[icnt].LDescription + " %0D%0A  https://{!getSfInstance}/apex/SreeBoardDtls?id={!LearningBoardDtls.LBid}'>" +

                                        LinkRelatedPDF = ("<a href='#'>" +
                                            " <button class='btnAthena btn-primary pull-right' data-TopicId='" + ShareTopicID + "' onclick='OpenTopicSharePopup(this)'><span class='icon-share'></span> Share</button></a>" +

                                                          "<span class='detailDoc'> " +
                                        "<a target='_blank' href=" + result[icount].lstlrngs[icnt].LURL + "> <img class='mrl' width='25' height='25' src=" + result[icount].lstlrngs[icnt].filePPTUpload + " /> </a> " +
                                        "</span> ");

                                        IntegrateContent += LinkRelatedPDF;
                                        if (result[icount].lstlrngs[icnt].ClientFacing) {
                                            clientFacing = (" <span class='detailDoc'><img src=" + result[icount].lstlrngs[icnt].hpsharedIcon + " class='pull-right mrl' /></span>");
                                            IntegrateContent += clientFacing;
                                        }

                                        if (result[icount].lstlrngs[icnt].PracticeApproved == true) {
                                            practiceApproved = (" <span class='detailDoc'><img src=" + result[icount].lstlrngs[icnt].HPCertification + " class='pull-right mrl' /></span>");
                                            IntegrateContent += practiceApproved;
                                        }

                                        NextDviToComplete = ("</div>" +
                                                          "</div>" +
                                                        "</div>" +
                                                      "</div>" +
                                                      "</div>");
                                        IntegrateContent += NextDviToComplete;

                                    }

                                    else if (result[icount].lstlrngs[icnt].DocType == 'DOC') {

                                        var ShareTopicID = result[icount].lstlrngs[icnt].Lid;

                                        //LinkRelatedPDF = ("<a href='mailto:?Subject={!LoggedinUserDtls.Name} thought that you may be interested in " + result[icount].lstlrngs[icnt].LName + " topic. &Body=Hi,%0D%0A{!LoggedinUserDtls.Name} thought that you may be interested in this topic!%0D%0A " + result[icount].lstlrngs[icnt].LName + " %0D%0A " + result[icount].lstlrngs[icnt].LDescription + " %0D%0A  https://{!getSfInstance}/apex/SreeBoardDtls?id={!LearningBoardDtls.LBid}'>" +

                                        LinkRelatedPDF = ("<a href='#'>" +
                                            " <button class='btnAthena btn-primary pull-right' data-TopicId='" + ShareTopicID + "' onclick='OpenTopicSharePopup(this)'><span class='icon-share'></span> Share</button></a>" +

                                                          "<span class='detailDoc'> " +
                                        "<a target='_blank' href=" + result[icount].lstlrngs[icnt].LURL + "> <img class='mrl' width='25' height='25' src=" + result[icount].lstlrngs[icnt].fileWordUpload + " /> </a> " +
                                        "</span> ");

                                        IntegrateContent += LinkRelatedPDF;
                                        if (result[icount].lstlrngs[icnt].ClientFacing) {
                                            clientFacing = (" <span class='detailDoc'><img src=" + result[icount].lstlrngs[icnt].hpsharedIcon + " class='pull-right mrl' /></span>");
                                            IntegrateContent += clientFacing;
                                        }

                                        if (result[icount].lstlrngs[icnt].PracticeApproved == true) {
                                            practiceApproved = (" <span class='detailDoc'><img src=" + result[icount].lstlrngs[icnt].HPCertification + " class='pull-right mrl' /></span>");
                                            IntegrateContent += practiceApproved;
                                        }

                                        NextDviToComplete = ("</div>" +
                                                          "</div>" +
                                                        "</div>" +
                                                      "</div>" +
                                                      "</div>");
                                        IntegrateContent += NextDviToComplete;

                                    }

                                    else if (result[icount].lstlrngs[icnt].DocType == 'OTHER') {

                                        var ShareTopicID = result[icount].lstlrngs[icnt].Lid;

                                        //LinkRelatedPDF = ("<a href='mailto:?Subject={!LoggedinUserDtls.Name} thought that you may be interested in " + result[icount].lstlrngs[icnt].LName + " topic. &Body=Hi,%0D%0A{!LoggedinUserDtls.Name} thought that you may be interested in this topic!%0D%0A " + result[icount].lstlrngs[icnt].LName + " %0D%0A " + result[icount].lstlrngs[icnt].LDescription + " %0D%0A  https://{!getSfInstance}/apex/SreeBoardDtls?id={!LearningBoardDtls.LBid}'>" +

                                        LinkRelatedPDF = ("<a href='#'>" +
                                            " <button class='btnAthena btn-primary pull-right' data-TopicId='" + ShareTopicID + "' onclick='OpenTopicSharePopup(this)'><span class='icon-share'></span> Share</button></a>" +
                                         "<span class='detailDoc'> " +
                                        "<a target='_blank' href=" + result[icount].lstlrngs[icnt].LURL + "> <img class='mrl' width='25' height='25' src=" + result[icount].lstlrngs[icnt].fileURLUpload + " /> </a> " +
                                        "</span> ");

                                        IntegrateContent += LinkRelatedPDF;
                                        if (result[icount].lstlrngs[icnt].ClientFacing) {
                                            clientFacing = (" <span class='detailDoc'><img src=" + result[icount].lstlrngs[icnt].hpsharedIcon + " class='pull-right mrl' /></span>");
                                            IntegrateContent += clientFacing;
                                        }

                                        if (result[icount].lstlrngs[icnt].PracticeApproved == true) {
                                            practiceApproved = (" <span class='detailDoc'><img src=" + result[icount].lstlrngs[icnt].HPCertification + " class='pull-right mrl' /></span>");
                                            IntegrateContent += practiceApproved;
                                        }

                                        NextDviToComplete = ("</div>" +
                                                          "</div>" +
                                                        "</div>" +
                                                      "</div>" +
                                                      "</div>");
                                        IntegrateContent += NextDviToComplete;

                                    }

                                }


                                else if (result[icount].lstlrngs[icnt].LType == 'Video') {
                                    var ShareTopicID = result[icount].lstlrngs[icnt].Lid;

                                    generateLText = ("<div class='panel-body topicEdit clearB'>" +
                                                           " <div class='span12 borderB'>" +
                                                            "  <div class='span4'>" +
                                                             "   <div class='m10 ml0'> <iframe src=" + result[icount].lstlrngs[icnt].LURL + " class='EBaddTopicLF' frameborder='0'   scrolling='no' style='border:1px solid #999999'></iframe>  </div>" +
                                                              "</div>" +
                                                              "<div class='span8'>" +
                                                               " <div class='m10'>" +
                                                                "  <h4>" + result[icount].lstlrngs[icnt].LName + " </h4>" +
                                                                 " <p> " + result[icount].lstlrngs[icnt].LDescription + "  </p>" +
                                                                 "<div class='tagBack' style='display:none;'><ul class='tags'><li class='tag'>" + result[icount].lstlrngs[icnt].Tags + " </li></ul></div>" +
                                                                  "<div>" +
                                                                  //"<a href='mailto:?Subject={!LoggedinUserDtls.Name} thought that you may be interested in " + result[icount].lstlrngs[icnt].LName + " topic. &Body=Hi,%0D%0A{!LoggedinUserDtls.Name} thought that you may be interested in this topic!%0D%0A " + result[icount].lstlrngs[icnt].LName + " %0D%0A " + result[icount].lstlrngs[icnt].LDescription + " %0D%0A  https://{!getSfInstance}/apex/SreeBoardDtls?id={!LearningBoardDtls.LBid}'>" +
                                                                   "<a href='#'>" +
                                                                   " <button class='btnAthena btn-primary pull-right' data-TopicId='" + ShareTopicID + "' onclick='OpenTopicSharePopup(this)'><span class='icon-share'></span> Share</button></a>");

                                    IntegrateContent += generateLText;
                                    if (result[icount].lstlrngs[icnt].ClientFacing) {
                                        clientFacing = (" <span class='detailDoc'><img src=" + result[icount].lstlrngs[icnt].hpsharedIcon + " class='pull-right mrl' /></span>");
                                        IntegrateContent += clientFacing;
                                    }

                                    if (result[icount].lstlrngs[icnt].PracticeApproved == true) {
                                        practiceApproved = (" <span class='detailDoc'><img src=" + result[icount].lstlrngs[icnt].HPCertification + " class='pull-right mrl' /></span>");
                                        IntegrateContent += practiceApproved;
                                    }

                                    NextDviToComplete = ("</div>" +
                                                      "</div>" +
                                                    "</div>" +
                                                  "</div>" +
                                                  "</div>");
                                    IntegrateContent += NextDviToComplete;

                                }
                            }


                            var LastDiv = "</div>";
                            IntegrateContent += LastDiv;
                            $('#DivLearnings').append(IntegrateContent);
                        }




                    }

                }
            }
            else {

                for (var icount = 0; icount < result.length; icount++) {
                    if (result[icount].lstlrngs.length > 0) {
                        var spacehref = result[icount].CategoryName.replace(/ /g, "_");
                        var hrefurl = '#' + spacehref;
                        var generateLearning = ("<div class='panel panel-default'> <div class='panel-heading'>" +
                        "<h4 class='panel-title'> <a   onclick='ShowHideCategory(this)'  class='accordion-toggle a_underNone' data-toggle='collapse' data-parent='#accordion' href='" + hrefurl + "'> <span class='icon-plus-sign-alt'></span> " + result[icount].CategoryName + " </a>  </h4>" +
                              "</div>");
                        $('#DivLearnings').append(generateLearning);
                        var generateL = ("<div id='" + spacehref + "' class='panel-collapse collapse'>");

                        var GenerateUrl = '';
                        var generateLText = '';
                        var IntegrateContent = '';
                        var generateVideo = '';
                        var LinkRelatedPDF = '';
                        var clientFacing = '';
                        var practiceApproved = '';
                        var NextDviToComplete = '';
                        IntegrateContent = generateL;


                        for (var icnt = 0; icnt < result[icount].lstlrngs.length; icnt++) {

                            //var spacehrefLearning = result[icount].lstlrngs[icnt].LName.replace(/ /g, "_");
                            var spacehrefLearning = $.trim(result[icount].lstlrngs[icnt].LName).replace(/([~!@#$%^&*()_+=`{}\[\]\|\\:;'<>,.\/? ])+/g, '-').replace(/^(-)+|(-)+$/g, '');
                            var hrefurlLearning = '#' + spacehrefLearning;

                            if (result[icount].lstlrngs[icnt].LType == 'Text') {
                                var description = result[icount].lstlrngs[icnt].LShortDescription;
                                var display = '';
                                if (description.length > 150) {
                                    display = "display:block";
                                }
                                else {
                                    display = "display:none";
                                }
                                var ShareTopicID = result[icount].lstlrngs[icnt].Lid;

                                GenerateUrl = (
                                       "<div class='panel-body topicEdit clearB'>" +
                                                 " <div class='span12 borderB' >" +
                                                  "  <div class='span4'>" +
                                                   "   <div class='m10 ml0'> <img src=" + result[icount].lstlrngs[icnt].DefaultImageName + " class='EBaddTopicL'  />  </div>" +
                                                    "</div>" +
                                                    "<div class='span8'>" +
                                                     " <div class='m10'>" +
                                                      "  <h4>" + result[icount].lstlrngs[icnt].LName + " </h4>" +
                                                       " <p> " + result[icount].lstlrngs[icnt].LShortDescription + "  </p>" +

                                                       "<a class='' data-toggle='modal' style=" + display + " href='" + hrefurlLearning + "'> Read more </a>" +
                                                       "<div class='tagBack' style='display:none;'><ul class='tags'><li class='tag'>" + result[icount].lstlrngs[icnt].Tags + " </li></ul></div>" +
                                                      "<div id='" + spacehrefLearning + "' class='modal hide fade PositionF' tabindex='-1' role='dialog' aria-labelledby='myModalLabel1' aria-hidden='true' data-backdrop='static'>" +
  "<div class='modal-header'>" +
   " <h3>Topic Description</h3>" +
  "</div>" +
  "<div class='modal-body'>" +
   " <p> " +

                                "'" + result[icount].lstlrngs[icnt].LDescription + "'" +
    "</p>" +
  "</div>" +
  "<div class='modal-footer'>" +
   " <button class='btnAthena' data-dismiss='modal' aria-hidden='true'>Cancel</button>" +

  "</div>" +
"</div>" +



                                                        "<div>" +

                                                         //"<a href='mailto:?Subject={!LoggedinUserDtls.Name} thought that you may be interested in " + result[icount].lstlrngs[icnt].LName + " topic. &Body=Hi,%0D%0A{!LoggedinUserDtls.Name} thought that you may be interested in this topic!%0D%0A " + result[icount].lstlrngs[icnt].LName + " %0D%0A " + result[icount].lstlrngs[icnt].LDescription + " %0D%0A  https://{!getSfInstance}/apex/SreeBoardDtls?id={!LearningBoardDtls.LBid}'>" +
                                                        "<a href='#'>" +
                                                         " <button class='btnAthena btn-primary pull-right' data-TopicId='" + ShareTopicID + "' onclick='OpenTopicSharePopup(this)'><span class='icon-share'></span> Share</button></a>");
                                IntegrateContent += GenerateUrl;
                                if (result[icount].lstlrngs[icnt].ClientFacing) {

                                    clientFacing = (" <span class='detailDoc'><img src=" + result[icount].lstlrngs[icnt].hpsharedIcon + " class='pull-right mrl' /></span>");
                                    IntegrateContent += clientFacing;
                                }

                                if (result[icount].lstlrngs[icnt].PracticeApproved == true) {
                                    practiceApproved = (" <span class='detailDoc'><img src=" + result[icount].lstlrngs[icnt].HPCertification + " class='pull-right mrl' /></span>");
                                    IntegrateContent += practiceApproved;
                                }

                                NextDviToComplete = ("</div>" +
                                                  "</div>" +
                                                "</div>" +
                                              "</div>" +
                                              "</div>");
                                IntegrateContent += NextDviToComplete;


                            }
                            else if ((result[icount].lstlrngs[icnt].LType == 'Link or Document') || (result[icount].lstlrngs[icnt].LType == 'Upload Document')) {
                                var description = result[icount].lstlrngs[icnt].LShortDescription;
                                var display = '';
                                if (description.length > 150) {
                                    display = "display:block";
                                }
                                else {
                                    display = "display:none";
                                }


                                GenerateUrl = (
                                  "<div class='panel-body topicEdit clearB'>" +
                                            " <div class='span12 borderB' >" +
                                             "  <div class='span4'>" +
                                              "   <div class='m10 ml0'> <img src=" + result[icount].lstlrngs[icnt].DefaultImageName + " class='EBaddTopicL'  />  </div>" +
                                               "</div>" +
                                               "<div class='span8'>" +
                                                " <div class='m10'>" +
                                                 "  <h4>" + result[icount].lstlrngs[icnt].LName + " </h4>" +
                                                  " <p> " + result[icount].lstlrngs[icnt].LShortDescription + "  </p>" +

                                                   "<a class='' data-toggle='modal' style=" + display + " href='" + hrefurlLearning + "'> Read more </a>" +
                                                   "<div class='tagBack' style='display:none;'><ul class='tags'><li class='tag'>" + result[icount].lstlrngs[icnt].Tags + " </li></ul></div>" +
                                                        "<div id='" + spacehrefLearning + "' class='modal hide fade PositionF' tabindex='-1' role='dialog' aria-labelledby='myModalLabel1' aria-hidden='true' data-backdrop='static'>" +
                                                      "<div class='modal-header'>" +
                                                       " <h3>Topic Description</h3>" +
                                                      "</div>" +
                                                      "<div class='modal-body'>" +
                                                       " <p> " +
                                                              "'" + result[icount].lstlrngs[icnt].LDescription + "'" +
                                                        "</p>" +
                                                      "</div>" +

                                                      "<div class='modal-footer'>" +
                                                       " <button class='btnAthena' data-dismiss='modal' aria-hidden='true'>Cancel</button>" +

                                                      "</div>" +
                                                    "</div>" +



                                                   "<div>");

                                IntegrateContent += GenerateUrl;

                               

                                if (result[icount].lstlrngs[icnt].DocType == 'PDF') {

                                    var ShareTopicID = result[icount].lstlrngs[icnt].Lid;

                                    //LinkRelatedPDF = ("<a href='mailto:?Subject={!LoggedinUserDtls.Name} thought that you may be interested in " + result[icount].lstlrngs[icnt].LName + "topic. &Body=Hi,%0D%0A{!LoggedinUserDtls.Name} thought that you may be interested in this topic!%0D%0A " + result[icount].lstlrngs[icnt].LName + " %0D%0A " + result[icount].lstlrngs[icnt].LDescription + " %0D%0A  https://{!getSfInstance}/apex/SreeBoardDtls?id={!LearningBoardDtls.LBid}'>" +
                                    LinkRelatedPDF = ("<a href='#'>" +
                                        " <button class='btnAthena btn-primary pull-right' data-TopicId='" + ShareTopicID + "' onclick='OpenTopicSharePopup(this)'><span class='icon-share'></span> Share</button></a>" +
                                    "<span class='detailDoc'> " +
                                    "<a target='_blank' href=" + result[icount].lstlrngs[icnt].LURL + "> <img class='mrl' width='25' height='25' src=" + result[icount].lstlrngs[icnt].filePDFUpload + " /> </a> " +
                                    "</span> ");
                                    IntegrateContent += LinkRelatedPDF;
                                    
                                    



                                }

                                else if (result[icount].lstlrngs[icnt].DocType == 'PPT') {

                                    var ShareTopicID = result[icount].lstlrngs[icnt].Lid;

                                    //LinkRelatedPDF = ("<a href='mailto:?Subject={!LoggedinUserDtls.Name} thought you might be interested in the " + result[icount].lstlrngs[icnt].LName + " topic. &Body=Hi,%0D%0A{!LoggedinUserDtls.Name} thought that you may be interested in this topic!%0D%0A " + result[icount].lstlrngs[icnt].LName + " %0D%0A " + result[icount].lstlrngs[icnt].LDescription + " %0D%0A  https://{!getSfInstance}/apex/SreeBoardDtls?id={!LearningBoardDtls.LBid}'>" +

                                    LinkRelatedPDF = ("<a href='#'>" +
                                        " <button class='btnAthena btn-primary pull-right' data-TopicId='" + ShareTopicID + "' onclick='OpenTopicSharePopup(this)'><span class='icon-share'></span> Share</button></a>" +
                                    "<span class='detailDoc'> " +
                                "<a target='_blank' href=" + result[icount].lstlrngs[icnt].LURL + "> <img class='mrl' width='25' height='25' src=" + result[icount].lstlrngs[icnt].filePPTUpload + " /> </a> " +
                                "</span> ");

                                    IntegrateContent += LinkRelatedPDF;
                                        

                                }

                                else if (result[icount].lstlrngs[icnt].DocType == 'DOC') {

                                    var ShareTopicID = result[icount].lstlrngs[icnt].Lid;

                                    //LinkRelatedPDF = ("<a href='mailto:?Subject={!LoggedinUserDtls.Name} thought you might be interested in the " + result[icount].lstlrngs[icnt].LName + " topic. &Body=Hi,%0D%0A{!LoggedinUserDtls.Name} thought that you may be interested in this topic!%0D%0A " + result[icount].lstlrngs[icnt].LName + " %0D%0A " + result[icount].lstlrngs[icnt].LDescription + " %0D%0A  https://{!getSfInstance}/apex/SreeBoardDtls?id={!LearningBoardDtls.LBid}'>" +
                                    LinkRelatedPDF = ( "<a href='#'>" +
                                        " <button class='btnAthena btn-primary pull-right' data-TopicId='" + ShareTopicID + "' onclick='OpenTopicSharePopup(this)'><span class='icon-share'></span> Share</button></a>" +
                                    "<span class='detailDoc'> " +

                                    "<a target='_blank' href=" + result[icount].lstlrngs[icnt].LURL + "> <img class='mrl' width='25' height='25' src=" + result[icount].lstlrngs[icnt].fileWordUpload + " /> </a> " +
                                    "</span> ");

                                    IntegrateContent += LinkRelatedPDF;
                                        


                                }

                                else if (result[icount].lstlrngs[icnt].DocType == 'OTHER') {
                                    var ShareTopicID = result[icount].lstlrngs[icnt].Lid;

                                    //LinkRelatedPDF = ("<a href='mailto:?Subject={!LoggedinUserDtls.Name} thought you might be interested in the " + result[icount].lstlrngs[icnt].LName + " topic. &Body=Hi,%0D%0A{!LoggedinUserDtls.Name} thought that you may be interested in this topic!%0D%0A " + result[icount].lstlrngs[icnt].LName + " %0D%0A " + result[icount].lstlrngs[icnt].LDescription + " %0D%0A  https://{!getSfInstance}/apex/SreeBoardDtls?id={!LearningBoardDtls.LBid}'>" +
                                    LinkRelatedPDF = ("<a href='#'>" +
                                        " <button class='btnAthena btn-primary pull-right' data-TopicId='" + ShareTopicID + "' onclick='OpenTopicSharePopup(this)'><span class='icon-share'></span> Share</button></a>" +
                                    "<span class='detailDoc'> " +

                                    "<a target='_blank' href=" + result[icount].lstlrngs[icnt].LURL + "> <img class='mrl' width='25' height='25' src=" + result[icount].lstlrngs[icnt].fileURLUpload + " /> </a> " +
                                    "</span> ");

                                    IntegrateContent += LinkRelatedPDF;
                                    

                                }
 if (result[icount].lstlrngs[icnt].ClientFacing) {
                                    clientFacing = (" <span class='detailDoc'><img src=" + result[icount].lstlrngs[icnt].hpsharedIcon + " class='pull-right mrl' /></span>");
                                    IntegrateContent += clientFacing;
                                }

                                if (result[icount].lstlrngs[icnt].PracticeApproved == true) {
                                    practiceApproved = (" <span class='detailDoc'><img src=" + result[icount].lstlrngs[icnt].HPCertification + " class='pull-right mrl' /></span>");
                                    IntegrateContent += practiceApproved;
                                }
                                NextDviToComplete = ("</div>" +
                                                  "</div>" +
                                                "</div>" +
                                              "</div>" +
                                              "</div>");
                                IntegrateContent += NextDviToComplete;
                            }


                            else if (result[icount].lstlrngs[icnt].LType == 'Video') {
                                var description = result[icount].lstlrngs[icnt].LShortDescription;
                                var ShareTopicID = result[icount].lstlrngs[icnt].Lid;
                                var display = '';
                                if (description.length > 150) {
                                    display = "display:block";
                                }
                                else {
                                    display = "display:none";
                                }
                                var someText = "<a>" + result[icount].lstlrngs[icnt].LName + "</a>";
                                generateLText = ("<div class='panel-body topicEdit clearB'>" +
                                                       " <div class='span12 borderB'>" +
                                                        "  <div class='span4'>" +
                                                         "   <div class='m10 ml0'> <iframe src=" + result[icount].lstlrngs[icnt].LURL + " class='hpit_athena_detailPostIfram EBaddTopicLF' frameborder='0'   scrolling='no' style='border:1px solid #999999'></iframe>  </div>" +
                                                          "</div>" +
                                                          "<div class='span8'>" +
                                                           " <div class='m10'>" +
                                                            "  <h4>" + result[icount].lstlrngs[icnt].LName + " </h4>" +
                                                             " <p> " + result[icount].lstlrngs[icnt].LShortDescription + "  </p>" +
                                                             "<a class='' data-toggle='modal' style=" + display + " href=" + hrefurlLearning + "> Read more </a>" +
                                                              "<div class='tagBack' style='display:none;'><ul class='tags'><li class='tag'>" + result[icount].lstlrngs[icnt].Tags + " </li></ul></div>" +
                                                             //"<p>Tags: " + result[icount].lstlrngs[icnt].Tags + " </p>" +
                                                             "<div id=" + spacehrefLearning + " class='modal hide fade PositionF' tabindex='-1' role='dialog' aria-labelledby='myModalLabel1' aria-hidden='true' data-backdrop='static'>" +
  "<div class='modal-header'>" +
   " <h3>Topic Description</h3>" +
  "</div>" +
  "<div class='modal-body'>" +
   " <p> " +

                                "'" + result[icount].lstlrngs[icnt].LDescription + "'" +
    "</p>" +
  "</div>" +
  "<div class='modal-footer'>" +
   " <button class='btnAthena' data-dismiss='modal' aria-hidden='true'>Cancel</button>" +

  "</div>" +
"</div>" +



                                                              "<div>" +
                                                               //"<a href='mailto:?Subject={!LoggedinUserDtls.Name} thought you might be interested in the " + result[icount].lstlrngs[icnt].LName + " topic. &Body=Hi,%0D%0A{!LoggedinUserDtls.Name} thought that you may be interested in this topic!%0D%0A " + result[icount].lstlrngs[icnt].LName + " %0D%0A " + result[icount].lstlrngs[icnt].LDescription + " %0D%0A  https://{!getSfInstance}/apex/SreeBoardDtls?id={!LearningBoardDtls.LBid}&topicid= " + result[icount].lstlrngs[icnt].Lid + "'>" +
                                                               "<a href='#'>" +
                                                               " <button class='btnAthena btn-primary pull-right' data-TopicId='" + ShareTopicID + "' onclick='OpenTopicSharePopup(this)'><span class='icon-share'></span> Share</button></a>");


                                IntegrateContent += generateLText;
                                if (result[icount].lstlrngs[icnt].ClientFacing) {
                                    clientFacing = (" <span class='detailDoc'><img src=" + result[icount].lstlrngs[icnt].hpsharedIcon + " class='pull-right mrl' /></span>");
                                    IntegrateContent += clientFacing;
                                }

                                if (result[icount].lstlrngs[icnt].PracticeApproved == true) {

                                    practiceApproved = (" <span class='detailDoc'><img src=" + result[icount].lstlrngs[icnt].HPCertification + " class='pull-right mrl' /></span>");
                                    IntegrateContent += practiceApproved;
                                }

                                NextDviToComplete = ("</div>" +
                                                  "</div>" +
                                                "</div>" +
                                              "</div>" +
                                              "</div>");
                                IntegrateContent += NextDviToComplete;

                            }





                        }


                        var LastDiv = "</div>";
                        IntegrateContent += LastDiv;
                        $('#DivLearnings').append(IntegrateContent);
                    }

                }
            }

        }


        $(document).ready(function () {
            LoadLearningBoard();
            $('input.typeahead-devs').typeahead({
                name: 'accounts',
                local: ['']
            });

        });

        $('.collapse').on('shown.bs.collapse', function () {
            $(this).parent().find(".icon-plus-sign-alt").removeClass("icon-plus-sign-alt").addClass("icon-check-minus");
        }).on('hidden.bs.collapse', function () {
            $(this).parent().find(".icon-check-minus").removeClass("icon-check-minus").addClass("icon-plus-sign-alt");
        });

    </script> 
<script type="text/javascript">
    /*   function SubmitSearchForm(e) {
           var searchInputId = document.getElementById('{!$Component.UPForm.searchText}');
           var validate = false;
           if (searchInputId.value.trim().length > 0) {
               document.getElementById('err_msg').innerHTML = "";
           }
           if (searchInputId.value == 'Please Enter Search Text') {
               validate = false;
           }
           else if (searchInputId.value.length > 0) {
               document.getElementById('err_msg').innerHTML = "";
               validate = true;
           }
           else {
               validate = false;
           }
           if (validate) {
               var navbutton = document.getElementById("{!$Component.UPForm.searchButton}");
               var key = 0;
               if (window.event) {
                   key = e.keyCode;
               }
               else if (e.which) {
                   key = e.which;
               }
               if (key == 13) {
                   document.getElementById('err_msg').style.display = 'none';
                   navbutton.click();
               }
               return true;
           }
           else {
               document.getElementById('err_msg').innerHTML = "Enter Value For Search";
               document.getElementById('err_msg').style.display = 'block';
               return false;
           }
       }*/
    function SubmitSearchForm(event) {
        if (event.keyCode == 13) {
            var txtSearch = document.getElementById('{!$Component.UPForm.searchText}');
            if (txtSearch.value.trim().length == 0) {
                document.getElementById('err_msg').innerHTML = "Enter Value For Search";
                document.getElementById('err_msg').style.display = 'block'
                event.preventDefault();
                event.stopPropagation();
                return false;
            }
            else {
                document.getElementById('err_msg').style.display = 'none'
                var button = document.getElementById("{!$Component.UPForm.searchButton}");
                button.click();
            }
            return true;
        }
    }

    function OpenLearningBoardShare() {
        $('#DivShareModelPopup').modal('show');
    }

    function OpenTopicSharePopup(data) {
        debugger

        var TopicID = $(data).attr('data-TopicId');
        $('[id$=txtTopicId]').val(TopicID);

        $('#DivTopicShareModal').modal('show');
    }

    $(document).ready(function () {

        $('.slide-out-div').tabSlideOut({
            tabHandle: '.handle',                              //class of the element that will be your tab
            pathToTabImage: '{!FeedButtonPath} ',          //path to the image for the tab (optionaly can be set using css)
            imageHeight: '122px',                               //height of tab image
            imageWidth: '40px',                               //width of tab image    
            tabLocation: 'right',                               //side of screen where tab lives, top, right, bottom, or left
            speed: 300,                                        //speed of animation
            action: 'click',                                   //options: 'click' or 'hover', action to trigger animation
            topPos: '200px',                                   //position from the top
            fixedPosition: false                               //options: true makes it stick(fixed position) on scroll
        });

        $('.publishericon').hide();
    

        //Resetting the Feedback form input elements
        document.getElementById('{!$Component.ChatterFeedBack.theTextInput}').value = "";
        document.getElementById('{!$Component.ChatterFeedBack.newDesc}').value = "";

        document.getElementById('publisherDropdown').style.display = 'none';
        document.getElementById('publisherAttachRypplePost').style.display = 'none';
        
       document.getElementById('{!$Component.formShareHeader.txtEmailinputUser}').value = ""; 
        document.getElementById('{!$Component.formTopic.txtInputEmailTopic}').value = "";
    });
    
    function funcClearShareEamil()
    {
      document.getElementById('{!$Component.formShareHeader.txtEmailinputUser}').value = ""; 
        document.getElementById('{!$Component.formTopic.txtInputEmailTopic}').value = "";
    }
    
        </script>
</body>
<!-- END BODY -->
</html>
</apex:page>